import{j as ka,c as M,h as i,k as Ra,X as Oa,Y as Na,r as c,Z as Ka,$ as $a,w as ne,b as Ot,a0 as Qa,Q as ft,g as Tt,a1 as za,a2 as Ua,n as Vt,a3 as Ga,a4 as Xa,a5 as Ya,a6 as ja,a7 as Za,d as Ht,a as Nt,o as Kt,f as Wt,T as $t,_ as Ja,E as fa,F as Ne,M as Ze,I as _e,a8 as Et,H as Le,K as at,a9 as pa,R as kt,S as ra,G as va,J as Rt,P as Ft,aa as ha,ab as It,ac as ma,ad as en,ae as tn,N as an,af as nn,O as ln,ag as rn,U as un,V as dn}from"./index.0c2182e4.js";import{Q as Wa,a as on,b as sn,c as cn,d as fn,e as vn,f as hn,g as ya,h as Ca,i as mn}from"./viewAllGoals.a60bfc7d.js";import{c as ba,b as yn,d as Aa,e as Ma,f as wa,v as Ue,h as St,j as vt,p as ye,k as ua,l as xe,u as ga,m as Ct,R as Dt,n as At,o as Mt,q as Lt,r as Qt,s as zt,w as we,t as it,x as Ut,y as Gt,z as Xt,A as ht,B as Yt,C as jt,D as Zt,E as Se,F as Jt,G as pt,H as nt,I as ia,J as da,K as de,L as ea,M as ta,O as gn,P as _n,S as bn,Q as wn,N as Dn,T as _a,U as qa,i as Ea}from"./NavigationBar.36a9893b.js";import{u as kn}from"./goalStorage.39f24f12.js";import{u as Sn}from"./use-quasar.de07dc66.js";var Cn=ka({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const a=M(()=>{const d=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${d.length>0?" "+d:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>i("div",{class:a.value},Ra(t.default))}});const qn=Object.keys(Oa),En=e=>qn.reduce((t,a)=>{const d=e[a];return d!==void 0&&(t[a]=d),t},{});var Fn=ka({name:"QBtnDropdown",props:{...Oa,...Na,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:d}=Tt(),o=c(e.modelValue),m=c(null),k=Ka(),h=M(()=>{const w={"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":k,"aria-label":e.toggleAriaLabel||d.$q.lang.label[o.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(w["aria-disabled"]="true"),w}),L=M(()=>"q-btn-dropdown__arrow"+(o.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),b=M(()=>$a(e)),S=M(()=>En(e));ne(()=>e.modelValue,w=>{m.value!==null&&m.value[w?"show":"hide"]()}),ne(()=>e.split,C);function I(w){o.value=!0,a("beforeShow",w)}function E(w){a("show",w),a("update:modelValue",!0)}function H(w){o.value=!1,a("beforeHide",w)}function Z(w){a("hide",w),a("update:modelValue",!1)}function G(w){a("click",w)}function W(w){za(w),C(),a("click",w)}function $(w){m.value!==null&&m.value.toggle(w)}function F(w){m.value!==null&&m.value.show(w)}function C(w){m.value!==null&&m.value.hide(w)}return Object.assign(d,{show:F,hide:C,toggle:$}),Ot(()=>{e.modelValue===!0&&F()}),()=>{const w=[i(Qa,{class:L.value,name:e.dropdownIcon||d.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&w.push(i(Wa,{ref:m,id:k,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:I,onShow:E,onBeforeHide:H,onHide:Z},t.default)),e.split===!1?i(ft,{class:"q-btn-dropdown q-btn-dropdown--simple",...S.value,...h.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:G},{default:()=>Ra(t.label,[]).concat(w),loading:t.loading}):i(Cn,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...b.value,glossy:e.glossy,stretch:e.stretch},()=>[i(ft,{class:"q-btn-dropdown--current",...S.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:W},{default:t.label,loading:t.loading}),i(ft,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...h.value,...b.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>w)])}}});function Pt(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const d=e.valueOf();if(Object(d)!==d){const o=new e.constructor(d);return t.set(e,o),o}}return t.set(e,a),e instanceof Set?e.forEach(d=>{a.add(Pt(d,t))}):e instanceof Map&&e.forEach((d,o)=>{a.set(o,Pt(d,t))}),Object.assign(a,...Object.keys(e).map(d=>({[d]:Pt(e[d],t)})))}var Tn=ka({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:d}=Tt(),{$q:o}=d,m=c(null),k=c(""),h=c("");let L=!1;const b=M(()=>Ua({initialValue:k.value,validate:e.validate,set:S,cancel:I,updatePosition:E},"value",()=>h.value,w=>{h.value=w}));function S(){e.validate(h.value)!==!1&&(H()===!0&&(a("save",h.value,k.value),a("update:modelValue",h.value)),Z())}function I(){H()===!0&&a("cancel",h.value,k.value),Z()}function E(){Vt(()=>{m.value.updatePosition()})}function H(){return Ga(h.value,k.value)===!1}function Z(){L=!0,m.value.hide()}function G(){L=!1,k.value=Pt(e.modelValue),h.value=Pt(e.modelValue),a("beforeShow")}function W(){a("show")}function $(){L===!1&&H()===!0&&(e.autoSave===!0&&e.validate(h.value)===!0?(a("save",h.value,k.value),a("update:modelValue",h.value)):a("cancel",h.value,k.value)),a("beforeHide")}function F(){a("hide")}function C(){const w=t.default!==void 0?[].concat(t.default(b.value)):[];return e.title&&w.unshift(i("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&w.push(i("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[i(ft,{flat:!0,color:e.color,label:e.labelCancel||o.lang.label.cancel,onClick:I}),i(ft,{flat:!0,color:e.color,label:e.labelSet||o.lang.label.set,onClick:S})])),w}return Object.assign(d,{set:S,cancel:I,show(w){m.value!==null&&m.value.show(w)},hide(w){m.value!==null&&m.value.hide(w)},updatePosition:E}),()=>{if(e.disable!==!0)return i(Wa,{ref:m,class:"q-popup-edit",cover:e.cover,onBeforeShow:G,onShow:W,onBeforeHide:$,onHide:F,onEscapeKey:I},C)}}});function Fa(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Hn=Xa({name:"close-popup",beforeMount(e,{value:t}){const a={depth:Fa(t),handler(d){a.depth!==0&&setTimeout(()=>{const o=Ya(e);o!==void 0&&ja(o,d,a.depth)})},handlerKey(d){Za(d,13)===!0&&a.handler(d)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:t,oldValue:a}){t!==a&&(e.__qclosepopup.depth=Fa(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function Ta(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function Rn(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function On(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function Wn(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function La(e,t,a=0){const d=arguments[3]===void 0?performance.now():arguments[3],o=On(e);if(a<=0){o!==t&&Ta(e,t);return}requestAnimationFrame(m=>{const k=m-d,h=o+(t-o)/Math.max(k,a)*k;Ta(e,h),h!==t&&La(e,t,a-k,m)})}function xa(e,t,a=0){const d=arguments[3]===void 0?performance.now():arguments[3],o=Wn(e);if(a<=0){o!==t&&Rn(e,t);return}requestAnimationFrame(m=>{const k=m-d,h=o+(t-o)/Math.max(k,a)*k;setHorizontalScroll(e,h),h!==t&&xa(e,t,a-k,m)})}const Sa={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},shortIntervalLabel:Boolean,intervalHeight:{type:[Number,String],default:40,validator:Ue},intervalMinutes:{type:[Number,String],default:60,validator:Ue},intervalStart:{type:[Number,String],default:0,validator:Ue},intervalCount:{type:[Number,String],default:24,validator:Ue},intervalStyle:{type:Function,default:null},intervalClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},showIntervalLabel:{type:Function,default:null},hour24Format:Boolean,timeClicksClamped:Boolean,dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)}},Ba={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},modelResources:{type:Array},resourceKey:{type:[String,Number],default:"id"},resourceLabel:{type:[String,Number],default:"label"},resourceHeight:{type:[Number,String],default:0,validator:Ue},resourceMinHeight:{type:[Number,String],default:70,validator:Ue},resourceStyle:{type:Function,default:null},resourceClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)}},An={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},leftColumnOptions:{type:Array},rightColumnOptions:{type:Array},columnOptionsId:{type:String},columnOptionsLabel:{type:String},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)},dayHeight:{type:[Number,String],default:0,validator:Ue},dayMinHeight:{type:[Number,String],default:40,validator:Ue}},Ia={modelResources:{type:Array},resourceKey:{type:[String,Number],default:"id"},resourceLabel:{type:[String,Number],default:"label"},resourceHeight:{type:[Number,String],default:0,validator:Ue},resourceMinHeight:{type:[Number,String],default:70,validator:Ue},resourceStyle:{type:Function,default:null},resourceClass:{type:Function,default:null},cellWidth:{type:[Number,String],default:100},intervalHeaderHeight:{type:[Number,String],default:20,validator:Ue},noSticky:Boolean};function oa(e,{weekdaySkips:t,times:a,scrollArea:d,parsedStart:o,parsedEnd:m,maxDays:k,size:h,headerColumnRef:L}){const b=M(()=>parseInt(e.intervalStart,10)),S=M(()=>parseInt(e.intervalMinutes,10)),I=M(()=>parseInt(e.intervalCount,10)),E=M(()=>parseFloat(e.intervalHeight)),H=M(()=>{let v=0;return e.cellWidth?v=e.cellWidth:h.width>0&&L.value&&(v=L.value.offsetWidth/(e.columnCount>1?e.columnCount:k.value)),v}),Z=M(()=>b.value*S.value),G=M(()=>I.value*E.value),W=M(()=>I.value*H.value),$=M(()=>Ge(o.value)),F=M(()=>He(m.value)),C=M(()=>ba(o.value,m.value,a.today,t.value,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,k.value)),w=M(()=>C.value.map(v=>yn(v,b.value,S.value,I.value,a.now)));function Ge(v){return Aa(v,e.weekdays,a.today)}function He(v){return Ma(v,e.weekdays,a.today)}function De(v,Q){return v&&v.length>0&&v.includes(St(Q))}function oe(v,Q){const V={firstDay:!1,betweenDays:!1,lastDay:!1};if(v&&v.length===2){const J=vt(Q),le=vt(ye(v[0])),ue=vt(ye(v[1]));V.firstDay=le===J,V.lastDay=ue===J,V.betweenDays=le<J&&ue>J}return V}function B(v,Q=[],V=[]){const J=De(Q,v),{firstDay:le,lastDay:ue,betweenDays:Y}=oe(V,v);return{"q-selected":J,"q-range-first":le===!0,"q-range":Y===!0,"q-range-last":ue===!0,"q-disabled-interval disabled":v.disabled===!0}}function z(v,Q=[],V=[]){return[]}const he=M(()=>{const v={timeZone:"UTC",hour12:!e.hour24Format,hour:"2-digit",minute:"2-digit"},Q={timeZone:"UTC",hour12:!e.hour24Format,hour:"numeric",minute:"2-digit"},V={timeZone:"UTC",hour12:!e.hour24Format,hour:"numeric"};return wa(e.locale,(J,le)=>le?J.minute===0?V:Q:v)}),Ke=M(()=>{const v={timeZone:"UTC",dateStyle:"full",timeStyle:"short"};return wa(e.locale,Q=>v)});function Be(v){const Q=w.value[0][0];return!(Q.hour===v.hour&&Q.minute===v.minute)&&v.minute===0}function Oe(v){}function Je(v){}function dt(v,Q,V=!1,J=void 0){let le=ua(Q);const ue=v.currentTarget.getBoundingClientRect(),Y=v,me=v,j=Y.changedTouches||Y.touches,Me=((j&&j[0]?j[0].clientY:me.clientY)-ue.top)/E.value,ke=Math.floor((V?Math.floor(Me):Me)*S.value);return ke!==0&&(le=xe(le,{minute:ke})),J&&ga(le,J,!0),le}function et(v,Q,V=!1,J=void 0){let le=ua(Q);const ue=v.currentTarget.getBoundingClientRect(),Y=v,me=v,j=Y.changedTouches||Y.touches,Me=((j&&j[0]?j[0].clientY:me.clientY)-ue.top)/E.value,ke=Math.floor((V?Math.floor(Me):Me)*S.value);return ke!==0&&(le=xe(le,{minute:ke})),J&&ga(le,J,!0),le}function Xe(v,Q,V=!1,J=void 0){let le=ua(Q);const ue=v.currentTarget.getBoundingClientRect(),Y=v,me=v,j=Y.changedTouches||Y.touches,Me=((j&&j[0]?j[0].clientX:me.clientX)-ue.left)/H.value,ke=Math.floor((V?Math.floor(Me):Me)*S.value);return ke!==0&&(le=xe(le,{minute:ke})),J&&ga(le,J,!0),le}function Ye(v,Q){const V={timestamp:v};return V.timeStartPos=ae,V.timeDurationHeight=Ae,Q!==void 0&&(V.columnIndex=Q),V}function We(v,Q){const V={timestamp:ua(v)};return V.timeStartPosX=ee,V.timeDurationWidth=ge,Q!==void 0&&(V.index=Q),V}function Ce(v,Q=0){const V=ae(v);return V===!1||!d.value?!1:(La(d.value,V,Q),!0)}function Ie(v,Q=0){const V=ee(v);return V===!1||!d.value?!1:(xa(d.value,V,Q),!0)}function Ae(v){return v/S.value*E.value}function ge(v){return v/S.value*H.value}function lt(v){return parseInt(v,10)*S.value/E.value}function ve(v){return parseInt(v,10)*S.value/H.value}function ae(v,Q=!0){const V=Ct(v);if(V===!1)return!1;const J=Z.value,le=I.value*S.value;let Y=(V-J)/le*G.value;return Q&&(Y<0&&(Y=0),Y>G.value&&(Y=G.value)),Y}function ee(v,Q=!0){const V=Ct(v);if(V===!1)return!1;const J=Z.value,le=I.value*S.value;let Y=(V-J)/le*W.value;return Q&&(Y<0&&(Y=0),Y>W.value&&(Y=W.value)),Y}return{parsedIntervalStart:b,parsedIntervalMinutes:S,parsedIntervalCount:I,parsedIntervalHeight:E,parsedCellWidth:H,parsedStartMinute:Z,bodyHeight:G,bodyWidth:W,parsedWeekStart:$,parsedWeekEnd:F,days:C,intervals:w,intervalFormatter:he,ariaDateTimeFormatter:Ke,arrayHasDateTime:De,checkIntervals:oe,getIntervalClasses:B,getResourceClasses:z,showIntervalLabelDefault:Be,showResourceLabelDefault:Oe,styleDefault:Je,getTimestampAtEventInterval:dt,getTimestampAtEvent:et,getTimestampAtEventX:Xe,getScopeForSlot:Ye,getScopeForSlotX:We,scrollToTime:Ce,scrollToTimeX:Ie,timeDurationHeight:Ae,timeDurationWidth:ge,heightToMinutes:lt,widthToMinutes:ve,timeStartPos:ae,timeStartPosX:ee}}const sa={columnCount:{type:[Number,String],default:0,validator:Ue},columnIndexStart:{type:[Number,String],default:0,validator:Ue}},aa={maxDays:{type:Number,default:1}},na={cellWidth:[Number,String]};function ca(e){return{isSticky:M(()=>e.cellWidth!==void 0)}}var Mn=Ht({name:"QCalendarAgenda",directives:[Dt],props:{...At,...An,...sa,...aa,...Mt,...na,...Lt},emits:["update:model-value",...Qt,...zt,...we("-date"),...we("-head-day"),...we("-time")],setup(e,{slots:t,emit:a,expose:d}){const o=c(null),m=c(null),k=c(null),h=c(null),L=c(null),b=c({}),S=c({}),I=c({}),E=c("next"),H=c(it()),Z=c("0000-00-00"),G=c(0),W=c(e.modelValue),$=Nt({width:0,height:0}),F=c(!1),C=c(null),w=c(null);ne(()=>e.view,()=>{G.value=0});const Ge=M(()=>e.view==="month"?"month-interval":e.view),He=Tt();if(He===null)throw new Error("current instance is null");const{emitListeners:De}=Ut(He),{isSticky:oe}=ca(e);ne(oe,r=>{});const{times:B,setCurrent:z,updateCurrent:he}=Gt(e);he(),z();const{weekdaySkips:Ke,parsedStart:Be,parsedEnd:Oe,dayFormatter:Je,weekdayFormatter:dt,ariaDateFormatter:et,dayStyleDefault:Xe,getRelativeClasses:Ye}=Xt(e,{startDate:H,endDate:Z,times:B}),We=M(()=>ht(e.modelValue,B.now)||Be.value||B.today);L.value=We.value,h.value=We.value.date;const{renderValues:Ce}=Yt(e,{parsedView:Ge,parsedValue:We,times:B}),{rootRef:Ie,scrollWidth:Ae,__initCalendar:ge,__renderCalendar:lt}=jt(e,Re,{scrollArea:o,pane:m}),{days:ve,parsedCellWidth:ae,getScopeForSlot:ee}=oa(e,{weekdaySkips:Ke,times:B,scrollArea:o,parsedStart:Be,parsedEnd:Oe,maxDays:G,size:$,headerColumnRef:k}),{move:v}=Jt(e,{parsedView:Ge,parsedValue:We,weekdaySkips:Ke,direction:E,maxDays:G,times:B,emittedValue:W,emit:a}),{getDefaultMouseEventHandlers:Q}=ea(a,De),{checkChange:V}=pt(a,{days:ve,lastStart:C,lastEnd:w}),{isKeyCode:J}=ta(),{tryFocus:le}=Zt(e,{rootRef:Ie,focusRef:h,focusValue:L,datesRef:b,days:ve,parsedView:Ge,parsedValue:We,emittedValue:W,weekdaySkips:Ke,direction:E,times:B}),ue=M(()=>ve.value.length+(Y.value===!0?e.leftColumnOptions.length:0)+(me.value===!0?e.rightColumnOptions.length:0)+ve.value.length===1&&parseInt(e.columnCount,10)>0?parseInt(e.columnCount,10):0),Y=M(()=>e.leftColumnOptions!==void 0&&Array.isArray(e.leftColumnOptions)),me=M(()=>e.rightColumnOptions!==void 0&&Array.isArray(e.rightColumnOptions)),j=M(()=>{if(Ie.value){const r=$.width||Ie.value.getBoundingClientRect().width;if(r&&ue.value)return(r-Ae.value)/ue.value+"px"}return 100/ue.value+"%"});ne([ve],V,{deep:!0,immediate:!0}),ne(()=>e.modelValue,(r,y)=>{if(W.value!==r){if(e.animated===!0){const l=Se(ye(r)),f=Se(ye(y));E.value=l>=f?"next":"prev"}W.value=r}h.value=r}),ne(W,(r,y)=>{if(W.value!==e.modelValue){if(e.animated===!0){const l=Se(ye(r)),f=Se(ye(y));E.value=l>=f?"next":"prev"}a("update:model-value",r)}}),ne(h,r=>{r&&(L.value=ht(r))}),ne(L,r=>{b.value[h.value]?b.value[h.value].focus():le()}),ne(()=>e.maxDays,r=>{G.value=r}),Kt(()=>{b.value={}}),Ot(()=>{ge()});function $e(){W.value=it()}function Me(r=1){v(r)}function ke(r=1){v(-r)}function tt({width:r,height:y}){$.width=r,$.height=y}function Pe(r){return r.date===W.value}function qe(r,y){const l=t["head-column"],f={column:r,index:y,days:ve.value},_=oe.value===!0?e.cellWidth:j.value,s=e.focusable===!0&&e.focusType.includes("weekday"),q=e.columnOptionsId!==void 0?r[e.columnOptionsId]:void 0,K={maxWidth:_,width:_};return i("div",{key:q,tabindex:s===!0?0:-1,class:{"q-calendar-agenda__head--day":!0,"q-column-day":!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:K,onDragenter:n=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(n,"head-column",f)===!0?F.value=q:F.value="")},onDragover:n=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(n,"head-column",f)===!0?F.value=q:F.value="")},onDragleave:n=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(n,"head-column",f)===!0?F.value=q:F.value="")},onDrop:n=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(n,"head-column",f)===!0?F.value=q:F.value="")},...Q("-head-column",(n,g)=>({scope:{column:r,index:y},event:n}))},[e.noDefaultHeaderText!==!0&&_t(r),l&&l(f),nt()])}function _t(r){const y=t["head-column-label"],l={column:r},f=e.columnOptionsLabel!==void 0?r[e.columnOptionsLabel]:r.label,_=i("div",{class:{"q-calendar-agenda__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,ellipsis:!0},style:{alignSelf:"center"}},[y&&y({scope:l}),!y&&i("span",{class:"ellipsis"},f)]);return e.dateHeader==="stacked"?_:i("div",{class:"q-calendar__header--inline",style:{height:"100%"}},[_])}function Qe(){return i("div",{roll:"presentation",class:{"q-calendar-agenda__head":!0,"q-calendar__sticky":oe.value===!0},style:{marginRight:Ae.value+"px"}},[mt()])}function mt(){return i("div",{ref:k,class:{"q-calendar-agenda__head--days__column":!0}},[ot(),rt()])}function ot(){return i("div",{class:{"q-calendar-agenda__head--days__weekdays":!0}},[...st()])}function rt(){const r=t["head-days-events"];return Vt(()=>{if(I.value&&e.columnCount===0&&window)try{const y=window.getComputedStyle(I.value);S.value.parentElement.style.height=y.height,S.value.style.height=y.height}catch{}}),i("div",{class:{"q-calendar-agenda__head--days__event":!0}},[r&&i("div",{ref:S,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[r({scope:{days:ve.value,ref:I}})]),...yt()])}function st(){return ve.value.length===1&&parseInt(e.columnCount,10)>0?[Y.value===!0&&e.leftColumnOptions.map((r,y)=>qe(r,y)),Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>gt(ve.value[0],r)),me.value===!0&&e.rightColumnOptions.map((r,y)=>qe(r,y))]:[Y.value===!0&&e.leftColumnOptions.map((r,y)=>qe(r,y)),ve.value.map(r=>gt(r)),me.value===!0&&e.rightColumnOptions.map((r,y)=>qe(r,y))]}function yt(){return ve.value.length===1&&parseInt(e.columnCount,10)>0?[Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>ut(ve.value[0],r))]:ve.value.map(r=>ut(r))}function gt(r,y){const l=t["head-day"],f=t["head-date"],_=e.noActiveDate!==!0&&Pe(r),s=ee(r,y);s.activeDate=_,s.droppable=F.value===r.date,s.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1;const q=oe.value===!0?e.cellWidth:j.value,K=e.weekdayStyle||Xe,n={width:q,maxWidth:q,...K({scope:s})};oe.value===!0&&(n.minWidth=q);const g=typeof e.weekdayClass=="function"?e.weekdayClass({scope:s}):{},T=e.focusable===!0&&e.focusType.includes("weekday"),O={key:r.date+(y!==void 0?"-"+y:""),ref:P=>{b.value[r.date]=P},tabindex:T===!0?0:-1,class:{"q-calendar-agenda__head--day":!0,...g,...Ye(r),"q-active-date":_,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":T===!0},style:n,onDragenter:P=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(P,"head-day",s)===!0?F.value=r.date:F.value="")},onDragover:P=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(P,"head-day",s)===!0?F.value=r.date:F.value="")},onDragleave:P=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(P,"head-day",s)===!0?F.value=r.date:F.value="")},onDrop:P=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(P,"head-day",s)===!0?F.value=r.date:F.value="")},onFocus:P=>{T===!0&&(h.value=r.date)},...Q("-head-day",P=>({scope:s,event:P}))};return i("div",O,[l!==void 0&&l({scope:s}),l===void 0&&bt(r),l===void 0&&f&&f({scope:s}),nt()])}function bt(r){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Ee(r)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Ee(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Ee(r)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Ee(r)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Ee(r),e.noDefaultHeaderText!==!0&&ze(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Ee(r),e.noDefaultHeaderText!==!0&&ze(r)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Ee(r),e.noDefaultHeaderText!==!0&&ze(r)])}function ut(r,y){const l=t["head-day-event"],f=e.noActiveDate!==!0&&Pe(r),_=ee(r,y);_.activeDate=f,_.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1;const s=oe.value===!0?e.cellWidth:j.value,q={width:s,maxWidth:s};return oe.value===!0&&(q.minWidth=s),i("div",{key:"event-"+r.date+(y!==void 0?"-"+y:""),class:{"q-calendar-agenda__head--day__event":!0,...Ye(r),"q-active-date":f},style:q},[l&&l({scope:_})])}function ze(r){const y=t["head-weekday-label"],l=ee(r);l.shortWeekdayLabel=e.shortWeekdayLabel;const f={class:{"q-calendar-agenda__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return i("div",f,y&&y({scope:l})||ct(r,e.shortWeekdayLabel))}function ct(r,y){const l=dt.value(r,y||e.weekdayBreakpoints[0]>0&&ae.value<=e.weekdayBreakpoints[0]);return i("span",{class:"q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&ae.value<=e.weekdayBreakpoints[1]?ia(l,e.minWeekdayLabel):l)}function Ee(r){const y={class:{"q-calendar-agenda__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return i("div",y,wt(r))}function wt(r){const y=e.noActiveDate!==!0&&Pe(r),l=Je.value(r,!1),f=t["head-day-label"],_=t["head-day-button"],s={dayLabel:l,timestamp:r,activeDate:y,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1},q={class:{"q-calendar-agenda__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":r.current===!0,"q-calendar__focusable":!0},disabled:r.disabled,onKeydown:K=>{r.disabled!==!0&&J(K,[13,32])&&(K.stopPropagation(),K.preventDefault())},onKeyup:K=>{r.disabled!==!0&&J(K,[13,32])&&(W.value=r.date,De.value.onClickDate!==void 0&&a("click-date",{scope:s}))},...Q("-date",(K,n)=>((n==="click-date"||n==="contextmenu-date")&&(W.value=r.date,n==="click-date"&&K.preventDefault()),{scope:s,event:K}))};return e.noAria!==!0&&(q.ariaLabel=et.value(r)),_?_({scope:s}):da(e,q,f?f({scope:s}):l)}function je(){return i("div",{class:"q-calendar-agenda__body"},[D()])}function D(){return oe.value===!0?i("div",{ref:o,class:{"q-calendar-agenda__scroll-area":!0,"q-calendar__scroll":!0}},[te()]):e.noScroll===!0?p():i("div",{ref:o,class:{"q-calendar-agenda__scroll-area":!0,"q-calendar__scroll":!0}},[p()])}function p(){return i("div",{ref:m,class:"q-calendar-agenda__pane"},[te()])}function te(){const r=t["day-container"];return i("div",{class:"q-calendar-agenda__day-container"},[oe.value===!0&&e.noHeader!==!0&&Qe(),i("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},[...re()]),r&&r({scope:{days:ve.value}})])}function re(){return ve.value.length===1&&parseInt(e.columnCount,10)>0?[Y.value===!0&&e.leftColumnOptions.map((r,y)=>ce(r,y)),Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>se(ve.value[0],0,r)),me.value===!0&&e.rightColumnOptions.map((r,y)=>ce(r,y))]:[Y.value===!0&&e.leftColumnOptions.map((r,y)=>ce(r,y)),ve.value.map((r,y)=>se(r)),me.value===!0&&e.rightColumnOptions.map((r,y)=>ce(r,y))]}function ce(r,y){const l=t.column,f={column:r,days:ve.value,index:y},_=oe.value===!0?e.cellWidth:j.value,s=e.focusable===!0&&e.focusType.includes("day"),q=e.columnOptionsId!==void 0?r[e.columnOptionsId]:void 0;return i("div",{key:q,tabindex:s===!0?0:-1,class:{"q-calendar-agenda__day":!0,"q-column-day":!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:{maxWidth:_,width:_},onDragenter:K=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(K,"column",f)===!0?F.value=q:F.value="")},onDragover:K=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(K,"column",f)===!0?F.value=q:F.value="")},onDragleave:K=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(K,"column",f)===!0?F.value=q:F.value="")},onDrop:K=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(K,"column",f)===!0?F.value=q:F.value="")},...Q("-column",(K,n)=>({scope:f,event:K}))},[l&&l({scope:f})])}function se(r,y,l){const f=t.day,_=ee(r,l),s=oe.value===!0?e.cellWidth:j.value,q={width:s,maxWidth:s};return oe.value===!0&&(q.minWidth=s),q.height=parseInt(e.dayHeight,10)>0?de(parseInt(e.dayHeight,10)):"auto",parseInt(e.dayMinHeight,10)>0&&(q.minHeight=de(parseInt(e.dayMinHeight,10))),i("div",{key:r.date+(l!==void 0?":"+l:""),class:{"q-calendar-agenda__day":!0,...Ye(r)},style:q},[f&&f({scope:_})])}function Re(){const{start:r,end:y,maxDays:l}=Ce.value;(H.value!==r.date||Z.value!==y.date||G.value!==l)&&(H.value=r.date,Z.value=y.date,G.value=l);const f=$.width>0,_=Wt(i("div",{class:"q-calendar-agenda",key:H.value},[f===!0&&oe.value!==!0&&e.noHeader!==!0&&Qe(),f===!0&&je()]),[[Dt,tt]]);if(e.animated===!0){const s="q-calendar--"+(E.value==="prev"?e.transitionPrev:e.transitionNext);return i($t,{name:s,appear:!0},()=>_)}return _}return d({prev:ke,next:Me,move:v,moveToToday:$e,updateCurrent:he}),()=>lt()}}),Da=Ht({name:"QCalendarDay",directives:[Dt],props:{...At,...Sa,...sa,...aa,...Mt,...na,...Lt},emits:["update:model-value",...Qt,...zt,...we("-date"),...we("-interval"),...we("-head-intervals"),...we("-head-day"),...we("-time")],setup(e,{slots:t,emit:a,expose:d}){const o=c(null),m=c(null),k=c(null),h=c(null),L=c(null),b=c({}),S=c({}),I=c({}),E=c("next"),H=c(e.modelValue||it()),Z=c("0000-00-00"),G=c(0),W=c(e.modelValue),$=Nt({width:0,height:0}),F=c(!1),C=c(!1),w=c(null),Ge=c(null);ne(()=>e.view,()=>{G.value=0});const He=M(()=>e.view==="month"?"month-interval":e.view),De=Tt();if(De===null)throw new Error("current instance is null");const{emitListeners:oe}=Ut(De),{isSticky:B}=ca(e),{times:z,setCurrent:he,updateCurrent:Ke}=Gt(e);Ke(),he();const{weekdaySkips:Be,parsedStart:Oe,parsedEnd:Je,dayFormatter:dt,weekdayFormatter:et,ariaDateFormatter:Xe,dayStyleDefault:Ye,getRelativeClasses:We}=Xt(e,{startDate:H,endDate:Z,times:z}),Ce=M(()=>ht(e.modelValue,z.now)||Oe.value||z.today);L.value=Ce.value,h.value=Ce.value.date;const{renderValues:Ie}=Yt(e,{parsedView:He,parsedValue:Ce,times:z}),{rootRef:Ae,scrollWidth:ge,__initCalendar:lt,__renderCalendar:ve}=jt(e,pe,{scrollArea:o,pane:m}),{days:ae,intervals:ee,intervalFormatter:v,ariaDateTimeFormatter:Q,parsedCellWidth:V,getIntervalClasses:J,showIntervalLabelDefault:le,styleDefault:ue,getTimestampAtEventInterval:Y,getTimestampAtEvent:me,getScopeForSlot:j,scrollToTime:$e,heightToMinutes:Me,timeDurationHeight:ke,timeStartPos:tt}=oa(e,{weekdaySkips:Be,times:z,scrollArea:o,parsedStart:Oe,parsedEnd:Je,maxDays:G,size:$,headerColumnRef:k}),{move:Pe}=Jt(e,{parsedView:He,parsedValue:Ce,weekdaySkips:Be,direction:E,maxDays:G,times:z,emittedValue:W,emit:a}),{getDefaultMouseEventHandlers:qe}=ea(a,oe),{checkChange:_t}=pt(a,{days:ae,lastStart:w,lastEnd:Ge}),{isKeyCode:Qe}=ta(),{tryFocus:mt}=Zt(e,{rootRef:Ae,focusRef:h,focusValue:L,datesRef:b,days:ae,parsedView:He,parsedValue:Ce,emittedValue:W,weekdaySkips:Be,direction:E,times:z}),ot=M(()=>He.value==="day"&&parseInt(e.columnCount,10)>1?parseInt(e.columnCount,10):He.value==="day"&&e.maxDays&&e.maxDays>1?e.maxDays:ae.value.length),rt=M(()=>Ae.value?parseInt(getComputedStyle(Ae.value).getPropertyValue("--calendar-intervals-width"),10):0),st=M(()=>{if(Ae.value){const u=$.width||Ae.value.getBoundingClientRect().width;if(u&&rt.value&&ot.value)return(u-ge.value-rt.value)/ot.value+"px"}return 100/ot.value+"%"});ne([ae],_t,{deep:!0,immediate:!0}),ne(()=>e.modelValue,(u,R)=>{if(W.value!==e.modelValue){if(e.animated===!0){const x=Se(ye(u)),N=Se(ye(R));E.value=x>=N?"next":"prev"}W.value=u}h.value=u}),ne(W,(u,R)=>{if(W.value!==e.modelValue){if(e.animated===!0){const x=Se(ye(u)),N=Se(ye(R));E.value=x>=N?"next":"prev"}a("update:model-value",u)}}),ne(h,u=>{u&&(L.value=ht(u))}),ne(L,u=>{b.value[h.value]?b.value[h.value].focus():mt()}),ne(()=>e.maxDays,u=>{G.value=u}),Kt(()=>{b.value={},S.value={},I.value={}}),Ot(()=>{lt()});function yt(){W.value=it()}function gt(u=1){Pe(u)}function bt(u=1){Pe(-u)}function ut({width:u,height:R}){$.width=u,$.height=R}function ze(u){return u.date===W.value}function ct(){return i("div",{roll:"presentation",class:{"q-calendar-day__head":!0,"q-calendar__sticky":B.value===!0},style:{marginRight:ge.value+"px"}},[Ee(),wt()])}function Ee(){const u=t["head-intervals"],R={timestamps:ae.value,days:ae.value,date:e.modelValue};return i("div",{class:{"q-calendar-day__head--intervals":!0,"q-calendar__sticky":B.value===!0},...qe("-head-intervals",x=>({scope:R,event:x}))},[u&&u({scope:R})])}function wt(){return i("div",{ref:k,class:{"q-calendar-day__head--days__column":!0}},[je(),D()])}function je(){return i("div",{class:{"q-calendar-day__head--days__weekdays":!0}},[...p()])}function D(){const u=t["head-days-events"];return Vt(()=>{if(I.value&&parseInt(e.columnCount,10)===0&&window)try{const R=window.getComputedStyle(I.value);S.value.parentElement.style.height=R.height,S.value.style.height=R.height}catch{}}),i("div",{class:{"q-calendar-day__head--days__event":!0}},[u&&i("div",{ref:S,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[u({scope:{days:ae.value,ref:I}})]),...te()])}function p(){return ae.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,R)=>R+parseInt(e.columnIndexStart,10)).map(u=>re(ae.value[0],u)):ae.value.map(u=>re(u))}function te(){return ae.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,R)=>R+parseInt(e.columnIndexStart,10)).map(u=>se(ae.value[0],u)):ae.value.map(u=>se(u))}function re(u,R){const x=t["head-day"],N=t["head-date"],U=e.noActiveDate!==!0&&ze(u),X=j(u,R);X.activeDate=U,X.droppable=F.value===u.date,X.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const Fe=B.value===!0?e.cellWidth:st.value,fe=e.weekdayStyle||Ye,qt={width:Fe,maxWidth:Fe,minWidth:Fe,...fe({scope:X})};B.value===!0&&(qt.minWidth=Fe);const la=typeof e.weekdayClass=="function"?e.weekdayClass({scope:X}):{},xt=e.focusable===!0&&e.focusType.includes("weekday"),Te=u.date+(R!==void 0?"-"+R:""),Bt={key:Te,ref:Ve=>{b.value[Te]=Ve},tabindex:xt===!0?0:-1,class:{"q-calendar-day__head--day":!0,...la,...We(u),"q-active-date":U,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":xt===!0},style:qt,onFocus:Ve=>{xt===!0&&(h.value=Te)},onKeydown:Ve=>{u.disabled!==!0&&Qe(Ve,[13,32])&&(Ve.stopPropagation(),Ve.preventDefault())},onKeyup:Ve=>{u.disabled!==!0&&Qe(Ve,[13,32])&&(W.value=u.date)},...qe("-head-day",Ve=>({scope:X,event:Ve})),onDragenter:Ve=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(Ve,"head-day",X)===!0?F.value=u.date:F.value="")},onDragover:Ve=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(Ve,"head-day",X)===!0?F.value=u.date:F.value="")},onDragleave:Ve=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(Ve,"head-day",X)===!0?F.value=u.date:F.value="")},onDrop:Ve=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(Ve,"head-day",X)===!0?F.value=u.date:F.value="")}};return i("div",Bt,[x!==void 0&&x({scope:X}),x===void 0&&f(u,R),x===void 0&&ce(u),x===void 0&&N&&N({scope:X}),x===void 0&&_(u,R),nt()])}function ce(u){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&Re(u),e.noDefaultHeaderBtn!==!0&&y(u)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Re(u),e.noDefaultHeaderBtn!==!0&&y(u)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Re(u),e.noDefaultHeaderBtn!==!0&&y(u)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Re(u),e.noDefaultHeaderBtn!==!0&&y(u)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Re(u)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Re(u)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Re(u)])}function se(u,R){const x=t["head-day-event"],N=e.noActiveDate!==!0&&ze(u),U=j(u,R);U.activeDate=N,U.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const X=B.value===!0?de(V.value):st.value,Fe={width:X,maxWidth:X,minWidth:X};return B.value===!0&&(Fe.minWidth=X),i("div",{key:"event-"+u.date+(R!==void 0?"-"+R:""),class:{"q-calendar-day__head--day__event":!0,...We(u),"q-active-date":N},style:Fe},[x&&x({scope:U})])}function Re(u){const R=t["head-weekday-label"],x=e.shortWeekdayLabel===!0,N=j(u);N.shortWeekdayLabel=e.shortWeekdayLabel,N.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const U={class:{"q-calendar-day__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return i("div",U,R&&R({scope:N})||r(u,x))}function r(u,R){const x=et.value(u,R||e.weekdayBreakpoints[0]>0&&V.value<=e.weekdayBreakpoints[0]);return i("span",{class:"q-calendar-day__head--weekday-label q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&V.value<=e.weekdayBreakpoints[1]?ia(x,e.minWeekdayLabel):x)}function y(u){const R={class:{"q-calendar-day__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return i("div",R,l(u))}function l(u){const R=e.noActiveDate!==!0&&ze(u),x=dt.value(u,!1),N=t["head-day-label"],U=t["head-day-button"],X={dayLabel:x,timestamp:u,activeDate:R,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1},Fe={class:{"q-calendar-day__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":u.current===!0,"q-calendar__focusable":!0},disabled:u.disabled,onKeydown:fe=>{u.disabled!==!0&&Qe(fe,[13,32])&&(fe.stopPropagation(),fe.preventDefault())},onKeyup:fe=>{u.disabled!==!0&&Qe(fe,[13,32])&&(W.value=u.date,oe.value.onClickDate!==void 0&&a("click-date",{scope:X}))},...qe("-date",(fe,qt)=>((qt==="click-date"||qt==="contextmenu-date")&&(W.value=u.date,qt==="click-date"&&fe.preventDefault()),{scope:X,event:fe}))};return e.noAria!==!0&&(Fe.ariaLabel=Xe.value(u)),U?U({scope:X}):da(e,Fe,N?N({scope:X}):x)}function f(u,R){const x=t["column-header-before"];if(x)return i("div",{class:"q-calendar-day__column-header--before"},[x({scope:{timestamp:u,columnIndex:R}})])}function _(u,R){const x=t["column-header-after"];if(x)return i("div",{class:"q-calendar-day__column-header--after"},[x({scope:{timestamp:u,columnIndex:R}})])}function s(){return i("div",{class:"q-calendar-day__body"},[q()])}function q(){return B.value===!0?i("div",{ref:o,class:{"q-calendar-day__scroll-area":!0,"q-calendar__scroll":!0}},[B.value!==!0&&A(),n()]):e.noScroll===!0?K():i("div",{ref:o,class:{"q-calendar-day__scroll-area":!0,"q-calendar__scroll":!0}},[K()])}function K(){return i("div",{ref:m,class:"q-calendar-day__pane"},[A(),n()])}function n(){const u=t["day-container"];return i("div",{class:"q-calendar-day__day-container"},[B.value===!0&&e.noHeader!==!0&&ct(),i("div",{style:{display:"flex",flexDirection:"row"}},[B.value===!0&&A(),...g()]),u&&u({scope:{days:ae.value}})])}function g(){return ae.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,R)=>R+parseInt(e.columnIndexStart,10)).map(u=>T(ae.value[0],0,u)):ae.value.map((u,R)=>T(u,R))}function T(u,R,x){const N=t["day-body"],U=j(u,x),X=B.value===!0?e.cellWidth:st.value,Fe={width:X,maxWidth:X,minWidth:X};return B.value===!0&&(Fe.minWidth=X),i("div",{key:u.date+(x!==void 0?":"+x:""),class:{"q-calendar-day__day":!0,...We(u)},style:Fe},[...O(R,x),N&&N({scope:U})])}function O(u,R){return ee.value[u].map(x=>P(x,R))}function P(u,R){const x=de(e.intervalHeight),N=e.intervalStyle||ue,U=t["day-interval"],X=j(u,R);X.droppable=C.value===vt(u);const Fe=typeof e.intervalClass=="function"?e.intervalClass({scope:X}):{},fe=e.focusable===!0&&e.focusType.includes("interval"),la={key:St(u),tabindex:fe===!0?0:-1,class:{"q-calendar-day__day-interval":u.minute===0,"q-calendar-day__day-interval--section":u.minute!==0,...Fe,...J(u,e.selectedDates,e.selectedStartEndDates),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":fe===!0},style:{height:x,...N({scope:X})},onDragenter:Te=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(Te,"interval",X)===!0?C.value=vt(u):C.value="")},onDragover:Te=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(Te,"interval",X)===!0?C.value=vt(u):C.value="")},onDragleave:Te=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(Te,"interval",X)===!0?C.value=vt(u):C.value="")},onDrop:Te=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(Te,"interval",X)===!0?C.value=vt(u):C.value="")},onKeydown:Te=>{Qe(Te,[13,32])&&(Te.stopPropagation(),Te.preventDefault())},onKeyup:Te=>{if(Qe(Te,[13,32])){const Bt=j(u,R);W.value=Bt.timestamp.date,oe.value.onClickTime!==void 0&&a("click-time",{scope:Bt,event:Te})}},...qe("-time",Te=>({scope:j(Y(Te,u,e.timeClicksClamped,z.now),R),event:Te}))};e.noAria!==!0&&(la.ariaLabel=Q.value(u));const xt=U?U({scope:X}):void 0;return i("div",la,[xt,nt()])}function A(){const u={ariaHidden:"true",class:{"q-calendar-day__intervals-column":!0,"q-calendar__ellipsis":!0,"q-calendar__sticky":B.value===!0},...qe("-interval",R=>({scope:{timestamp:me(R,Oe.value,e.timeClicksClamped,z.now)},event:R}))};return i("div",u,be())}function be(){return ee.value[0].map(u=>ie(u))}function ie(u){const R=t["interval-label"],x=de(e.intervalHeight),N=e.shortIntervalLabel,Fe=(e.showIntervalLabel||le)(u)?v.value(u,N):void 0;return i("div",{key:u.time,class:{"q-calendar-day__interval":u.minute===0,"q-calendar-day__interval--section":u.minute!==0},style:{height:x}},[i("div",{class:"q-calendar-day__interval--text q-calendar__overflow-wrap"},[R?R({scope:{timestamp:u,label:Fe}}):Fe])])}function pe(){const{start:u,end:R,maxDays:x}=Ie.value;(H.value!==u.date||Z.value!==R.date||G.value!==x)&&(H.value=u.date,Z.value=R.date,G.value=x);const N=$.width>0,U=Wt(i("div",{key:H.value,class:"q-calendar-day"},[N===!0&&B.value!==!0&&e.noHeader!==!0&&ct(),N&&s()]),[[Dt,ut]]);if(e.animated===!0){const X="q-calendar--"+(E.value==="prev"?e.transitionPrev:e.transitionNext);return i($t,{name:X,appear:!0},()=>U)}return U}return d({prev:bt,next:gt,move:Pe,moveToToday:yt,updateCurrent:Ke,timeStartPos:tt,timeDurationHeight:ke,heightToMinutes:Me,scrollToTime:$e}),()=>ve()}});const Pa={dayHeight:{type:[Number,String],default:0,validator:Ue},dayMinHeight:{type:[Number,String],default:0,validator:Ue},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayPadding:String,minWeeks:{type:[Number,String],validator:Ue,default:1},shortMonthLabel:Boolean,showWorkWeeks:Boolean,showMonthLabel:{type:Boolean,default:!0},showDayOfYearLabel:Boolean,enableOutsideDays:Boolean,noOutsideDays:Boolean,hover:Boolean,miniMode:{type:[Boolean,String],validator:e=>[!0,!1,"auto"].includes(e)},breakpoint:{type:[Number,String],default:"md",validator:e=>["xs","sm","md","lg","xl"].includes(e)||Ue(e)},monthLabelSize:{type:String,default:"sm",validator:e=>["xxs","xs","sm","md","lg","xl","xxl"].includes(e)||!!e&&e.length>0}};function Ln(e,t,{weekdaySkips:a,times:d,parsedStart:o,parsedEnd:m,size:k,headerColumnRef:h}){const L=M(()=>parseInt(e.minWeeks,10)),b=M(()=>L.value*e.weekdays.length),S=M(()=>w(He(o.value))),I=M(()=>Ge(De(m.value))),E=M(()=>{let B=0;return e.cellWidth?B=e.cellWidth:k.width>0&&h.value&&(B=h.value.offsetWidth/e.weekdays.length),B}),H=M(()=>ba(S.value,I.value,d.today,a.value,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,Number.MAX_SAFE_INTEGER,b.value)),Z=M(()=>{const B=d.today,z=w(B),he=Ge(B);return ba(z,he,B,a,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,e.weekdays.length,e.weekdays.length)}),G=M(()=>{const B={timeZone:"UTC",month:"long"},z={timeZone:"UTC",month:"short"};return wa(e.locale,(he,Ke)=>Ke?z:B)}),W=M(()=>{switch(e.breakpoint){case"xs":return 300;case"sm":return 350;case"md":return 400;case"lg":return 450;case"xl":return 500;default:return parseInt(e.breakpoint,10)}}),$=M(()=>{switch(e.monthLabelSize){case"xxs":return".4em";case"xs":return".6em";case"sm":return".8em";case"md":return"1.0em";case"lg":return"1.2em";case"xl":return"1.4em";case"xxl":return"1.6em";default:return e.monthLabelSize}});let F=!0;const C=M(()=>{const B=e.miniMode===!0||e.miniMode==="auto"&&e.breakpoint!==void 0&&k.width<W.value;return F===!0&&(F=!1,t("mini-mode",B)),B});ne(C,B=>{t("mini-mode",B)});function w(B){return Aa(B,e.weekdays,d.today)}function Ge(B){return Ma(B,e.weekdays,d.today)}function He(B){return gn(B)}function De(B){return _n(B)}function oe(B){const z=Se(B);return z<Se(o.value)||z>Se(m.value)}return{parsedCellWidth:E,parsedMinWeeks:L,parsedMinDays:b,parsedMonthStart:S,parsedMonthEnd:I,parsedBreakpoint:W,parsedMonthLabelSize:$,days:H,todayWeek:Z,isMiniMode:C,monthFormatter:G,isOutside:oe}}var xn=Ht({name:"QCalendarMonth",directives:[Dt],props:{...At,...Pa,...Mt,...na,...Lt},emits:["update:model-value",...Qt,...zt,"mini-mode",...we("-date"),...we("-day"),...we("-head-workweek"),...we("-head-day"),...we("-workweek")],setup(e,{slots:t,emit:a,expose:d}){const o=c(null),m=c(null),k=c(null),h=c(null),L=c(null),b=c({}),S=c([]),I=c([]),E=c("next"),H=c(e.modelValue||it()),Z=c("0000-00-00"),G=c(0),W=c(e.modelValue),$=Nt({width:0,height:0}),F=c(!1),C=c(!1),w=c(null),Ge=c(null),He=M(()=>"month"),De=Tt();if(De===null)throw new Error("current instance is null");const{emitListeners:oe}=Ut(De),{isSticky:B}=ca(e);ne(B,l=>{});const{times:z,setCurrent:he,updateCurrent:Ke}=Gt(e);Ke(),he();const{weekdaySkips:Be,parsedStart:Oe,parsedEnd:Je,dayFormatter:dt,weekdayFormatter:et,ariaDateFormatter:Xe,dayStyleDefault:Ye,getRelativeClasses:We}=Xt(e,{startDate:H,endDate:Z,times:z}),Ce=M(()=>ht(e.modelValue,z.now)||Oe.value||z.today);L.value=Ce.value,h.value=Ce.value.date;const Ie=M(()=>{const l={};return e.dayPadding!==void 0&&(l.padding=e.dayPadding),l.minWidth=tt.value,l.maxWidth=tt.value,l.width=tt.value,l}),{renderValues:Ae}=Yt(e,{parsedView:He,times:z,parsedValue:Ce}),{rootRef:ge,__initCalendar:lt,__renderCalendar:ve}=jt(e,y,{scrollArea:o,pane:m}),{days:ae,todayWeek:ee,isMiniMode:v,parsedCellWidth:Q,parsedMonthLabelSize:V,isOutside:J,monthFormatter:le}=Ln(e,a,{weekdaySkips:Be,times:z,parsedStart:Oe,parsedEnd:Je,size:$,headerColumnRef:k}),{move:ue}=Jt(e,{parsedView:He,parsedValue:Ce,weekdaySkips:Be,direction:E,maxDays:G,times:z,emittedValue:W,emit:a}),{getDefaultMouseEventHandlers:Y}=ea(a,oe),{checkChange:me}=pt(a,{days:ae,lastStart:w,lastEnd:Ge}),{isKeyCode:j}=ta(),{tryFocus:$e}=Zt(e,{rootRef:ge,focusRef:h,focusValue:L,datesRef:b,days:ae,parsedView:He,parsedValue:Ce,emittedValue:W,weekdaySkips:Be,direction:E,times:z}),Me=M(()=>ge.value&&e.showWorkWeeks===!0?parseInt(getComputedStyle(ge.value).getPropertyValue(v.value===!0?"--calendar-mini-work-week-width":"--calendar-work-week-width"),10):0),ke=M(()=>e.weekdays.length),tt=M(()=>{if(ge.value){const l=$.width||ge.value.getBoundingClientRect().width;if(l&&ke.value)return(l-Me.value)/ke.value+"px"}return 100/ke.value+"%"}),Pe=M(()=>e.focusable===!0&&e.focusType.includes("day")&&v.value!==!0),qe=M(()=>e.focusable===!0&&e.focusType.includes("date")&&Pe.value!==!0);ne([ae],me,{deep:!0,immediate:!0}),ne(()=>e.modelValue,(l,f)=>{if(W.value!==l){if(e.animated===!0){const _=Se(ye(l)),s=Se(ye(f));E.value=_>=s?"next":"prev"}W.value=l}h.value=l}),ne(W,(l,f)=>{if(W.value!==e.modelValue){if(e.animated===!0){const _=Se(ye(l)),s=Se(ye(f));E.value=_>=s?"next":"prev"}a("update:model-value",l)}}),ne(h,l=>{l&&(L.value=ht(l),W.value!==l&&(W.value=l))}),ne(L,l=>{b.value[h.value]?b.value[h.value].focus():$e()}),Kt(()=>{b.value={},S.value=[],I.value=[],Vt(()=>{yt()})}),Ot(()=>{lt(),yt()});function _t(){W.value=it()}function Qe(l=1){ue(l)}function mt(l=1){ue(-l)}function ot({width:l,height:f}){$.width=l,$.height=f}function rt(l){return l.date===W.value}function st(l){for(let f=0;f<l.length;++f)if(l[f].current===!0)return{timestamp:l[f]};return{timestamp:!1}}function yt(){if(!(v.value===!0||e.dayHeight!==0||t.week===void 0)&&window)for(const f in S.value){const _=S.value[f];if(_===void 0)continue;const s=I.value[f];if(s===void 0)continue;const q=window.getComputedStyle(_),K=parseFloat(q.marginTop,10)+parseFloat(q.marginBottom,10);_.clientHeight+K>s.clientHeight&&(s.style.height=_.clientHeight+K+"px")}}function gt(){return i("div",{class:"q-calendar-month__body"},[...D()])}function bt(){return i("div",{role:"presentation",class:"q-calendar-month__head"},[e.showWorkWeeks===!0&&ze(),i("div",{class:"q-calendar-month__head--wrapper"},[ut()])])}function ut(){return i("div",{ref:k,class:{"q-calendar-month__head--weekdays":!0}},[...ct()])}function ze(){const l=t["head-workweek"],f={start:Oe.value,end:Je.value,miniMode:v.value};return i("div",{class:"q-calendar-month__head--workweek",...Y("-head-workweek",_=>({scope:f,event:_}))},l?l({scope:f}):"#")}function ct(){return ee.value.map((l,f)=>Ee(l,f))}function Ee(l,f){const _=t["head-day"],s=ae.value.filter(ie=>ie.weekday===l.weekday),q=s[0].weekday,n={activeDate:e.noActiveDate!==!0&&rt(l),weekday:q,timestamp:l,days:s,index:f,miniMode:v.value,droppable:F.value===l.weekday,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},g=typeof e.weekdayClass=="function"?e.weekdayClass({scope:n}):{},T=e.focusable===!0&&e.focusType.includes("weekday"),O=tt.value,P=e.weekdayStyle||Ye,A={width:O,maxWidth:O,minWidth:O,...P({scope:n})},be={key:l.date+(f!==void 0?"-"+f:""),tabindex:T===!0?0:-1,class:{"q-calendar-month__head--weekday":!0,...g,"q-disabled-day disabled":n.disabled===!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0,"q-calendar__focusable":T===!0},style:A,onDragenter:ie=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(ie,"head-day",n)===!0?F.value=l.weekday:F.value="")},onDragover:ie=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(ie,"head-day",n)===!0?F.value=l.weekday:F.value="")},onDragleave:ie=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(ie,"head-day",n)===!0?F.value=l.weekday:F.value="")},onDrop:ie=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(ie,"head-day",n)===!0?F.value=l.weekday:F.value="")},onFocus:ie=>{T===!0&&(h.value=l.date)},...Y("-head-day",ie=>({scope:n,event:ie}))};return e.noAria!==!0&&(be.ariaLabel=et.value(l,!1)),i("div",be,[_===void 0&&je(l,e.shortWeekdayLabel||v.value),_!==void 0&&_({scope:n}),wt(l,f),T===!0&&nt()])}function wt(l,f){const _=t["head-day-event"],s=e.noActiveDate!==!0&&rt(l),q=ae.value.filter(P=>P.weekday===l.weekday),n={weekday:q[0].weekday,timestamp:l,days:q,index:f,miniMode:v.value,activeDate:s,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},g=tt.value,T=e.weekdayStyle||Ye,O={width:g,maxWidth:g,minWidth:g,...T({scope:n})};return i("div",{key:"event-"+l.date+(f!==void 0?"-"+f:""),class:{"q-calendar-month__head--event":!0},style:O},[_!==void 0&&_({scope:n})])}function je(l,f){const _=et.value(l,f||e.weekdayBreakpoints[0]>0&&Q.value<=e.weekdayBreakpoints[0]);return i("span",{class:"q-calendar__ellipsis"},v.value===!0&&e.shortWeekdayLabel===!0||e.weekdayBreakpoints[1]>0&&Q.value<=e.weekdayBreakpoints[1]?ia(_,e.minWeekdayLabel):_)}function D(){const l=e.weekdays.length,f=[];for(let _=0;_<ae.value.length;_+=l)f.push(p(ae.value.slice(_,_+l),_/l));return f}function p(l,f){const _=t.week,s=e.weekdays,q={week:l,weekdays:s,miniMode:v.value},K={};K.height=e.dayHeight>0&&v.value!==!0?de(parseInt(e.dayHeight,10)):"auto",e.dayMinHeight>0&&v.value!==!0&&(K.minHeight=de(parseInt(e.dayMinHeight,10)));const n=parseInt(e.dayHeight,10)===0&&parseInt(e.dayMinHeight,10)===0;return i("div",{key:l[0].date,ref:g=>{I.value[f]=g},class:{"q-calendar-month__week--wrapper":!0,"q-calendar-month__week--auto-height":n},style:K},[e.showWorkWeeks===!0?te(l):void 0,i("div",{class:"q-calendar-month__week"},[i("div",{class:"q-calendar-month__week--days"},l.map((g,T)=>re(g))),v.value!==!0&&_!==void 0?i("div",{ref:g=>{S.value[f]=g},class:"q-calendar-month__week--events"},_({scope:q})):void 0])])}function te(l){const f=t.workweek,_=l.length>2?l[2]:l[0],{timestamp:s}=st(l),q=Number(_.workweek).toLocaleString(e.locale),K={workweekLabel:q,week:l,miniMode:v.value};return i("div",{key:_.workweek,class:{"q-calendar-month__workweek":!0,...We(s!==!1?s:_,!1)},...Y("-workweek",n=>({scope:K,event:n}))},f?f({scope:K}):q)}function re(l){const f=t.day,_=e.dayStyle||Ye,s=J(l),q=e.noActiveDate!==!0&&Ce.value.date===l.date,K=s===!1&&e.showMonthLabel===!0&&ae.value.find(A=>A.month===l.month).day===l.day,n={outside:s,timestamp:l,miniMode:v.value,activeDate:q,hasMonth:K,droppable:C.value===l.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},g=Object.assign({...Ie.value},_({scope:n})),T=typeof e.dayClass=="function"?e.dayClass({scope:n}):{},O={key:l.date,ref:A=>{Pe.value===!0&&(b.value[l.date]=A)},tabindex:Pe.value===!0?0:-1,class:{"q-calendar-month__day":!0,...T,...We(l,s,e.selectedDates,e.selectedStartEndDates,e.hover),"q-active-date":q===!0,disabled:e.enableOutsideDays!==!0&&s===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":Pe.value===!0},style:g,onFocus:A=>{Pe.value===!0&&(h.value=l.date)},onKeydown:A=>{s!==!0&&l.disabled!==!0&&j(A,[13,32])&&(A.stopPropagation(),A.preventDefault())},onKeyup:A=>{s!==!0&&l.disabled!==!0&&j(A,[13,32])&&(A.stopPropagation(),A.preventDefault(),oe.value.onClickDay!==void 0&&v.value!==!0&&a("click-day",{scope:n,event:A}))},...Y("-day",A=>({scope:n,event:A}))};return s!==!0&&Object.assign(O,{onDragenter:A=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(A,"day",n)===!0?C.value=l.date:C.value="")},onDragover:A=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(A,"day",n)===!0?C.value=l.date:C.value="")},onDragleave:A=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(A,"day",n)===!0?C.value=l.date:C.value="")},onDrop:A=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(A,"day",n)===!0?C.value=l.date:C.value="")}}),e.noAria!==!0&&(O.ariaLabel=Xe.value(l)),i("div",O,[ce(l,s,K),i("div",{class:{"q-calendar-month__day--content":!0}},f?f({scope:n}):void 0),Pe.value===!0&&nt()])}function ce(l,f,_){let s,q;const K=[se(l,f)];v.value!==!0&&_===!0&&$.width>340&&(q=r(l,f)),v.value!==!0&&e.showDayOfYearLabel===!0&&q===void 0&&$.width>300&&(s=Re(l,f)),e.dateAlign==="left"?(s!==void 0&&K.push(s),q!==void 0&&K.push(q)):e.dateAlign==="right"?(s!==void 0&&K.unshift(s),q!==void 0&&K.unshift(q)):(s=void 0,q=void 0);const n={class:{"q-calendar-month__day--label__wrapper":!0,"q-calendar__ellipsis":!0,["q-calendar__"+e.dateAlign]:s===void 0&&q===void 0,"q-calendar__justify":s!==void 0||q!==void 0}};return i("div",n,K)}function se(l,f){if(f===!0&&e.noOutsideDays===!0)return;const _=dt.value(l,!1),s=t["head-day-label"],q=t["head-day-button"],K=e.selectedDates&&e.selectedDates.length>0&&e.selectedDates.includes(l.date),n=e.noActiveDate!==!0&&rt(l),g={dayLabel:_,timestamp:l,outside:f,activeDate:n,selectedDate:K,miniMode:v.value,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},T={key:l.date,ref:O=>{qe.value===!0&&(b.value[l.date]=O)},tabindex:qe.value===!0?0:-1,class:{"q-calendar-month__day--label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":l.current===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":qe.value===!0},disabled:l.disabled===!0||e.enableOutsideDays!==!0&&f===!0,onFocus:O=>{qe.value===!0&&(h.value=l.date)},onKeydown:O=>{f!==!0&&l.disabled!==!0&&j(O,[13,32])&&(O.stopPropagation(),O.preventDefault())},onKeyup:O=>{qe.value===!0&&f!==!0&&l.disabled!==!0&&j(O,[13,32])&&(O.stopPropagation(),O.preventDefault(),W.value=l.date,oe.value.onClickDate!==void 0&&a("click-date",{scope:g,event:O}))},...Y("-date",(O,P)=>(O.stopPropagation(),(P==="click-date"||P==="contextmenu-date")&&(W.value=l.date),{scope:g,event:O}))};return e.noAria!==!0&&(T.ariaLabel=Xe.value(l)),[q?q({scope:g}):da(e,T,s?s({scope:g}):_),qe.value===!0&&nt()]}function Re(l,f){if(f===!0&&e.noOutsideDays===!0)return;const _=t["day-of-year"];return i("span",{class:{"q-calendar-month__day--day-of-year":!0,"q-calendar__ellipsis":!0}},_?_({scope:{timestamp:l}}):l.doy)}function r(l,f){if(f===!0&&e.noOutsideDays===!0)return;const _=t["month-label"],s=le.value(l,e.shortMonthLabel||$.width<500),q={monthLabel:s,timestamp:l,miniMode:v.value},K={};return v.value!==!0&&V.value!==void 0&&(K.fontSize=V.value),i("span",{class:"q-calendar-month__day--month q-calendar__ellipsis",style:K},[_?_({scope:q}):v.value!==!0?s:void 0])}function y(){const{start:l,end:f}=Ae.value;H.value=l.date,Z.value=f.date;const _=$.width>0,s=Wt(i("div",{class:{"q-calendar-mini":v.value===!0,"q-calendar-month":!0},key:H.value},[_===!0&&e.noHeader!==!0&&bt(),_===!0&&gt()]),[[Dt,ot]]);if(e.animated===!0){const q="q-calendar--"+(E.value==="prev"?e.transitionPrev:e.transitionNext);return i($t,{name:q,appear:!0},()=>s)}return s}return d({prev:mt,next:Qe,move:ue,moveToToday:_t,updateCurrent:Ke}),()=>ve()}}),Bn=Ht({name:"QCalendarResource",props:{...At,...Ia,...Sa,...sa,...aa,...Mt,...Lt},emits:["update:model-value","update:model-resources","resource-expanded",...Qt,...zt,...we("-date"),...we("-interval"),...we("-head-day"),...we("-time"),...we("-head-resources"),...we("-resource")],setup(e,{slots:t,emit:a,expose:d}){const o=c(null),m=c(null),k=c(null),h=c(null),L=c(null),b=c(null),S=c({}),I=c({}),E=c("next"),H=c(it()),Z=c("0000-00-00"),G=c(0),W=c(e.modelValue),$=Nt({width:0,height:0}),F=c(!1),C=c(!1),w=c(!1),Ge=c(null),He=c(null);ne(()=>e.view,()=>{G.value=0});const De=M(()=>e.view==="month"?"month-interval":e.view),oe=M(()=>parseInt(e.cellWidth,10)),B=Tt();if(B===null)throw new Error("current instance is null");const{emitListeners:z}=Ut(B),{times:he,setCurrent:Ke,updateCurrent:Be}=Gt(e);Be(),Ke();const{weekdaySkips:Oe,parsedStart:Je,parsedEnd:dt,dayStyleDefault:et}=Xt(e,{startDate:H,endDate:Z,times:he}),Xe=M(()=>ht(e.modelValue,he.now)||Je.value||he.today);b.value=Xe.value,L.value=Xe.value.date;const{renderValues:Ye}=Yt(e,{parsedView:De,times:he,parsedValue:Xe}),{rootRef:We,__initCalendar:Ce,__renderCalendar:Ie}=jt(e,je,{scrollArea:o,pane:m}),{days:Ae,intervals:ge,intervalFormatter:lt,styleDefault:ve,scrollToTimeX:ae,timeDurationWidth:ee,timeStartPosX:v,widthToMinutes:Q}=oa(e,{weekdaySkips:Oe,times:he,scrollArea:o,parsedStart:Je,parsedEnd:dt,maxDays:G,size:$,headerColumnRef:h}),{move:V}=Jt(e,{parsedView:De,parsedValue:Xe,weekdaySkips:Oe,direction:E,maxDays:G,times:he,emittedValue:W,emit:a}),{getDefaultMouseEventHandlers:J}=ea(a,z),{checkChange:le}=pt(a,{days:Ae,lastStart:Ge,lastEnd:He}),{isKeyCode:ue}=ta(),{tryFocus:Y}=Zt(e,{rootRef:We,focusRef:L,focusValue:b,datesRef:S,days:Ae,parsedView:De,parsedValue:Xe,emittedValue:W,weekdaySkips:Oe,direction:E,times:he}),me=M(()=>{const D=parseInt(e.resourceHeight,10);return D===0?"auto":D}),j=M(()=>parseInt(e.resourceMinHeight,10)),$e=M(()=>parseInt(e.intervalHeaderHeight,10));ne([Ae],le,{deep:!0,immediate:!0}),ne(()=>e.modelValue,(D,p)=>{if(W.value!==D){if(e.animated===!0){const te=Se(ye(D)),re=Se(ye(p));E.value=te>=re?"next":"prev"}W.value=D}L.value=D}),ne(W,(D,p)=>{if(W.value!==e.modelValue){if(e.animated===!0){const te=Se(ye(D)),re=Se(ye(p));E.value=te>=re?"next":"prev"}a("update:model-value",D)}}),ne(L,D=>{D&&(b.value=ht(D))}),ne(b,D=>{S.value[L.value]?S.value[L.value].focus():Y()}),Kt(()=>{S.value={},I.value={}}),Ot(()=>{Ce()});function Me(){W.value=it()}function ke(D=1){V(D)}function tt(D=1){V(-D)}function Pe({width:D,height:p}){$.width=D,$.height=p}function qe(D){return D.date===W.value}function _t(){const D={height:de($e.value)};return i("div",{ref:k,roll:"presentation",class:{"q-calendar-resource__head":!0,"q-calendar__sticky":e.noSticky!==!0},style:D},[Qe(),mt()])}function Qe(){const D=t["head-resources"],p=de($e.value),te={timestamps:ge,date:e.modelValue,resources:e.modelResources};return i("div",{class:{"q-calendar-resource__head--resources":!0,"q-calendar__sticky":e.noSticky!==!0},style:{height:p},...J("-head-resources",re=>({scope:te,event:re}))},[D&&D({scope:te})])}function mt(){return i("div",{ref:h,class:{"q-calendar-resource__head--intervals":!0}},[ge.value.map(D=>D.map((p,te)=>ot(p,te)))])}function ot(D,p){const te=t["interval-label"],re=e.noActiveDate!==!0&&qe(D),ce=de(oe.value),se=de($e.value),Re=e.shortIntervalLabel,r=lt.value(D,Re),y={timestamp:D,index:p,label:r};y.droppable=F.value===r;const l=e.intervalStyle||et,f={width:ce,maxWidth:ce,minWidth:ce,height:se,...l({scope:y})},_=typeof e.intervalClass=="function"?e.intervalClass({scope:y}):{},s=e.focusable===!0&&e.focusType.includes("interval");return i("div",{key:r,tabindex:s===!0?0:-1,class:{"q-calendar-resource__head--interval":!0,..._,"q-active-date":re,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:f,onDragenter:q=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(q,"interval",y)===!0?F.value=r:F.value="")},onDragover:q=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(q,"interval",y)===!0?F.value=r:F.value="")},onDragleave:q=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(q,"interval",y)===!0?F.value=r:F.value="")},onDrop:q=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(q,"interval",y)===!0?F.value=r:F.value="")},onFocus:q=>{s===!0&&(L.value=r)},...J("-interval",q=>({scope:y,event:q}))},[te?te({scope:y}):r,nt()])}function rt(){return i("div",{class:"q-calendar-resource__body"},[st()])}function st(){return i("div",{ref:o,class:{"q-calendar-resource__scroll-area":!0,"q-calendar__scroll":!0}},[gt()])}function yt(){return i("div",{},"No resources have been defined")}function gt(){return i("div",{class:"q-calendar-resource__day--container"},[_t(),e.modelResources===void 0&&yt(),e.modelResources!==void 0&&bt()])}function bt(){return i("div",{class:"q-calendar-resource__resources--body"},ut())}function ut(D=void 0,p=0,te=!0){return D===void 0&&(D=e.modelResources),D.map((re,ce)=>ze(re,ce,p,re.children!==void 0?re.expanded:te))}function ze(D,p,te=0,re=!0){const ce={};ce.height=me.value==="auto"?me.value:de(me.value),j.value>0&&(ce.minHeight=de(j.value));const se=i("div",{key:D[e.resourceKey]+"-"+p,class:{"q-calendar-resource__resource--row":!0},style:ce},[ct(D,p,te,re),Ee(D,p)]);return D.children!==void 0?[se,i("div",{class:{"q-calendar__child":!0,"q-calendar__child--expanded":re===!0,"q-calendar__child--collapsed":re!==!0}},[ut(D.children,te+1,re===!1?re:D.expanded)])]:[se]}function ct(D,p,te=0,re=!0){const ce=t["resource-label"],se={};se.height=D.height!==void 0?de(parseInt(D.height,10)):me.value?de(me.value):"auto",j.value>0&&(se.minHeight=de(j.value));const Re=e.resourceStyle||ve,r=D[e.resourceLabel],y=e.focusable===!0&&e.focusType.includes("resource")&&re===!0,l={resource:D,timestamps:ge,resourceIndex:p,indentLevel:te,label:r},f=D[e.resourceKey];l.droppable=C.value===f;const _=typeof e.resourceClass=="function"?e.resourceClass({scope:l}):{};return i("div",{key:D[e.resourceKey]+"-"+p,ref:s=>{I.value[D[e.resourceKey]]=s},tabindex:y===!0?0:-1,class:{"q-calendar-resource__resource":te===0,"q-calendar-resource__resource--section":te!==0,..._,"q-calendar__sticky":e.noSticky!==!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":y===!0},style:{...se,...Re({scope:l})},onDragenter:s=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(s,"resource",l)===!0?C.value=f:C.value="")},onDragover:s=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(s,"resource",l)===!0?C.value=f:C.value="")},onDragleave:s=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(s,"resource",l)===!0?C.value=f:C.value="")},onDrop:s=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(s,"resource",l)===!0?C.value=f:C.value="")},onKeydown:s=>{ue(s,[13,32])&&(s.stopPropagation(),s.preventDefault())},onKeyup:s=>{ue(s,[13,32])&&z.value.onClickResource!==void 0&&a("click-resource",{scope:l,event:s})},...J("-resource",s=>({scope:l,event:s}))},[[i("div",{class:{"q-calendar__parent":D.children!==void 0,"q-calendar__parent--expanded":D.children!==void 0&&D.expanded===!0,"q-calendar__parent--collapsed":D.children!==void 0&&D.expanded!==!0},onClick:s=>{s.stopPropagation(),D.expanded=!D.expanded,a("resource-expanded",{expanded:D.expanded,scope:l})}}),i("div",{class:{"q-calendar-resource__resource--text":!0,"q-calendar__ellipsis":!0},style:{paddingLeft:10*te+2+"px"}},[ce?ce({scope:l}):r]),nt()]])}function Ee(D,p){const te=t["resource-intervals"],re={resource:D,timestamps:ge,resourceIndex:p,timeStartPosX:v,timeDurationWidth:ee};return i("div",{class:"q-calendar-resource__resource--intervals"},[ge.value.map(ce=>ce.map(se=>wt(D,se,p))),te&&te({scope:re})])}function wt(D,p,te){const re=t["resource-interval"],ce=e.noActiveDate!==!0&&qe(p),se={activeDate:ce,resource:D,timestamp:p,resourceIndex:te},Re=D[e.resourceKey],r=p.time+"-"+Re;se.droppable=w.value===r;const y=e.focusable===!0&&e.focusType.includes("time"),l=e.intervalStyle||et,f=de(oe.value),_={width:f,maxWidth:f,minWidth:f,...l({scope:se})};return _.height=D.height!==void 0?de(parseInt(D.height,10)):me.value>0?de(me.value):"auto",j.value>0&&(_.minHeight=de(j.value)),i("div",{key:r,ref:s=>{S.value[D[e.resourceKey]]=s},tabindex:y===!0?0:-1,class:{"q-calendar-resource__resource--interval":!0,"q-active-date":ce,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":y===!0},style:_,onDragenter:s=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(s,"time",se)===!0?w.value=r:w.value="")},onDragover:s=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(s,"time",se)===!0?w.value=r:w.value="")},onDragleave:s=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(s,"time",se)===!0?w.value=r:w.value="")},onDrop:s=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(s,"time",se)===!0?w.value=r:w.value="")},onFocus:s=>{y===!0&&(L.value=r)},...J("-time",s=>({scope:se,event:s}))},[re&&re({scope:se}),nt()])}function je(){const{start:D,end:p,maxDays:te}=Ye.value;(H.value!==D.date||Z.value!==p.date||G.value!==te)&&(H.value=D.date,Z.value=p.date,G.value=te);const re=$.width>0,ce=Wt(i("div",{class:"q-calendar-resource",key:H.value},[re===!0&&rt()]),[[Dt,Pe]]);if(e.animated===!0){const se="q-calendar--"+(E.value==="prev"?e.transitionPrev:e.transitionNext);return i($t,{name:se,appear:!0},()=>ce)}return ce}return d({prev:tt,next:ke,move:V,moveToToday:Me,updateCurrent:Be,timeStartPosX:v,timeDurationWidth:ee,widthToMinutes:Q,scrollToTimeX:ae}),()=>Ie()}}),In=Ht({name:"QCalendarScheduler",directives:[Dt],props:{...At,...Ba,...sa,...aa,...Mt,...na,...Lt},emits:["update:model-value","update:model-resources","resource-expanded",...Qt,...zt,...we("-date"),...we("-day-resource"),...we("-head-resources"),...we("-head-day"),...we("-resource")],setup(e,{slots:t,emit:a,expose:d}){const o=c(null),m=c(null),k=c(null),h=c(null),L=c(null),b=c({}),S=c({}),I=c({}),E=c({}),H=c("next"),Z=c(e.modelValue||it()),G=c("0000-00-00"),W=c(0),$=c(e.modelValue),F=Nt({width:0,height:0}),C=c(!1),w=c(!1),Ge=c(null),He=c(null);ne(()=>e.view,()=>{W.value=0});const De=M(()=>e.view==="month"?"month-interval":e.view),oe=Tt();if(oe===null)throw new Error("current instance is null");const{emitListeners:B}=Ut(oe),{isSticky:z}=ca(e),{times:he,setCurrent:Ke,updateCurrent:Be}=Gt(e);Be(),Ke();const{weekdaySkips:Oe,parsedStart:Je,parsedEnd:dt,dayFormatter:et,weekdayFormatter:Xe,ariaDateFormatter:Ye,dayStyleDefault:We,getRelativeClasses:Ce}=Xt(e,{startDate:Z,endDate:G,times:he}),Ie=M(()=>ht(e.modelValue,he.now)||Je.value||he.today);L.value=Ie.value,h.value=Ie.value.date;const{renderValues:Ae}=Yt(e,{parsedView:De,parsedValue:Ie,times:he}),{rootRef:ge,scrollWidth:lt,__initCalendar:ve,__renderCalendar:ae}=jt(e,K,{scrollArea:o,pane:m}),{days:ee,parsedCellWidth:v,styleDefault:Q}=oa(e,{weekdaySkips:Oe,times:he,scrollArea:o,parsedStart:Je,parsedEnd:dt,maxDays:W,size:F,headerColumnRef:k}),{move:V}=Jt(e,{parsedView:De,parsedValue:Ie,weekdaySkips:Oe,direction:H,maxDays:W,times:he,emittedValue:$,emit:a}),{getDefaultMouseEventHandlers:J}=ea(a,B),{checkChange:le}=pt(a,{days:ee,lastStart:Ge,lastEnd:He}),{isKeyCode:ue}=ta(),{tryFocus:Y}=Zt(e,{rootRef:ge,focusRef:h,focusValue:L,datesRef:b,days:ee,parsedView:De,parsedValue:Ie,emittedValue:$,weekdaySkips:Oe,direction:H,times:he}),me=M(()=>De.value==="day"&&parseInt(e.columnCount,10)>1?parseInt(e.columnCount,10):De.value==="day"&&e.maxDays&&e.maxDays>1?e.maxDays:ee.value.length),j=M(()=>ge.value?parseInt(getComputedStyle(ge.value).getPropertyValue("--calendar-resources-width"),10):0),$e=M(()=>{const n=parseInt(e.resourceHeight,10);return n===0?"auto":n}),Me=M(()=>parseInt(e.resourceMinHeight,10)),ke=M(()=>{if(ge.value){const n=F.width||ge.value.getBoundingClientRect().width;if(n&&j.value&&me.value)return(n-lt.value-j.value)/me.value+"px"}return 100/me.value+"%"});ne([ee],le,{deep:!0,immediate:!0}),ne(()=>e.modelValue,(n,g)=>{if($.value!==e.modelValue){if(e.animated===!0){const T=Se(ye(n)),O=Se(ye(g));H.value=T>=O?"next":"prev"}$.value=n}h.value=n}),ne($,(n,g)=>{if($.value!==e.modelValue){if(e.animated===!0){const T=Se(ye(n)),O=Se(ye(g));H.value=T>=O?"next":"prev"}a("update:model-value",n)}}),ne(h,n=>{n&&(L.value=ht(n))}),ne(L,n=>{b.value[h.value]?b.value[h.value].focus():Y()}),ne(()=>e.maxDays,n=>{W.value=n}),Kt(()=>{b.value={},I.value={},E.value={},S.value={}}),Ot(()=>{ve()});function tt(){$.value=it()}function Pe(n=1){V(n)}function qe(n=1){V(-n)}function _t({width:n,height:g}){F.width=n,F.height=g}function Qe(n){return n.date===$.value}function mt(){return i("div",{roll:"presentation",class:{"q-calendar-scheduler__head":!0,"q-calendar__sticky":z.value===!0},style:{marginRight:lt.value+"px"}},[ot(),rt()])}function ot(){const n=t["head-resources"],g={days:ee.value,timestamps:ee.value,date:e.modelValue,resources:e.modelResources};return i("div",{class:{"q-calendar-scheduler__head--resources":!0,"q-calendar__sticky":z.value===!0},...J("-head-resources",T=>({scope:g,event:T}))},[n&&n({scope:g})])}function rt(){return i("div",{ref:k,class:{"q-calendar-scheduler__head--days__column":!0}},[st(),yt()])}function st(){return i("div",{class:{"q-calendar-scheduler__head--days__weekdays":!0}},[...gt()])}function yt(){const n=t["head-days-events"];return Vt(()=>{if(E.value&&parseInt(e.columnCount,10)===0&&window)try{const g=window.getComputedStyle(E.value);I.value.parentElement.style.height=g.height,I.value.style.height=g.height}catch{}}),i("div",{class:{"q-calendar-scheduler__head--days__event":!0}},[n&&i("div",{ref:I,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[n({scope:{timestamps:ee.value,days:ee.value,ref:E}})]),...bt()])}function gt(){return ee.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((n,g)=>g+parseInt(e.columnIndexStart,10)).map(n=>ut(ee.value[0],n)):ee.value.map(n=>ut(n))}function bt(){return ee.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((n,g)=>g+parseInt(e.columnIndexStart,10)).map(n=>ct(ee.value[0],n)):ee.value.map(n=>ct(n))}function ut(n,g){const T=t["head-day"],O=t["head-date"],P=e.noActiveDate!==!0&&Qe(n),A={timestamp:n,activeDate:P,droppable:C.value===n.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(n.weekday):!1};g!==void 0&&(A.columnIndex=g);const be=z.value===!0?de(v.value):ke.value,ie=e.weekdayStyle||We,pe={width:be,maxWidth:be,minWidth:be,...ie({scope:A})};z.value===!0&&(pe.minWidth=be);const u=typeof e.weekdayClass=="function"?e.weekdayClass({scope:A}):{},R=e.focusable===!0&&e.focusType.includes("weekday"),x=n.date+(g!==void 0?"-"+g:""),N={key:x,ref:U=>{b.value[x]=U},tabindex:R===!0?0:-1,class:{"q-calendar-scheduler__head--day":!0,...u,...Ce(n),"q-active-date":P,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":R===!0},style:pe,onFocus:U=>{R===!0&&(h.value=x)},onKeydown:U=>{n.disabled!==!0&&ue(U,[13,32])&&(U.stopPropagation(),U.preventDefault())},onKeyup:U=>{n.disabled!==!0&&ue(U,[13,32])&&($.value=n.date)},...J("-head-day",U=>({scope:A,event:U})),onDragenter:U=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(U,"head-day",A)===!0?C.value=n.date:C.value="")},onDragover:U=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(U,"head-day",A)===!0?C.value=n.date:C.value="")},onDragleave:U=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(U,"head-day",A)===!0?C.value=n.date:C.value="")},onDrop:U=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(U,"head-day",A)===!0?C.value=n.date:C.value="")}};return i("div",N,[T!==void 0&&T({scope:A}),T===void 0&&p(n,g),T===void 0&&ze(n),T===void 0&&O&&O({scope:A}),T===void 0&&te(n,g),nt()])}function ze(n){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&Ee(n),e.noDefaultHeaderBtn!==!0&&je(n)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ee(n),e.noDefaultHeaderBtn!==!0&&je(n)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ee(n),e.noDefaultHeaderBtn!==!0&&je(n)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ee(n),e.noDefaultHeaderBtn!==!0&&je(n)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&je(n),e.noDefaultHeaderText!==!0&&Ee(n)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&je(n),e.noDefaultHeaderText!==!0&&Ee(n)]):i("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&je(n),e.noDefaultHeaderText!==!0&&Ee(n)])}function ct(n,g){const T=t["head-day-event"],O=e.noActiveDate!==!0&&Qe(n),P={timestamp:n,activeDate:O,droppable:C.value===n.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(n.weekday):!1};g!==void 0&&(P.columnIndex=g);const A=z.value===!0?de(v.value):ke.value,be={width:A,maxWidth:A,minWidth:A};return z.value===!0&&(be.minWidth=A),i("div",{key:"event-"+n.date+(g!==void 0?"-"+g:""),class:{"q-calendar-scheduler__head--day__event":!0,...Ce(n),"q-active-date":O},style:be},[T&&T({scope:P})])}function Ee(n){const g=t["head-weekday-label"],T=e.shortWeekdayLabel===!0,O={timestamp:n,shortWeekdayLabel:T},P={class:{"q-calendar-scheduler__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return i("div",P,g&&g({scope:O})||wt(n,T))}function wt(n,g){const T=Xe.value(n,g||e.weekdayBreakpoints[0]>0&&v.value<=e.weekdayBreakpoints[0]);return i("span",{class:"q-calendar-scheduler__head--weekday-label q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&v.value<=e.weekdayBreakpoints[1]?ia(T,e.minWeekdayLabel):T)}function je(n){const g={class:{"q-calendar-scheduler__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return i("div",g,D(n))}function D(n){const g=e.noActiveDate!==!0&&Qe(n),T=et.value(n,!1),O=t["head-day-label"],P=t["head-day-button"],A={dayLabel:T,timestamp:n,activeDate:g},be={class:{"q-calendar-scheduler__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":n.current===!0,"q-calendar__focusable":!0},disabled:n.disabled,onKeydown:ie=>{n.disabled!==!0&&ue(ie,[13,32])&&(ie.stopPropagation(),ie.preventDefault())},onKeyup:ie=>{n.disabled!==!0&&ue(ie,[13,32])&&($.value=n.date,B.value.onClickDate!==void 0&&a("click-date",{scope:A}))},...J("-date",(ie,pe)=>((pe==="click-date"||pe==="contextmenu-date")&&($.value=n.date,pe==="click-date"&&ie.preventDefault()),{scope:A,event:ie}))};return e.noAria!==!0&&(be.ariaLabel=Ye.value(n)),P?P({scope:A}):da(e,be,O?O({scope:A}):T)}function p(n,g){const T=t["column-header-before"];if(T)return i("div",{class:"q-calendar-scheduler__column-header--before"},[T({scope:{timestamp:n,columnIndex:g}})])}function te(n,g){const T=t["column-header-after"];if(T)return i("div",{class:"q-calendar-scheduler__column-header--after"},[T({scope:{timestamp:n,columnIndex:g}})])}function re(){return i("div",{class:"q-calendar-scheduler__body"},[ce()])}function ce(){return z.value===!0?i("div",{ref:o,class:{"q-calendar-scheduler__scroll-area":!0,"q-calendar__scroll":!0}},[z.value!==!0&&f(),Re()]):e.noScroll===!0?se():i("div",{ref:o,class:{"q-calendar-scheduler__scroll-area":!0,"q-calendar__scroll":!0}},[se()])}function se(){return i("div",{ref:m,class:"q-calendar-scheduler__pane"},[Re()])}function Re(){return i("div",{class:"q-calendar-scheduler__day--container"},[z.value===!0&&e.noHeader!==!0&&mt(),r()])}function r(n=void 0,g=0,T=!0){return n===void 0&&(n=e.modelResources),n.map((O,P)=>y(O,P,g,O.children!==void 0?O.expanded:T))}function y(n,g,T=0,O=!0){const P={};P.height=n.height!==void 0?de(parseInt(n.height,10)):$e.value?de($e.value):"auto",Me.value>0&&(P.minHeight=de(Me.value));const A=i("div",{key:n[e.resourceKey]+"-"+g,class:{"q-calendar-scheduler__resource--row":!0},style:P},[l(n,g,T,O),f(n,g,T,O)]);return n.children!==void 0?[A,i("div",{class:{"q-calendar__child":!0,"q-calendar__child--expanded":O===!0,"q-calendar__child--collapsed":O!==!0}},[r(n.children,T+1,O===!1?O:n.expanded)])]:[A]}function l(n,g,T=0,O=!0){const P=t["resource-label"],A={};A.height=n.height!==void 0?de(parseInt(n.height,10)):$e.value?de($e.value):"auto",parseInt(e.resourceMinHeight,10)>0&&(A.minHeight=de(parseInt(e.resourceMinHeight,10)));const be=e.resourceStyle||Q,ie=n[e.resourceLabel],pe=e.focusable===!0&&e.focusType.includes("resource")&&O===!0,u={resource:n,timestamps:ee.value,days:ee.value,resourceIndex:g,indentLevel:T,label:ie},R=n[e.resourceKey];u.droppable=w.value===R;const x=typeof e.resourceClass=="function"?e.resourceClass({scope:u}):{};return i("div",{key:n[e.resourceKey]+"-"+g,ref:N=>{S.value[n[e.resourceKey]]=N},tabindex:pe===!0?0:-1,class:{"q-calendar-scheduler__resource":T===0,"q-calendar-scheduler__resource--section":T!==0,...x,"q-calendar__sticky":z.value===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":pe===!0},style:{...A,...be({scope:u})},onDragenter:N=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(N,"resource",u)===!0?w.value=R:w.value="")},onDragover:N=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(N,"resource",u)===!0?w.value=R:w.value="")},onDragleave:N=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(N,"resource",u)===!0?w.value=R:w.value="")},onDrop:N=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(N,"resource",u)===!0?w.value=R:w.value="")},onKeydown:N=>{ue(N,[13,32])&&(N.stopPropagation(),N.preventDefault())},onKeyup:N=>{ue(N,[13,32])&&B.value.onClickResource!==void 0&&a("click-resource",{scope:u,event:N})},...J("-resource",N=>({scope:u,event:N}))},[[i("div",{class:{"q-calendar__parent":n.children!==void 0,"q-calendar__parent--expanded":n.children!==void 0&&n.expanded===!0,"q-calendar__parent--collapsed":n.children!==void 0&&n.expanded!==!0},onClick:N=>{N.stopPropagation(),n.expanded=!n.expanded,a("resource-expanded",{expanded:n.expanded,scope:u})}}),i("div",{class:{"q-calendar-scheduler__resource--text":!0,"q-calendar__ellipsis":!0},style:{paddingLeft:10*T+2+"px"}},[P?P({scope:u}):ie]),nt()]])}function f(n,g,T=0,O=!0){const P=t["resource-days"],A=z.value===!0?de(v.value):ke.value,be={resource:n,resourceIndex:g,indentLevel:T,expanded:O,cellWidth:A,timestamps:ee.value,days:ee.value},ie={};return ie.height=parseInt(e.resourceHeight,10)>0?de(parseInt(e.resourceHeight,10)):"auto",parseInt(e.resourceMinHeight,10)>0&&(ie.minHeight=de(parseInt(e.resourceMinHeight,10))),i("div",{class:"q-calendar-scheduler__resource--days",style:ie},[..._(n,g,T,O),P&&P({scope:be})])}function _(n,g,T=0,O=!0){return ee.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((P,A)=>A+parseInt(e.columnIndexStart,10)).map(P=>s(ee.value[0],P,n,g,T,O)):ee.value.map(P=>s(P,void 0,n,g,T,O))}function s(n,g,T,O,P=0,A=!0){const be=t.day,ie=e.dayStyle||We,pe=e.noActiveDate!==!0&&Ie.value.date===n.date,u=n.date+":"+T[e.resourceKey]+(g!==void 0?":"+g:""),R=w.value===u,x={timestamp:n,columnIndex:g,resource:T,resourceIndex:O,indentLevel:P,activeDate:pe,droppable:R},N=z.value===!0?de(v.value):ke.value,U={width:N,maxWidth:N,...ie({scope:x})};U.height=parseInt(e.resourceHeight,10)>0?de(parseInt(e.resourceHeight,10)):"auto",parseInt(e.resourceMinHeight,10)>0&&(U.minHeight=de(parseInt(e.resourceMinHeight,10)));const X=typeof e.dayClass=="function"?e.dayClass({scope:x}):{},Fe=e.focusable===!0&&e.focusType.includes("day")&&A===!0;return i("div",{key:n.date+(g!==void 0?":"+g:""),tabindex:Fe===!0?0:-1,class:{"q-calendar-scheduler__day":P===0,"q-calendar-scheduler__day--section":P!==0,...X,...Ce(n),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":Fe===!0},style:U,onDragenter:fe=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(fe,"day",x)===!0?w.value=u:w.value="")},onDragover:fe=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(fe,"day",x)===!0?w.value=u:w.value="")},onDragleave:fe=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(fe,"day",x)===!0?w.value=u:w.value="")},onDrop:fe=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(fe,"day",x)===!0?w.value=u:w.value="")},onKeydown:fe=>{ue(fe,[13,32])&&(fe.stopPropagation(),fe.preventDefault())},onKeyup:fe=>{ue(fe,[13,32])&&($.value=x.timestamp.date,B.value.onClickResource!==void 0&&a("click-resource",{scope:x,event:fe}))},...J("-day-resource",fe=>({scope:x,event:fe}))},[be&&be({scope:x}),nt()])}function q(){return i("div",{},"No resources have been defined")}function K(){const{start:n,end:g,maxDays:T}=Ae.value;(Z.value!==n.date||G.value!==g.date||W.value!==T)&&(Z.value=n.date,G.value=g.date,W.value=T);const O=F.width>0,P=e.modelResources&&e.modelResources.length>0,A=Wt(i("div",{key:Z.value,class:"q-calendar-scheduler"},[O===!0&&P===!0&&z.value!==!0&&e.noHeader!==!0&&mt(),O===!0&&P===!0&&re(),P===!1&&q()]),[[Dt,_t]]);if(e.animated===!0){const be="q-calendar--"+(H.value==="prev"?e.transitionPrev:e.transitionNext);return i($t,{name:be,appear:!0},()=>A)}return A}return d({prev:qe,next:Pe,move:V,moveToToday:tt,updateCurrent:Be}),()=>ae()}});Ht({name:"QCalendar",props:{mode:{type:String,validator:e=>["day","month","agenda","resource","scheduler","task"].includes(e),default:"day"},...At,...Pa,...Mt,...na,...Lt,...Sa,...Ba,...Ia,...aa,...bn},setup(e,{attrs:t,slots:a,expose:d}){const o=c(null),m=M(()=>{switch(e.mode){case"agenda":return Mn;case"resource":return Bn;case"scheduler":return In;case"month":return xn;case"day":return Da;case"task":return wn;case"day":default:return Da}});function k(){o.value.moveToToday()}function h(C=-1){o.value.move(C)}function L(C=1){o.value.next(C)}function b(C=1){o.value.prev(C)}function S(){o.value.updateCurrent()}function I(C,w=!0){return o.value.timeStartPos(C,w)}function E(C,w=!0){return o.value.timeStartPosX(C,w)}function H(C){return o.value.timeDurationWidth(C)}function Z(C){return o.value.timeDurationHeight(C)}function G(C){return o.value.heightToMinutes(C)}function W(C){return o.value.widthToMinutes(minutes)}function $(C){return o.value.scrollToTime(C)}function F(C){return o.value.scrollToTimeX(C)}return d({prev:b,next:L,move:h,moveToToday:k,updateCurrent:S,timeStartPos:I,timeStartPosX:E,timeDurationWidth:H,timeDurationHeight:Z,heightToMinutes:G,widthToMinutes:W,scrollToTime:$,scrollToTimeX:F}),()=>i(m.value,{ref:o,...e,...t},a)}});const Pn=()=>!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function Ha(e){return e.button===0}const Vn=Ht({name:"dayCalendar",components:{NavigationBar:Dn,QCalendarDay:Da,addGoalForm:on},data(){return c(null),c(null),c(null),c(null),c(null),c(null),Sn(),{currentDate:c(it()),scoreOptions:c([1,2,3,4,5]),chosenScore:c(null),events:[],calendar:c(null),store:kn(),anchorTimestamp:c(null),otherTimestamp:c(null),mouseDown:c(!1),mobile:c(!0),timeStartPos:c(0),showGoalForm:c(!1),showEventDialog:c(!1),conflictReso:c(!1),resoType:c(""),toAddE:c(null),disabledScoreEvts:c({}),disableSaveSchedule:c(!0),reloadSaved:c(!1),loadDefault:c(!0),doSchedule:c(!1)}},beforeMount(){this.mobile=Pn(),this.events=this.returnNewEvts(!0)},beforeUnmount(){clearInterval(this.intervalId)},mounted(){this.adjustCurrentTime(),this.intervalId=setInterval(()=>{this.adjustCurrentTime()},6e4)},computed:{chosenScoreLabel(){return this.chosenScore==null?"Scheduled All":`Schedule >${this.chosenScore}`},showForm(){return this.showGoalForm},doDisableSaveSchedule(){return this.disableSaveSchedule},eventsMap(){const e={};return this.events.forEach(t=>{if(e[t.date]||(e[t.date]=[]),e[t.date].push(t),t.days){console.log(`eventsMap multiple days? event for ${t.date}`,t.days);let a=ht(t.date),d=t.days;do a=xe(a,{day:1}),e[a.date]||(e[a.date]=[]),e[a.date].push(t);while(--d>0)}}),e},parentGoalsMap(){const e=new Map;let t=this.store.getMainGoals;return t?(t.forEach(a=>{e.set(a.id,a)}),e):(console.log("parentGoalsMap is empty or null",t),e)},canbeScheduled(){let e=this.deepCopy(this.storedEvents),t=e.filter(a=>!this.events.find(d=>d.id==a.id));return t.length==0?e:t},storedEvents(){return this.store.getSubGoals},style(){return{top:this.timeStartPos+"px"}},startEndTimes(){const e=[];return this.anchorDayTimeIdentifier!==!1&&this.otherDayTimeIdentifier!==!1&&(this.anchorDayTimeIdentifier<=this.otherDayTimeIdentifier?e.push(St(this.anchorTimestamp),St(this.otherTimestamp)):e.push(St(this.otherTimestamp),St(this.anchorTimestamp))),e},anchorDayTimeIdentifier(){return this.anchorTimestamp!==null?vt(this.anchorTimestamp):!1},otherDayTimeIdentifier(){return this.otherTimestamp!==null?vt(this.otherTimestamp):!1}},methods:{returnNewEvts(e=!1){if(this.events===this.allEvents&&console.log("returnNewEvts SAME"),e){let t=this.deepCopy(this.storedEvents);return this.allEvents=[...t],t}return this.allEvents},addPropsEventsTo(e,t){let a=this.parentGoalsMap;return t?(t.forEach(d=>{d.date=e!=null?e:d.date;let o=a.get(d.parentGoal);o?(d.bgcolor=o.bgcolor,d.details="from:"+o.title):(console.log("no parent goal for:",d),d.bgcolor="red",d.details="unknown")}),console.log("addPropsEventsTo",e),t):(this.doNotify("addPropsEventsTo BUT no goals to schedule..."),[])},getTimeNumber(e){return e!==null?vt(e):!1},adjustCurrentTime(){const e=_a(new Date);if(this.currentDate!==e.date){this.timeStartPos=-10,this.currentTime="";return}this.currentDate=e.date,this.currentTime=e.time,this.timeStartPos=this.$refs.calendar.timeStartPos(this.currentTime,!1),this.endTimesSet&&this.endTimesSet.has(e.time)?(this.enableEditScore(e.time),this.doNotify(`WOOO at end of a scheduled event ${e.time}`,"positive")):this.hasUncompletedEvents()||(this.doNotify("WOOOHOO finished all events","positive"),this.disableSaveSchedule=!1)},hasUncompletedEvents(){for(let e in this.disabledScoreEvts)if(this.disabledScoreEvts[e])return!0;return!1},hasDate(e){return this.currentDate?e.find(t=>t.date===this.currentDate):!1},badgeClasses(e,t){const a=t==="header";return{[`text-white bg-${e.bgcolor.toLocaleLowerCase()}`]:!0,"full-width":!a&&(!e.side||e.side==="full"),"left-side":!a&&e.side==="left","right-side":!a&&e.side==="right","rounded-border":!0}},badgeStyles(e,t,a=void 0,d=void 0){const o={};return a&&d&&(o.top=a(e.time)+"px",o.height=d(e.duration)+"px"),o["align-items"]="flex-start",o},getAnEvent(e){for(let t=0;t<this.events.length;t++)if(this.events[t].id===e)return this.events[t];return null},addAnEvent(e){console.log("oooh addAnEvent..ORIG",e,this.currentDate);let t=this.addPropsEventsTo(this.currentDate,[e]);console.log("addAnEvent..after",t[0],e),this.events.push(e);let a=xe(ye(e.date),{minute:Ct(e.time)}),d=xe(a,{minute:e.duration});this.dailyScheduled.set(e.id,{start:a,end:d,on:e.date,originalAt:e.time,for:e.duration,score:e.score}),this.endTimesSet.add(d.time)},saveCurrentSchedule(){const e=new Map;let t=new Set;const a=_a(new Date);let d=new Set,o=new Set;return this.events.forEach(m=>{let k=xe(ye(m.date),{minute:Ct(m.time)}),h=xe(k,{minute:m.duration});e.set(m.id,{start:k,end:h,on:m.date,originalAt:m.time,for:m.duration,score:m.score}),t.add(h.time),o.has(k.time)?d.add({at:k.time,id:m.id}):o.add(k.time),qa(a,h)>0?this.disabledScoreEvts[m.id]=!0:this.disabledScoreEvts[m.id]=!1}),this.dailyScheduled=e,this.endTimesSet=t,console.log("done saveCurrentSchedule",o,d),d},canEnableEditScore(e,t){const a=_a(new Date);qa(a,t)>0?this.disabledScoreEvts[e]=!0:this.disabledScoreEvts[e]=!1},getEvents(e){const t=this.eventsMap[e]||[];if(t.length===1)t[0].side="full";else if(t.length===2){console.log("daEvents...LENGTH is 2?",t);const a=xe(ye(t[0].date),{minute:Ct(t[0].time)}),d=xe(a,{minute:t[0].duration}),o=xe(ye(t[1].date),{minute:Ct(t[1].time)}),m=xe(o,{minute:t[1].duration});Ea(o,a,d,!0)||Ea(m,a,d,!0)?(t[0].side="left",t[1].side="right"):(t[0].side="full",t[1].side="full")}return t},overlapOtherEvent(e,t,a){const d=[];let o=xe(t,{minute:0}),m=xe(o,{minute:a});console.log("overlapOtherEvent...targetTimes",o.time,m.time);let k=this.getTimeNumber(o),h=this.getTimeNumber(m);return k===!1||h===!1?(console.log("ERROR... overlapOtherEvent targetTimestamp error",t),d):(this.dailyScheduled.forEach((L,b,S)=>{if(b!=e){let I=this.getTimeNumber(L.start),E=this.getTimeNumber(L.end);if(I!==!1&&E!==!1){let H=k>=I&&k<E||h>=I&&h<=E,Z=I>=k&&h>=E;(H||Z)&&(console.log(`${b} overlapOtherEvent added`,H,Z),d.push(b))}else console.log("ERROR... overlapOtherEvent eventTimestamp error",L)}}),d)},recurChangeTime(e,t,a,d=!1){let o=this.dailyScheduled.get(e);if(o){console.log(`dragDirection...target>>${a.time}`);let m=Ct(a.time)-Ct(t.time);console.log(`dragDirection...${d}: ${m>0?"DOWN":"UP"}`);let k=null;m>0||d?k=xe(a,{minute:parseInt(t.duration)+10}):k=xe(a,{minute:-(parseInt(t.duration)+10)});let h=this.overlapOtherEvent(e,k,o.for);if(h.length>0){console.log("WARNING...more overlaps",h,k.time);let H=0,Z=h.length,G=this.getAnEvent(e);do console.log("CASCADE recurChangeTime:",h[H],k.time,G.title),this.recurChangeTime(h[H],G,k,d);while(++H<Z)}let[L,b]=this.changeEvtSchedule(e,k);console.log("overlappedEvtNew..",L,b,e,k);let S=m>0?xe(a,{minute:0}):xe(a,{minute:0}),[I,E]=this.changeEvtSchedule(t.id,S);console.log("recurChangeTime complete",I,E,t.id,S)}else console.log("ERROR overlapped event not found!",e)},changeEvtSchedule(e,t){let a=this.changeEventSchedule(e,t),d=this.updateScheduleMaps(e,t);return[a,d]},retrieveSameStart(e){let t=[];for(let[a,d]of this.dailyScheduled)d.start.time==e&&t.push(a);return t},retrieveSameEnd(e){let t=[];for(let[a,d]of this.dailyScheduled)d.end.time==e&&(console.log("retrieveSameEnd...FOUND",a,d),t.push(a));return t},enableEditScore(e){let t=this.retrieveSameEnd(e);console.log("enableEditScore...FOUND",t);for(let a of t)this.disabledScoreEvts[a]=!1},updateScheduleMaps(e,t){if(this.dailyScheduled.has(e)){let a=this.dailyScheduled.get(e),d=a.for,o=a.originalAt,m=a.end,k=xe(t,{minute:d}),h=a.score;return this.dailyScheduled.set(e,{on:t.date,originalAt:o,for:d,start:t,end:k,score:h}),this.endTimesSet.delete(m.time)?this.endTimesSet.add(k.time):console.log("updateScheduleMaps-endTimesSet NOT FOUND?!?"),this.canEnableEditScore(e,k),!0}else return console.log("updateScheduleMaps--euh not found?ERROR?",e,t),!1},changeEventSchedule(e,t){console.log("changeEventSchedule",e,t.time);for(let a=0;a<this.events.length;a++){let d=this.events[a];if(d.id===e)return d.canMove?d.time=t.time:this.$q.dialog({title:"Alert",cancel:!0,message:`Move evt: ${d.title} around to ${t.time}?`}).onOk(()=>{d.time=t.time}).onCancel(()=>{this.doNotify(`${d.title} Cancelled moving ...`)}),!0}return!1},doRemove(e){let t=this.events.length;for(var a=0;a<t;a++)if(this.events[a].id===e.id){this.events.splice(a,1),console.log("removed event spliced!",e.title),this.dailyScheduled.has(e.id)?this.dailyScheduled.delete(e.id):console.log("ERROR doRemove has no such item?@? ",e);return}},reset(){this.draggedItem=null,this.targetDrop=null,this.toAddE=null,this.chosenScore=null},doNotify(e,t=void 0,a="top"){this.$q.notify({color:t!==void 0?t:"negative",position:a,message:e,icon:t==null?"report_problem":"thumb_up"})},updateButtons(e=null,t=null,a=null){this.reloadSaved=e!=null?e:this.reloadSaved,this.loadDefault=t!=null?t:this.loadDefault,this.doSchedule=a!=null?a:this.doSchedule},fetchEventsForDate(e){let t=this.store.getEventsForDate(e);if(!t){console.log(`ERROR no evts found for ${e}...`,t);return}let a=this.deepCopy(this.storedEvents),d=[];a.forEach(o=>{let m=t[o.id];m&&(o.date=e,o.time=m.time,o.duration=m.duration,d.push(o))}),d=this.addPropsEventsTo(null,d),this.events=d,this.saveCurrentSchedule()},onRefresh(e){setTimeout(()=>{this.loadSavedEvents(this.currentDate),console.log("Refreshing...",this.currentDate),e()},1e3)},doSaveSchedule(){console.log("doSaveSchedule for",this.currentDate);const e={};this.dailyScheduled.forEach((t,a,d)=>{e[a]={duration:t.for,time:t.start.time}}),this.store.saveDailySchedule(this.currentDate,e),this.disableSaveSchedule=!0,this.doNotify(`doSaveSchedule for ${this.currentDate}`,"positive","top")},onAddEvent(){this.showEventDialog=!1,this.draggedItem=this.toAddE;let e=this.getAnEvent(this.toAddE.id);e||(console.log("onAddEvent...NEW",e,this.toAddE),e=this.toAddE,this.addAnEvent(this.toAddE));let t=this.overlapOtherEvent(e.id,this.targetDrop.timestamp,e.duration);console.log("AddEvent anyOverlap",t);let a=t.length;if(a>0){let d=0;do this.recurChangeTime(t[d],e,this.targetDrop.timestamp,!0);while(++d<a)}else if(this.dailyScheduled.has(e.id)){let[d,o]=this.changeEvtSchedule(e.id,this.targetDrop.timestamp);console.log("AddEvent that was there complete",d,o,e.id)}else console.log("ERROR ERROR NEW event with current events as:",this.events);this.disableSaveSchedule=!1,this.updateButtons(null,!0,!0),this.reset()},onPickConflictReso(e,t){for(let a of t)a.id==e.id?console.log("Skipping choice!",a):(console.log("Removing conflict event!",a),this.doRemove(a))},onSaveScore(e,t){let a=this.dailyScheduled.get(t);a?(console.log(`oooh onSaveScore from ${a.score} to ${e}`,t),a.score=e,this.store.saveSubProp(t,null,e)):console.log(`ERROR could not find event ${t}?!?`)},onDragStart(e,t){console.log("onDragStart",e,t),this.draggedItem=t},onDragEnter(e,t,a){return t==="goal-item"?(console.log("onDragEnter..goal-item",e,a),e.preventDefault()):(this.targetDrop=a,e.preventDefault()),!0},onDragOver(e,t,a){return e.preventDefault(),!0},onDragLeave(e,t,a){return!1},onDragEnd(e){console.log("onDragEnd",this.endTimesSet)},onDrop(e,t,a){console.log("onDrop",e,t,a);let d=this.getAnEvent(this.draggedItem.id);if(!d){console.log("onDrop ERROR",d,this.draggedItem);return}let o=null;if(t==="interval")console.log("onDrop...normal move with scope",a.timestamp),o=a.timestamp;else if(t==="goal-item"&&this.targetDrop)console.log("Dropping goal-item!!",e,t,this.targetDrop.timestamp),o=this.targetDrop.timestamp;else{console.log("Cannot drop here YO!!",e,t,a,this.targetDrop);return}if(!o){console.log("ERROR...no timestamp YO!!",e,t,a,this.targetDrop);return}let m=this.overlapOtherEvent(d.id,o,d.duration),k=m.length;if(k>0){console.log("WOAH WOAH onDrop...overlapp!",m);let h=0;do this.recurChangeTime(m[h],d,o);while(++h<k)}else{let[h,L]=this.changeEvtSchedule(d.id,o);console.log("onDrop no overlap complete",h,L,d.id)}this.disableSaveSchedule=!1,this.reset(),this.updateButtons(null,!0,null)},onDblClickEvent(e,t){this.$q.dialog({title:"Alert",cancel:!0,message:`Sure to remove evt: ${t.title} from today?`}).onOk(()=>{this.doRemove(t),this.saveCurrentSchedule(),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}).onCancel(()=>{console.log("Cancelled remove")})},onClickDate(e){console.log("onClickDate",e)},onClickTime(e){console.log("onClickTime..event",e),this.showEventDialog=!0,this.targetDrop=e.scope},onClickInterval(e){console.log("onClickInterval",e)},onClickHeadIntervals(e){console.log("onClickHeadIntervals",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)},onMouseEnter(e){console.log("onMouseAt",e)},onMouseLeave(e){console.log("onMouseLeave",JSON.stringify(e))},onMouseDownTime({scope:e,event:t}){if(console.log("onMouseDownTime",{scope:e,event:t}),Ha(t)){if(this.mobile===!0&&this.anchorTimestamp!==null&&this.otherTimestamp!==null&&St(this.anchorTimestamp)===St(this.otherTimestamp)){this.otherTimestamp=e.timestamp,this.mouseDown=!1;return}this.mouseDown=!0,this.anchorTimestamp=e.timestamp,this.otherTimestamp=e.timestamp}},onMouseUpTime({scope:e,event:t}){if(console.log("onMouseUpTime",{scope:e,event:t}),this.mobile!==!0&&Ha(t)&&(this.otherTimestamp=e.timestamp,this.mouseDown=!1),!this.mousedown){let a=this.startEndTimes;console.log("onMouseUpTime range",a)}},onMouseMoveTime({scope:e,event:t}){this.mobile!==!0&&this.mouseDown===!0&&(this.otherTimestamp=e.timestamp)},scrollToEvent(e){this.$refs.calendar.scrollToTime(e.time,350)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.doReset=!0,this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onChange(e){let t=this.store.hasEventsForDate(this.currentDate),a=it();e.start==this.currentDate&&this.currentDate==a?(console.log("onChange and all dates are ALIKE!"),this.events=this.addPropsEventsTo(e.start,this.doReset?this.returnNewEvts(!0):this.events),this.doReset=!1):(console.log("onChange..something is different?",e.start,this.currentDate,a,t),this.events=this.addPropsEventsTo(this.currentDate,this.returnNewEvts(!0)),this.disableSaveSchedule=!0);let d=this.saveCurrentSchedule();d.size>0&&(console.log("onChange..has some conflicts",d),t?this.onReloadSaved(d):this.fixConflicts(d)),this.updateButtons(t,!t,!t),t&&console.log("onChange and has saved DateEvts!!CHANGE?")},fixConflicts(e){const t=o=>{let m=0,k=null;for(let h of o){let L=this.getAnEvent(h);if(L){let b=this.parentGoalsMap.get(L.parentGoal);b?b.priority>m&&(m=b.priority,k=L):console.log("findhigherPrio..ERROR no PARENT found?",L)}else console.log("findhigherPrio..ERROR not found?",h)}return console.log("findhigherPrio..Highest priority be",k,m),k};let a=function(o){const m=o.split(/on/);return m.length!=2?(console.log(`parseScore error?${o}`,m),-1):m[1]-m[0]};const d=o=>({label:o.title+" at "+o.score,value:o.id});for(let o of e){let m=null,k=this.retrieveSameStart(o.at);console.log("fixConflicts...results",k,o);let h=[],L="";for(let b of k){let S=this.getAnEvent(b);S?(h.push(S),L+=S.title+","):console.log("fixConflicts...ERROR not found?",b)}this.$q.dialog({title:"Alert",cancel:!1,persistent:!0,message:`${L} are conflicting.
 Choose how to solve this...`,options:{type:"radio",model:"opt1",items:[{label:"Resolve by Highest Priority",value:"opt1",color:"secondary"},{label:"Resolve by lowest Score",value:"opt2"},{label:"Pick event",value:"opt3"}]}}).onOk(b=>{if(b=="opt3"){this.$q.dialog({title:"Alert",cancel:!1,persistent:!0,message:"Choose the event to schedule",options:{type:"radio",model:"",items:h.map(d)}}).onOk(I=>{console.log("Chosen Manually",I);let E=this.getAnEvent(I);E?m=E:console.log("ERROR...Manually choice not find",I)}).onCancel(()=>{console.log("Cancelled loading...")}).onDismiss(()=>{console.log("oooh dismissed inner...",m),this.onPickConflictReso(m,h)});let S=this.saveCurrentSchedule();console.log("fixConflicts inner...after conflicts?",S),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}else if(b=="opt2"){console.log(">>>> OK, Option Score",b);let S=0,I=null;for(let E of h){let H=a(E.score);H>-1&&H>=S?(S=H,I=E):console.log("ERROR...parseScore?",H,E)}I&&(console.log("Option Score Chosen",I),m=I)}else m=t(k),console.log(">>>> OK, Higher prio",b,m);console.log("Pick be",m)}).onCancel(()=>{console.log("Cancelled loading...")}).onDismiss(()=>{if(console.log("Dismissing...",m),m){this.onPickConflictReso(m,h);let b=this.saveCurrentSchedule();console.log("fixConflicts outer...after conflicts?",b),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}})}return!0},onReloadSaved(e=null){console.log("doReloadSaved:",this.currentDate),this.$q.dialog({title:"Alert",cancel:!0,message:"Some saved schedule found, load it up?"}).onOk(()=>(this.fetchEventsForDate(this.currentDate),this.updateButtons(!1,!0,!1),this.reset(),!0)).onCancel(()=>(console.log("Cancelled loading..."),e&&(console.log("dont wanna reload eh..fix conflicts then",e),this.fixConflicts(e)),this.updateButtons(!0,!1,!0),!1))},onLoadDefault(){this.events=null,console.log("doLoadDefault:",this.currentDate),this.events=this.addPropsEventsTo(this.currentDate,this.returnNewEvts(!0)),this.saveCurrentSchedule();let e=this.store.hasEventsForDate(this.currentDate);this.updateButtons(e,!1,!0),this.disableSaveSchedule=!0,this.chosenScore=null},onReloadWithScore(){if(this.chosenScore==null){this.doNotify("Ayo select a score!");return}let e=this.store.fetchGoalsWithMinScore(this.chosenScore);console.log("bringScorey:",this.currentDate,this.chosenScore,e),e=this.addPropsEventsTo(this.currentDate,e),this.events=e,this.saveCurrentSchedule(),this.updateButtons(!1,!0,!0),this.disableSaveSchedule=!1},deepCopy(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(a=>this.deepCopy(a));const t={};for(let a in e)e.hasOwnProperty(a)&&(t[a]=this.deepCopy(e[a]));return t}}}),Va=e=>(un("data-v-71ac3096"),e=e(),dn(),e),Nn={key:0,class:"q-gutter-md"},Kn={key:1,class:"subcontent"},$n={class:"float-right"},Qn={key:0},zn={key:1},Un={key:2},Gn={class:"row justify-center"},Xn={style:{display:"flex","max-width":"800px",width:"100%",height:"400px"}},Yn={style:{display:"flex","justify-content":"center","flex-wrap":"wrap",padding:"2px"}},jn={class:"title q-calendar__ellipsis"},Zn=["onDblclick","onDragstart"],Jn={class:"title q-calendar__ellipsis"},pn=Va(()=>at("div",{class:"text-h3"},"Pick event",-1)),el={class:"q-ml-md event-select"},tl={class:"row justify-center"},al=Va(()=>at("br",null,null,-1)),nl={class:"scroll overflow-auto",style:{height:"360px",width:"100%"}};function ll(e,t,a,d,o,m){const k=fa("add-goal-form"),h=fa("navigation-bar"),L=fa("q-calendar-day");return Ne(),Ze(kt,null,[e.showForm?(Ne(),Ze("div",Nn,[_e(ft,{class:"q-pl-xl justify-center",color:"","text-color":"green",elevated:"",label:"HideForm",onClick:t[0]||(t[0]=b=>e.showGoalForm=!e.showGoalForm),"no-caps":""}),_e(k)])):Et("",!0),e.showForm?Et("",!0):(Ne(),Ze("div",Kn,[_e(sn,{onRefresh:e.onRefresh},{default:Le(()=>[_e(h,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),at("div",$n,[e.reloadSaved?(Ne(),Ze("div",Qn,[_e(ft,{class:"q-mt-xl",color:"","text-color":"green",elevated:"",label:"Load Saved",onClick:e.onReloadSaved,"no-caps":""},null,8,["onClick"])])):Et("",!0),e.loadDefault?(Ne(),Ze("div",zn,[_e(ft,{class:"q-mt-xl",color:"","text-color":"blue",elevated:"",label:"Defaults",onClick:e.onLoadDefault,"no-caps":""},null,8,["onClick"])])):Et("",!0),e.doSchedule?(Ne(),Ze("div",Un,[_e(Fn,{split:"",color:"",class:"q-mt-xl","text-color":"teal",elevated:"",label:e.chosenScoreLabel,onClick:e.onReloadWithScore,"no-caps":""},{default:Le(()=>[_e(cn,null,{default:Le(()=>[(Ne(!0),Ze(kt,null,ra(e.scoreOptions,b=>Wt((Ne(),va(hn,{key:b.id,clickable:"",onClick:S=>e.chosenScore=b},{default:Le(()=>[_e(fn,null,{default:Le(()=>[_e(vn,null,{default:Le(()=>[Rt(Ft(b),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Hn]])),128))]),_:1})]),_:1},8,["label","onClick"])])):Et("",!0)])]),_:1},8,["onRefresh"]),at("div",Gn,[at("div",Xn,[_e(L,{ref:"calendar",view:"day",modelValue:e.currentDate,"onUpdate:modelValue":t[5]||(t[5]=b=>e.currentDate=b),"drag-enter-func":e.onDragEnter,"drag-over-func":e.onDragOver,"drag-leave-func":e.onDragLeave,"drop-func":e.onDrop,animated:"",bordered:"",hoverable:"","no-active-date":"","transition-next":"slide-left","transition-prev":"slide-right","time-clicks-clamped":"","interval-minutes":15,"interval-count":96,"interval-height":28,"selected-start-end-dates":e.startEndTimes,onChange:e.onChange,onClickDate:e.onClickDate,onClickTime:e.onClickTime,onClickInterval:e.onClickInterval,onClickHeadIntervals:e.onClickHeadIntervals,onClickHeadDay:e.onClickHeadDay,onMousedownTime:e.onMouseDownTime,onMouseupTime:e.onMouseUpTime,onMousemoveTime:e.onMouseMoveTime},{"head-day-event":Le(({scope:{timestamp:b}})=>[at("div",Yn,[(Ne(!0),Ze(kt,null,ra(e.eventsMap[b.date],S=>(Ne(),Ze(kt,{key:S.id},[S.time?(Ne(),va(Ca,{key:1,class:ha(e.badgeClasses(S,"header")),style:It([e.badgeStyles(S,"header"),{margin:"1px",width:"10px","max-width":"10px",height:"10px","max-height":"10px",cursor:"pointer"}]),onClick:I=>e.scrollToEvent(S)},{default:Le(()=>[_e(ya,null,{default:Le(()=>[Rt(Ft(S.time+" - "+S.title),1)]),_:2},1024)]),_:2},1032,["class","style","onClick"])):(Ne(),va(Ca,{key:0,class:ha(e.badgeClasses(S,"header")),style:It([e.badgeStyles(S,"header"),{width:"100%",cursor:"pointer",height:"12px","font-size":"10px",margin:"1px"}])},{default:Le(()=>[at("div",jn,[Rt(Ft(S.title)+" ",1),_e(ya,null,{default:Le(()=>[Rt(Ft(S.details),1)]),_:2},1024)])]),_:2},1032,["class","style"]))],64))),128))])]),"day-container":Le(({scope:{days:b}})=>[e.hasDate(b)?(Ne(),Ze(kt,{key:0},[at("div",{class:"day-view-current-time-indicator",style:It(e.style)},null,4),at("div",{class:"day-view-current-time-line",style:It(e.style)},null,4)],64)):Et("",!0)]),"day-body":Le(({scope:{timestamp:b,timeStartPos:S,timeDurationHeight:I}})=>[(Ne(!0),Ze(kt,null,ra(e.getEvents(b.date),E=>(Ne(),Ze(kt,{key:E.id},[E.time!==void 0?(Ne(),Ze("div",{key:0,class:ha(["my-event",e.badgeClasses(E,"body")]),style:It(e.badgeStyles(E,"body",S,I)),draggable:!0,onDblclick:ma(H=>e.onDblClickEvent(H,E),["prevent"]),onDragstart:ma(H=>e.onDragStart(H,E),["stop"]),onDragend:t[1]||(t[1]=ma((...H)=>e.onDragEnd&&e.onDragEnd(...H),["stop"])),onDrop:t[2]||(t[2]=H=>e.onDrop(H,"goal-item",e.scope)),onDragenter:t[3]||(t[3]=H=>e.onDragEnter(H,"goal-item",e.scope)),onDragover:t[4]||(t[4]=H=>e.onDragOver(H,"goal-item",e.scope))},[at("div",Jn,[Rt(Ft(E.title)+" ",1),_e(ya,null,{default:Le(()=>[Rt(Ft(E.time+" - "+E.details+" :"+E.score),1)]),_:2},1024),_e(Tn,{modelValue:E.score,"onUpdate:modelValue":H=>E.score=H,"auto-save":"",disable:e.disabledScoreEvts[E.id],onSave:H=>e.onSaveScore(H,E.id)},{default:Le(H=>[_e(en,{modelValue:H.value,"onUpdate:modelValue":Z=>H.value=Z,dense:"",autofocus:"",onKeyup:tn(H.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","disable","onSave"])])],46,Zn)):Et("",!0)],64))),128))]),_:1},8,["modelValue","drag-enter-func","drag-over-func","drag-leave-func","drop-func","selected-start-end-dates","onChange","onClickDate","onClickTime","onClickInterval","onClickHeadIntervals","onClickHeadDay","onMousedownTime","onMouseupTime","onMousemoveTime"])]),_e(pa,{modelValue:e.showEventDialog,"onUpdate:modelValue":t[7]||(t[7]=b=>e.showEventDialog=b),"transition-show":"rotate","transition-hide":"rotate"},{default:Le(()=>[_e(an,null,{default:Le(()=>[_e(nn,null,{default:Le(()=>[pn]),_:1}),_e(ln),at("div",el,[_e(mn,{modelValue:e.toAddE,"onUpdate:modelValue":t[6]||(t[6]=b=>e.toAddE=b),options:e.canbeScheduled,"option-value":"id","option-label":"title",label:"Sub Goal","item-aligned":""},null,8,["modelValue","options"])]),_e(rn,{align:"right"},{default:Le(()=>[_e(ft,{flat:"",label:"Add",color:"primary",onClick:e.onAddEvent},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),at("div",tl,[_e(ft,{class:"q-mt-xl",color:"Green","text-color":"blue",elevated:"",label:"SaveSchedule",disable:e.doDisableSaveSchedule,onClick:e.doSaveSchedule,"no-caps":""},null,8,["disable","onClick"]),_e(ft,{class:"q-mt-xl",color:"","text-color":"green",elevated:"",label:"ShowForm",onClick:t[8]||(t[8]=b=>e.showGoalForm=!e.showGoalForm),"no-caps":""})]),al,at("div",nl,[(Ne(!0),Ze(kt,null,ra(e.storedEvents,(b,S)=>(Ne(),Ze("div",{key:S,class:"col-12",style:{"font-size":"10px","line-height":"10px","max-height":"14px","min-height":"14px",padding:"2px 2px","white-space":"nowrap"}},Ft(b),1))),128))])]))],64)}var sl=Ja(Vn,[["render",ll],["__scopeId","data-v-71ac3096"]]);export{sl as default};
