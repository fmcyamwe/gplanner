import{c as O}from"./utiFunc.ac4b7097.js";import{j as Q,r as v,c as j,aq as D,n as A,av as R,h as f,g as H,N as c,_ as P,d as U,E as I,O as T,M as b,K as w,H as n,G as d,J as z,a1 as y,a5 as G,a3 as K,bc as M,aO as N,bd as F,aQ as J}from"./index.8c8e6158.js";import{c as W}from"./TouchPan.1ebb2fcb.js";import"./QItem.fbefacd4.js";function p(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const o=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const a=e.valueOf();if(Object(a)!==a){const i=new e.constructor(a);return t.set(e,i),i}}return t.set(e,o),e instanceof Set?e.forEach(a=>{o.add(p(a,t))}):e instanceof Map&&e.forEach((a,i)=>{o.set(i,p(a,t))}),Object.assign(o,...Object.keys(e).map(a=>({[a]:p(e[a],t)})))}var L=Q({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:a}=H(),{$q:i}=a,u=v(null),r=v(""),l=v("");let g=!1;const E=j(()=>D({initialValue:r.value,validate:e.validate,set:h,cancel:S,updatePosition:C},"value",()=>l.value,s=>{l.value=s}));function h(){e.validate(l.value)!==!1&&(m()===!0&&(o("save",l.value,r.value),o("update:modelValue",l.value)),V())}function S(){m()===!0&&o("cancel",l.value,r.value),V()}function C(){A(()=>{u.value.updatePosition()})}function m(){return R(l.value,r.value)===!1}function V(){g=!0,u.value.hide()}function q(){g=!1,r.value=p(e.modelValue),l.value=p(e.modelValue),o("beforeShow")}function k(){o("show")}function _(){g===!1&&m()===!0&&(e.autoSave===!0&&e.validate(l.value)===!0?(o("save",l.value,r.value),o("update:modelValue",l.value)):o("cancel",l.value,r.value)),o("beforeHide")}function B(){o("hide")}function $(){const s=t.default!==void 0?[].concat(t.default(E.value)):[];return e.title&&s.unshift(f("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&s.push(f("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[f(c,{flat:!0,color:e.color,label:e.labelCancel||i.lang.label.cancel,onClick:S}),f(c,{flat:!0,color:e.color,label:e.labelSet||i.lang.label.set,onClick:h})])),s}return Object.assign(a,{set:h,cancel:S,show(s){u.value!==null&&u.value.show(s)},hide(s){u.value!==null&&u.value.hide(s)},updatePosition:C}),()=>{if(e.disable!==!0)return f(W,{ref:u,class:"q-popup-edit",cover:e.cover,onBeforeShow:q,onShow:k,onBeforeHide:_,onHide:B,onEscapeKey:S},$)}}});const X=U({name:"GoalyEnd",props:{disabledScore:Boolean,title:String,id:Number,startTime:String,details:String,notes:String,score:String,happeningNow:Boolean},data(){const e=v(""),t=v(!1);return{errorMessageScore:e,errorScore:t,note:this.notes,daScore:this.score}},emits:["saveScore","endNow","deleteNow","addMins"],computed:{aScore:{get(){return this.daScore},set(e){console.log("aScore getting set",e,this.id),this.aScorey(e)&&(this.daScore=e)},cancel(){console.log("aScore remove?",this.id)}},aNote:{get(){return this.note},set(e){this.note=e}},userIconStyle(){return{color:this.disabledScore===!0?"red":"blue",cursor:"pointer"}},ClassNStyle(){let e="title q-calendar__ellipsis";return this.disabledScore===!1&&this.happeningNow===!0?e+" mooh":e},showBtnStyle(){return{display:this.disabledScore===!0&&this.happeningNow===!0?"flex":"none","text-align":"center","margin-left":"1em",height:"auto"}}},watch:{title(e){console.log("titleValue:",e)}},methods:{onDelete(){this.$emit("deleteNow")},onSave(){if(this.errorMessageScore!=""||this.errorScore){console.log("ERROR saveScore",this.aScore,this.errorMessageScore);return}this.$emit("saveScore",this.aScore,this.id,this.aNote)},wannaEnd(){this.$emit("endNow",this.id)},wannaAdd(e){this.$emit("addMins",this.id,e)},aScorey(e){var t=/^\don\d$/g,o=e.match(t)||[];return o&&e!==o[0]?(this.errorScore=!0,this.errorMessageScore=`Error: ${e} Unsaved.Must format as: #on#`,!1):(this.errorScore=!1,this.errorMessageScore="",!0)},reset(){this.errorScore=!1,this.errorMessageScore=""}}}),Y={class:"title q-calendar__ellipsis"},Z={class:"q-pl-sm"},x={class:"title"};function ee(e,t,o,a,i,u){return I(),T("div",Y,[b("div",Z,w(` ${e.title} (${e.score})`),1),n(O,null,{default:d(()=>[z(w("("+e.id+") "+e.details),1)]),_:1}),b("div",{style:G(e.showBtnStyle)},[n(c,{"no-caps":"",label:"Add5",onClick:t[0]||(t[0]=r=>e.wannaAdd(5))}),n(c,{"no-caps":"",label:"Add10",class:"q-mx-md poppy",onClick:t[1]||(t[1]=r=>e.wannaAdd(10))}),n(y,{vertical:!0}),n(c,{"no-caps":"",label:"End-Now",onClick:e.wannaEnd},null,8,["onClick"])],4),n(L,{modelValue:e.aScore,"onUpdate:modelValue":t[3]||(t[3]=r=>e.aScore=r),disable:e.disabledScore,"auto-save":"","touch-position":""},{default:d(r=>[n(K,{class:"bg-secondary text-white"},{default:d(()=>[b("div",x," NoteyOnScore :: "+w(e.title),1),n(M,{class:"q-gutter-md"},{default:d(()=>[n(N,{modelValue:r.value,"onUpdate:modelValue":l=>r.value=l,dense:"",hint:"format: #on#",error:e.errorScore,"error-message":e.errorMessageScore},null,8,["modelValue","onUpdate:modelValue","error","error-message"])]),_:2},1024),n(M,{class:"q-gutter-md"},{default:d(()=>[n(N,{filled:"",modelValue:e.aNote,"onUpdate:modelValue":t[2]||(t[2]=l=>e.aNote=l),label:"Note",autogrow:"","lazy-rules":"","item-aligned":"",rules:[l=>l&&l.length>0||"Add a note..."]},null,8,["modelValue","rules"])]),_:1}),n(y,{dark:""}),n(F,{class:"q-gutter-md q-mx-md inputBtn"},{default:d(()=>[n(c,{label:"Save",flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[J(r.set,["stop","prevent"]),e.onSave]},null,8,["onClick"]),n(y,{vertical:!0}),n(c,{label:"Del",flat:"",dense:"",color:"negative",icon:"delete_forever",onClick:e.onDelete},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","disable"])])}var re=P(X,[["render",ee],["__scopeId","data-v-08ad3b23"]]);export{re as default};
