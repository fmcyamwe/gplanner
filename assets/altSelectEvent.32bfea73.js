import{F as x,G as r,R as m,J as s,I as i,O as o,L as h,M as B,a3 as C,H as p,Q as f,K as u,a4 as k,bA as y,ap as b,P as A,a5 as V}from"./index.8d9f491f.js";import{Q as v}from"./QSelect.f46b6805.js";import{Q as q}from"./QKnob.df644cff.js";import{Q as F}from"./QSpace.6dba9f95.js";import{w as g}from"./utiFunc.f569f737.js";import"./touch.9135741d.js";import"./goalStorage.7a0c2073.js";import"./QItem.12335e25.js";const P={name:"altSelectEvent",props:{allUnscheduled:Array,unscheduledParents:Object,toBalance:Number,at:String},data(){return{doForce:!1,selectedE:null,dura:null,useBalance:!1,allEvts:this.allUnscheduled,selectedParent:null,atTime:g(this.at)}},emits:["onPickEvent","doCancel"],computed:{unscheduledP:{get(){let l=[];for(let e in this.unscheduledParents)l.push(this.unscheduledParents[e]);return l}},toFilterBy:{get(){return this.selectedParent},set(l){this.selectedParent=l,this.toAdd&&(this.toAdd=null)}},filteredUnScheduled:{get(){return this.selectedParent?this.allUnscheduled.filter(l=>l.parentGoal==this.selectedParent.id):this.allEvts}},toAdd:{get(){return this.selectedE},set(l){this.selectedE=l,this.dura=(l==null?void 0:l.duration)||0}}},methods:{clear(){this.toFilterBy=null,this.toAdd=null},onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance,this.dura),this.doForce=!1,this.useBalance=!1,this.toAdd=null},goalyColor(l){var e,n,c;return this.toAdd==null?"":l=="c"?"bg-"+((e=this.toFilterBy)==null?void 0:e.color)+" "+((n=this.toFilterBy)==null?void 0:n.ic):(c=this.toFilterBy)==null?void 0:c.color},labely(){var l;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":` Of: ${((l=this.toFilterBy)==null?void 0:l.title)||""}`},classy(){return this.toAdd==null||this.toAdd==null||this.toAdd==""?"q-gutter-md q-px-md":"q-px-md"},canBalance(){var e,n;let l=this.toBalance+parseInt((e=this.toAdd)==null?void 0:e.duration)||((n=this.toAdd)==null?void 0:n.isAlternative);return this.toAdd==null?!1:l}}},Q={class:"q-pa-sm"},S={class:"q-mx-md do-center"},_={class:"q-mx-md event-select"},E={key:0,class:"q-mx-md event-select"},U={key:1,class:"q-mx-auto q-px-sm"};function w(l,e,n,c,d,t){return r(),m("div",Q,[s(V,null,{default:i(()=>[o("div",null,[e[7]||(e[7]=o("div",{class:"text-h3 title"},"Select event",-1)),o("div",S,[e[6]||(e[6]=h(" @ ")),o("em",null,B(d.atTime),1)])]),s(C),o("div",_,[s(v,{modelValue:t.toFilterBy,"onUpdate:modelValue":e[0]||(e[0]=a=>t.toFilterBy=a),options:t.unscheduledP,class:"q-mx-md","option-value":"id","option-label":"title",popupContentClass:"q-px-sm","input-debounce":"0",label:"Parent Goal",behavior:"menu"},{default:i(()=>[t.toFilterBy?(r(),p(f,{key:0,name:"clear",size:"14px",onClick:t.clear},null,8,["onClick"])):u("",!0)]),_:1},8,["modelValue","options"])]),d.selectedParent?(r(),m("div",E,[s(v,{modelValue:t.toAdd,"onUpdate:modelValue":e[1]||(e[1]=a=>t.toAdd=a),options:t.filteredUnScheduled,class:k(t.classy()),"option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:t.labely(),"options-selected-class":t.goalyColor("c"),"label-color":t.goalyColor("l"),"input-debounce":"0",behavior:"menu"},{before:i(()=>[t.toAdd?(r(),p(f,{key:0,name:d.selectedParent.ic,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):u("",!0)]),_:1},8,["modelValue","options","class","label","options-selected-class","label-color"])])):u("",!0),t.toAdd?(r(),m("div",U,[e[8]||(e[8]=h(" Duration (min) ")),s(q,{min:5,max:120,thickness:.22,step:5,modelValue:d.dura,"onUpdate:modelValue":e[2]||(e[2]=a=>d.dura=a),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md"},null,8,["modelValue"])])):u("",!0),e[10]||(e[10]=o("br",null,null,-1)),s(y,{align:"center",class:"q-mx-auto"},{default:i(()=>[s(b,{dense:"",modelValue:d.doForce,"onUpdate:modelValue":e[3]||(e[3]=a=>d.doForce=a),label:"Force In",color:"teal",class:"q-mx-sm"},null,8,["modelValue"]),s(F),t.canBalance()?(r(),p(b,{key:0,dense:"",modelValue:d.useBalance,"onUpdate:modelValue":e[4]||(e[4]=a=>d.useBalance=a),label:"Use Balance",color:"brown"},null,8,["modelValue"])):u("",!0)]),_:1}),s(y,{align:"center"},{default:i(()=>[s(A,{flat:"",label:"Cancel",color:"primary",onClick:e[5]||(e[5]=a=>l.$emit("doCancel"))}),s(A,{elevated:"",color:"primary",align:"between",onClick:t.onAddClicked},{default:i(()=>e[9]||(e[9]=[o("div",{class:"q-mx-md"}," Add ",-1)])),_:1},8,["onClick"])]),_:1})]),_:1})])}var j=x(P,[["render",w],["__scopeId","data-v-09a33a4c"]]);export{j as default};
