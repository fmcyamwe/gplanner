import{_ as S,d as N,E as b,F as h,M as k,I as i,K as d,H as c,ac as m,aa as v,U as $,S as g,O as C,N as M,J as f,ad as L,ae as Q}from"./index.8b819cea.js";import{N as E,Q as H,t as D,P as V,c as u,i as _,S as T}from"./NavigationBar.3d82843a.js";/* empty css                             */import{u as B}from"./goalStorage.56e89d54.js";import{u as F}from"./use-quasar.2197fd2b.js";const G=N({name:"TaskDark",components:{NavigationBar:E,QCalendarTask:H},data(){return{selectedDate:D(),selectedMonth:"",allMonths:V("long","en-US"),startDate:D(),endDate:D(),store:B(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:F()}},computed:{parsedTasks(){const e=u(this.startDate),s=u(this.endDate),n=[];for(let o=0;o<this.tasks.length;++o){const t=this.tasks[o];for(let l=0;l<t.logged.length;++l){const r=u(t.logged[l].date);if(_(r,e,s)){n.push(t);break}}}return n},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){const e=new Date,s=e.getFullYear(),n=T(e.getMonth()+1,2);let o=this.store.fetchAllTaskSummary();if(o.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=o,console.log("weeee tasks:",this.tasks);const t=l=>{l.logged.forEach(r=>{const p=r.date.slice(-2);[s,T(n,2),T(p,2)].join("-")})};this.tasks.forEach(l=>{t(l),l.children!==void 0&&l.children.forEach(r=>{t(r)})})},methods:{getLogged(e,s,n=null){const o=[];if(s.length==0)return console.log("Empty getLogged?!?",e,n),o;for(let t=0;t<s.length;++t)if(s[t].date===e){o.push({logged:s[t].logged});break}return o},getLoggedSummary(e){let s=0;const n=(o,t)=>e===t.date?o+t.logged:o;for(const o in this.tasks)s+=this.tasks[o].logged.reduce(n,0);return s},sum(e,s,n){const o=(t,l)=>{const r=u(l.date);return _(r,e,s)?t+l.logged:t};return n.logged.reduce(o,0)},getTasks(e,s,n){const o=[];for(let t=0;t<n.logged.length;++t){const l=u(n.logged[t].date);if(_(l,e,s)){o.push(n);break}}return o},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,s){let n=0;const o=(t,l)=>{const r=u(l.date);return _(r,e,s)?t+l.logged:t};for(const t in this.tasks)n+=this.tasks[t].logged.reduce(o,0);return n},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let s=e.days[0].month;console.log("onChange",s,e),this.selectedMonth=this.allMonths[s-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),w=e=>(L("data-v-3b4b77bb"),e=e(),Q(),e),I={class:"subcontent"},P={class:"row justify-center"},U={style:{display:"flex","max-width":"800px",width:"100%"}},j={class:"header ellipsis",style:{"font-weight":"600"}},q={class:"issue ellipsis"},A=w(()=>d("div",{class:"key"},"Key",-1)),K=w(()=>d("div",{class:"logged"},"Logged",-1)),O={class:"issue ellipsis"},J={class:"key"},R={class:"logged"},Y={key:0,class:"logged-time",style:{"font-weight":"800"}},z={key:1,class:"logged-time"},W={class:"summary ellipsis"},X={class:"title ellipsis"},Z={class:"total"},x={class:"logged-time"},ee=w(()=>d("br",null,null,-1)),te={key:0,class:"column justify-center items-center"};function se(e,s,n,o,t,l){const r=b("navigation-bar"),p=b("q-calendar-task");return h(),k("div",I,[i(r,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),d("div",P,[d("div",U,[i(p,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":s[0]||(s[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":s[1]||(s[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":s[2]||(s[2]=a=>e.footerTasks=a),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":c(({})=>[d("div",j,[d("div",q,g(e.getViewedMonth),1),A,K])]),task:c(({scope:a})=>[(h(!0),k(C,null,M(e.getTasks(a.start,a.end,a.task),y=>(h(),k("div",{key:y.key,class:"header ellipsis"},[d("div",O,g(a.task.title)+" ",1),d("div",J,g(a.task.key),1),d("div",R,g(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:c(({scope:a})=>[(h(!0),k(C,null,M(e.getLogged(a.timestamp.date,a.task.logged),y=>(h(),k(C,{key:y},[a.task.children!==void 0?(h(),k("div",Y,g(y.logged),1)):(h(),k("div",z,g(y.logged),1))],64))),128))]),"footer-task":c(({scope:a})=>[d("div",W,[d("div",X,g(a.footer.title),1),d("div",Z,g(e.totals(a.start,a.end)),1)])]),"footer-day":c(({scope:a})=>[d("div",x,g(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),ee,e.tasks.length<=0?(h(),k("div",te,[i(m,null,{default:c(()=>[f(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),i(v),i(m,null,{default:c(()=>[f(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),i(v),i(m,null,{default:c(()=>[f(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),i(v),i(m,null,{default:c(()=>[f(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),i(v),i(m,null,{default:c(()=>[f(" 5. Check out the summary of all goals here! ")]),_:1})])):$("",!0)])}var re=S(G,[["render",se],["__scopeId","data-v-3b4b77bb"]]);export{re as default};
