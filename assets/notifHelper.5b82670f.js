import{_ as te}from"./index.640fc71d.js";import"./QCalendar.c936b442.js";import{a as ie,p as oe,b as ne}from"./QCalendarTask.acd5225c.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const re=t=>{const e=new Map;e.set("web",{name:"web"});const i=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(o,a)=>{i.platforms.set(o,a)},r=o=>{i.platforms.has(o)&&(i.currentPlatform=i.platforms.get(o))};return i.addPlatform=n,i.setPlatform=r,i},se=t=>t.CapacitorPlatforms=re(t),J=se(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});J.addPlatform;J.setPlatform;var C;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(C||(C={}));class T extends Error{constructor(e,i,n){super(e),this.message=e,this.code=i,this.data=n}}const ae=t=>{var e,i;return t!=null&&t.androidBridge?"android":!((i=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||i===void 0)&&i.bridge?"ios":"web"},le=t=>{var e,i,n,r,o;const a=t.CapacitorCustomPlatform||null,s=t.Capacitor||{},u=s.Plugins=s.Plugins||{},l=t.CapacitorPlatforms,O=()=>a!==null?a.name:ae(t),b=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||O,S=()=>b()!=="web",B=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.isNativePlatform)||S,G=c=>{const d=D.get(c);return!!(d!=null&&d.platforms.has(b())||_(c))},W=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||G,K=c=>{var d;return(d=s.PluginHeaders)===null||d===void 0?void 0:d.find(L=>L.name===c)},_=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||K,V=c=>t.console.error(c),z=(c,d,L)=>Promise.reject(`${L} does not have an implementation of "${d}".`),D=new Map,Q=(c,d={})=>{const L=D.get(c);if(L)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),L.proxy;const P=b(),N=_(c);let v;const Y=async()=>(!v&&P in d?v=typeof d[P]=="function"?v=await d[P]():v=d[P]:a!==null&&!v&&"web"in d&&(v=typeof d.web=="function"?v=await d.web():v=d.web),v),Z=(f,g)=>{var p,w;if(N){const y=N==null?void 0:N.methods.find(h=>g===h.name);if(y)return y.rtype==="promise"?h=>s.nativePromise(c,g.toString(),h):(h,A)=>s.nativeCallback(c,g.toString(),h,A);if(f)return(p=f[g])===null||p===void 0?void 0:p.bind(f)}else{if(f)return(w=f[g])===null||w===void 0?void 0:w.bind(f);throw new T(`"${c}" plugin is not implemented on ${P}`,C.Unimplemented)}},x=f=>{let g;const p=(...w)=>{const y=Y().then(h=>{const A=Z(h,f);if(A){const H=A(...w);return g=H==null?void 0:H.remove,H}else throw new T(`"${c}.${f}()" is not implemented on ${P}`,C.Unimplemented)});return f==="addListener"&&(y.remove=async()=>g()),y};return p.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(p,"name",{value:f,writable:!1,configurable:!1}),p},k=x("addListener"),R=x("removeListener"),ee=(f,g)=>{const p=k({eventName:f},g),w=async()=>{const h=await p;R({eventName:f,callbackId:h},g)},y=new Promise(h=>p.then(()=>h({remove:w})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await w()},y},j=new Proxy({},{get(f,g){switch(g){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?ee:k;case"removeListener":return R;default:return x(g)}}});return u[c]=j,D.set(c,{name:c,proxy:j,platforms:new Set([...Object.keys(d),...N?[P]:[]])}),j},X=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||Q;return s.convertFileSrc||(s.convertFileSrc=c=>c),s.getPlatform=b,s.handleError=V,s.isNativePlatform=B,s.isPluginAvailable=W,s.pluginMethodNoop=z,s.registerPlugin=X,s.Exception=T,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},ce=t=>t.Capacitor=le(t),E=ce(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),U=E.registerPlugin;E.Plugins;class q{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,i){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(i);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,i);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,i,n){const r=this.listeners[e];if(!r){if(n){let o=this.retainedEventArguments[e];o||(o=[]),o.push(i),this.retainedEventArguments[e]=o}return}r.forEach(o=>o(i))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,i){this.windowListeners[i]={registered:!1,windowEventName:e,pluginEventName:i,handler:n=>{this.notifyListeners(i,n)}}}unimplemented(e="not implemented"){return new E.Exception(e,C.Unimplemented)}unavailable(e="not available"){return new E.Exception(e,C.Unavailable)}async removeListener(e,i){const n=this.listeners[e];if(!n)return;const r=n.indexOf(i);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const i=this.retainedEventArguments[e];!i||(delete this.retainedEventArguments[e],i.forEach(n=>{this.notifyListeners(e,n)}))}}const I=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),M=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class de extends q{async getCookies(){const e=document.cookie,i={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=M(r).trim(),o=M(o).trim(),i[r]=o}),i}async setCookie(e){try{const i=I(e.key),n=I(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${i}=${n||""}${r}; path=${o}; ${a};`}catch(i){return Promise.reject(i)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const i of e)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}U("CapacitorCookies",{web:()=>new de});const fe=async t=>new Promise((e,i)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>i(r),n.readAsDataURL(t)}),ue=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,o,a)=>(r[o]=t[e[a]],r),{})},ge=(t,e=!0)=>t?Object.entries(t).reduce((n,r)=>{const[o,a]=r;let s,u;return Array.isArray(a)?(u="",a.forEach(l=>{s=e?encodeURIComponent(l):l,u+=`${o}=${s}&`}),u.slice(0,-1)):(s=e?encodeURIComponent(a):a,u=`${o}=${s}`),`${n}&${u}`},"").substr(1):null,he=(t,e={})=>{const i=Object.assign({method:t.method||"GET",headers:t.headers},e),r=ue(t.headers)["content-type"]||"";if(typeof t.data=="string")i.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,s]of Object.entries(t.data||{}))o.set(a,s);i.body=o.toString()}else if(r.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((s,u)=>{o.append(u,s)});else for(const s of Object.keys(t.data))o.append(s,t.data[s]);i.body=o;const a=new Headers(i.headers);a.delete("content-type"),i.headers=a}else(r.includes("application/json")||typeof t.data=="object")&&(i.body=JSON.stringify(t.data));return i};class me extends q{async request(e){const i=he(e,e.webFetchExtra),n=ge(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,o=await fetch(r,i),a=o.headers.get("content-type")||"";let{responseType:s="text"}=o.ok?e:{};a.includes("application/json")&&(s="json");let u,l;switch(s){case"arraybuffer":case"blob":l=await o.blob(),u=await fe(l);break;case"json":u=await o.json();break;case"document":case"text":default:u=await o.text()}const O={};return o.headers.forEach((b,S)=>{O[S]=b}),{data:u,headers:O,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}U("CapacitorHttp",{web:()=>new me});var F;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(F||(F={}));const m=U("LocalNotifications",{web:()=>te(()=>import("./web.10111c36.js"),["assets/web.10111c36.js","assets/index.640fc71d.js","assets/index.f80becc5.css","assets/QCalendar.c936b442.js","assets/QCalendarTask.acd5225c.js"]).then(t=>new t.LocalNotificationsWeb)}),$=E.getPlatform(),pe=async()=>{let t=await m.checkPermissions();console.log("NotifHelper::registerNotifications>>CheckP",JSON.stringify(t));for(const e in t)console.log("registerNotifications>> "+e,t[e]);t.display==="prompt"&&(t=await m.requestPermissions(),console.log("NotifHelper::registerNotifications::requestP",JSON.stringify(t))),t.display!=="granted"&&console.log("NotifHelper::registerNotifications::NOPE",t.display,t.receive)},ve=async()=>{await m.addListener("localNotificationReceived",t=>{console.log("NotifHelper::localNotificationReceived: ",JSON.stringify(t))}),await m.addListener("localNotificationActionPerformed",t=>{console.log("NotifHelper::localNotificationActionPerformed::ACtion>> ",JSON.stringify(t))})},we=async()=>{const t=await m.getDeliveredNotifications();console.log("NotifHelper::getDeliveredNotifications",JSON.stringify(t));for(const e in t)console.log("NotifHelper::getDeliveredNotifications>> "+e,t[e])},ye=async()=>{if($!="web"){let t=await m.listChannels();console.log("NotifHelper::otherNotifInfo",JSON.stringify(t))}};class Pe{constructor(){this.name="CapacitorNotificationsWeb",this.platforms=["web"],this.pending=[],this.deliveredNotifications=[],this.doInit()}doPrint(){console.log("NotifHelper>>","ALLGOOD")}getState(){return{pending:this.pending.length,delivered:this.deliveredNotifications.length}}doInit(){$!="web"?console.log("NotifHelper>>ANDROID Platform",$):console.log("NotifHelper>>WEB Platform",$),pe(),ve(),we(),ye()}async getDeliveredNotifications(){return console.log("NotifHelper::getDeliveredNotifications"),m.getDeliveredNotifications()}async removeDeliveredNotifications(e){return console.log("NotifHelper::removeDeliveredNotifications"),m.removeDeliveredNotifications(e)}async removeAllDeliveredNotifications(){return console.log("NotifHelper::removeAllDeliveredNotifications"),m.removeAllDeliveredNotifications()}scheduleLater(e,i){for(const n of e){let r=ie(ne(i),{minute:oe(n.start.time)}),o=Date.parse(`${r.date} ${r.time}`),a=new Date(o),s={title:"Scheduled!",body:n.title,id:n.id,schedule:{at:a,allowWhileIdle:!0,repeats:!0},sound:"./public/assets/sounds/alarm.aiff",attachments:null,actionTypeId:"",iconColor:n.bgcolor?n.bgcolor.includes("-")?"#9d8802":n.bgcolor:"#9d8802",extra:null};this.pending.push(s)}}async schedule(e){console.log("NotifHelper::schedule",JSON.stringify(e)),m.schedule(e).then(i=>{console.log("NotifHelper::schedule>>good",JSON.stringify(i)),console.log(i),this.deliveredNotifications.push(...e.notifications),this.pending=this.pending.filter(n=>!e.notifications.find(r=>r.id===n.id))}).catch(i=>{console.log("NotifHelper::schedule>>ERROR",JSON.stringify(i)),console.log(i),this.pending.push(...e.notifications)})}schedulePending(){console.log("NotifHelper::schedulePending!!");for(const e of this.pending)m.schedule({notifications:[e]})}}const Ce=new Pe;export{E as C,Ce as L,q as W};
