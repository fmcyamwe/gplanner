import{ak as he,j as re,e as me,h as R,T as ve,al as ge,a3 as z,m as pe,am as be,a0 as L,an as j,$ as W,ao as F,ap as H,a1 as Y,ac as ye,ad as Se,ae as Ge,r as J,c as x,w as Z,n as Ce,k,aq as $e,D as Ee,g as Me,ar as Ae}from"./index.3e746479.js";import{u as De}from"./use-quasar.ae4e9323.js";function Oe(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),he.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var Ne=re({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:l,emit:n}){let G=!1,e,r,d=null,y=null,p,m;function C(){e&&e(),e=null,G=!1,d!==null&&(clearTimeout(d),d=null),y!==null&&(clearTimeout(y),y=null),r!==void 0&&r.removeEventListener("transitionend",p),p=null}function A(v,q,E){q!==void 0&&(v.style.height=`${q}px`),v.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,G=!0,e=E}function D(v,q){v.style.overflowY=null,v.style.height=null,v.style.transition=null,C(),q!==m&&n(q)}function $(v,q){let E=0;r=v,G===!0?(C(),E=v.offsetHeight===v.scrollHeight?0:void 0):(m="hide",v.style.overflowY="hidden"),A(v,E,q),d=setTimeout(()=>{d=null,v.style.height=`${v.scrollHeight}px`,p=T=>{y=null,(Object(T)!==T||T.target===v)&&D(v,"show")},v.addEventListener("transitionend",p),y=setTimeout(p,t.duration*1.1)},100)}function O(v,q){let E;r=v,G===!0?C():(m="show",v.style.overflowY="hidden",E=v.scrollHeight),A(v,E,q),d=setTimeout(()=>{d=null,v.style.height=0,p=T=>{y=null,(Object(T)!==T||T.target===v)&&D(v,"hide")},v.addEventListener("transitionend",p),y=setTimeout(p,t.duration*1.1)},100)}return me(()=>{G===!0&&C()}),()=>R(ve,{css:!1,appear:t.appear,onEnter:$,onLeave:O},l.default)}});const X={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},qe=Object.keys(X);X.all=!0;function ee(t){const l={};for(const n of qe)t[n]===!0&&(l[n]=!0);return Object.keys(l).length===0?X:(l.horizontal===!0?l.left=l.right=!0:l.left===!0&&l.right===!0&&(l.horizontal=!0),l.vertical===!0?l.up=l.down=!0:l.up===!0&&l.down===!0&&(l.vertical=!0),l.horizontal===!0&&l.vertical===!0&&(l.all=!0),l)}function te(t,l){return l.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof l.handler=="function"&&t.target.nodeName.toUpperCase()!=="INPUT"&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(l.uid)===-1)}function P(t,l,n){const G=H(t);let e,r=G.left-l.event.x,d=G.top-l.event.y,y=Math.abs(r),p=Math.abs(d);const m=l.direction;m.horizontal===!0&&m.vertical!==!0?e=r<0?"left":"right":m.horizontal!==!0&&m.vertical===!0?e=d<0?"up":"down":m.up===!0&&d<0?(e="up",y>p&&(m.left===!0&&r<0?e="left":m.right===!0&&r>0&&(e="right"))):m.down===!0&&d>0?(e="down",y>p&&(m.left===!0&&r<0?e="left":m.right===!0&&r>0&&(e="right"))):m.left===!0&&r<0?(e="left",y<p&&(m.up===!0&&d<0?e="up":m.down===!0&&d>0&&(e="down"))):m.right===!0&&r>0&&(e="right",y<p&&(m.up===!0&&d<0?e="up":m.down===!0&&d>0&&(e="down")));let C=!1;if(e===void 0&&n===!1){if(l.event.isFirst===!0||l.event.lastDir===void 0)return{};e=l.event.lastDir,C=!0,e==="left"||e==="right"?(G.left-=r,y=0,r=0):(G.top-=d,p=0,d=0)}return{synthetic:C,payload:{evt:t,touch:l.event.mouse!==!0,mouse:l.event.mouse===!0,position:G,direction:e,isFirst:l.event.isFirst,isFinal:n===!0,duration:Date.now()-l.event.time,distance:{x:y,y:p},offset:{x:r,y:d},delta:{x:G.left-l.event.lastX,y:G.top-l.event.lastY}}}}let we=0;var _e=ge({name:"touch-pan",beforeMount(t,{value:l,modifiers:n}){if(n.mouse!==!0&&z.has.touch!==!0)return;function G(r,d){n.mouse===!0&&d===!0?ye(r):(n.stop===!0&&F(r),n.prevent===!0&&W(r))}const e={uid:"qvtp_"+we++,handler:l,modifiers:n,direction:ee(n),noop:pe,mouseStart(r){te(r,e)&&be(r)&&(L(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(r,!0))},touchStart(r){if(te(r,e)){const d=r.target;L(e,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),e.start(r)}},start(r,d){if(z.is.firefox===!0&&j(t,!0),e.lastEvt=r,d===!0||n.stop===!0){if(e.direction.all!==!0&&(d!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const m=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&W(m),r.cancelBubble===!0&&F(m),Object.assign(m,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[e.uid]:r.qClonedBy.concat(e.uid)}),e.initialEvent={target:r.target,event:m}}F(r)}const{left:y,top:p}=H(r);e.event={x:y,y:p,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:y,lastY:p}},move(r){if(e.event===void 0)return;const d=H(r),y=d.left-e.event.x,p=d.top-e.event.y;if(y===0&&p===0)return;e.lastEvt=r;const m=e.event.mouse===!0,C=()=>{G(r,m);let $;n.preserveCursor!==!0&&n.preservecursor!==!0&&($=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),m===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Oe(),e.styleCleanup=O=>{if(e.styleCleanup=void 0,$!==void 0&&(document.documentElement.style.cursor=$),document.body.classList.remove("non-selectable"),m===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};O!==void 0?setTimeout(()=>{v(),O()},50):v()}else O!==void 0&&O()}};if(e.event.detected===!0){e.event.isFirst!==!0&&G(r,e.event.mouse);const{payload:$,synthetic:O}=P(r,e,!1);$!==void 0&&(e.handler($)===!1?e.end(r):(e.styleCleanup===void 0&&e.event.isFirst===!0&&C(),e.event.lastX=$.position.left,e.event.lastY=$.position.top,e.event.lastDir=O===!0?void 0:$.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||m===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){C(),e.event.detected=!0,e.move(r);return}const A=Math.abs(y),D=Math.abs(p);A!==D&&(e.direction.horizontal===!0&&A>D||e.direction.vertical===!0&&A<D||e.direction.up===!0&&A<D&&p<0||e.direction.down===!0&&A<D&&p>0||e.direction.left===!0&&A>D&&y<0||e.direction.right===!0&&A>D&&y>0?(e.event.detected=!0,e.move(r)):e.end(r,!0))},end(r,d){if(e.event!==void 0){if(Y(e,"temp"),z.is.firefox===!0&&j(t,!1),d===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(P(r===void 0?e.lastEvt:r,e).payload);const{payload:y}=P(r===void 0?e.lastEvt:r,e,!0),p=()=>{e.handler(y)};e.styleCleanup!==void 0?e.styleCleanup(p):p()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,n.mouse===!0){const r=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(e,"main",[[t,"mousedown","mouseStart",`passive${r}`]])}z.has.touch===!0&&L(e,"main",[[t,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,l){const n=t.__qtouchpan;n!==void 0&&(l.oldValue!==l.value&&(typeof value!="function"&&n.end(),n.handler=l.value),n.direction=ee(l.modifiers))},beforeUnmount(t){const l=t.__qtouchpan;l!==void 0&&(l.event!==void 0&&l.end(),Y(l,"main"),Y(l,"temp"),z.is.firefox===!0&&j(t,!1),l.styleCleanup!==void 0&&l.styleCleanup(),delete t.__qtouchpan)}}),Ie=re({name:"QSplitter",props:{...Se,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"?!1:t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:l,emit:n}){const{proxy:{$q:G}}=Me(),e=Ge(t,G),r=J(null),d={before:J(null),after:J(null)},y=x(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(e.value===!0?" q-splitter--dark":"")),p=x(()=>t.horizontal===!0?"height":"width"),m=x(()=>t.reverse!==!0?"before":"after"),C=x(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function A(M){return(t.unit==="%"?M:Math.round(M))+t.unit}const D=x(()=>({[m.value]:{[p.value]:A(t.modelValue)}}));let $,O,v,q,E;function T(M){if(M.isFirst===!0){const I=r.value.getBoundingClientRect()[p.value];$=t.horizontal===!0?"up":"left",O=t.unit==="%"?100:I,v=Math.min(O,C.value[1],Math.max(C.value[0],t.modelValue)),q=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:G.lang.rtl===!0?-1:1)*(t.unit==="%"?I===0?0:100/I:1),r.value.classList.add("q-splitter--active");return}if(M.isFinal===!0){E!==t.modelValue&&n("update:modelValue",E),r.value.classList.remove("q-splitter--active");return}const N=v+q*(M.direction===$?-1:1)*M.distance[t.horizontal===!0?"y":"x"];E=Math.min(O,C.value[1],Math.max(C.value[0],N)),d[m.value].value.style[p.value]=A(E),t.emitImmediately===!0&&t.modelValue!==E&&n("update:modelValue",E)}const V=x(()=>[[_e,T,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function B(M,N){M<N[0]?n("update:modelValue",N[0]):M>N[1]&&n("update:modelValue",N[1])}return Z(()=>t.modelValue,M=>{B(M,C.value)}),Z(()=>t.limits,()=>{Ce(()=>{B(t.modelValue,C.value)})}),()=>{const M=[R("div",{ref:d.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:D.value.before},k(l.before)),R("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[$e("div",{class:"q-splitter__separator-area absolute-full"},k(l.separator),"sep",t.disable!==!0,()=>V.value)]),R("div",{ref:d.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:D.value.after},k(l.after))];return R("div",{class:y.value,ref:r},Ee(l.default,M))}}});const ze=Ae("allGoals",()=>{const t=J([{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}]),l=[{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}],n=De(),G=x(()=>l),e=x(()=>{let i=JSON.parse(n.localStorage.getItem("mainGoals"));return p(i)}),r=x(()=>{let i=JSON.parse(n.localStorage.getItem("subGoals"));return p(i)}),d=x(()=>JSON.parse(n.localStorage.getItem("AllDates"))),y=x(()=>JSON.parse(n.localStorage.getItem("Balancey")));function p(i){return i?[...i]:[]}function m(i){n.localStorage.set("Balancey",JSON.stringify(i))}function C(i,a,o,s){let h=this.getMainGoals;if(!h){console.log("umm no mainGoals...adding"),n.localStorage.set("mainGoals",JSON.stringify([{id:0,title:i.trim(),details:a,priority:s,bgcolor:o,icon:"fas fa-utensils"}]));return}let b=h.length+1;for(;h.some(u=>u.id===b);)b=Math.floor(Math.random()*1e3);return h.unshift({id:b,title:i.trim(),details:a,priority:s,bgcolor:o,icon:"fas fa-utensils"}),n.localStorage.set("mainGoals",JSON.stringify(h)),b}function A(i,a,o,s,h){let b=this.getMainGoals;for(var u=0;u<b.length;u++)if(b[u].id===i){b[u].title=a.trim(),b[u].details=o,b[u].bgcolor=s,b[u].priority=h;break}n.localStorage.set("mainGoals",JSON.stringify(b))}function D(i,a,o,s,h,b,u,c,f){let g=this.getSubGoals;if(!g){n.localStorage.set("subGoals",JSON.stringify([{id:0,parentGoal:i,title:a.trim(),score:o,time:s,duration:h,canMove:b,inDefaults:u,isAlternative:c,jeSuis:f||[]}]));return}let S=g.length+1;for(;g.some(_=>_.id===S);)S=Math.floor(Math.random()*1e3);return g.unshift({id:S,parentGoal:i,title:a.trim(),score:o,time:s,duration:h,canMove:b,inDefaults:u,isAlternative:c,jeSuis:f||[]}),n.localStorage.set("subGoals",JSON.stringify(g)),S}function $(i,a,o,s,h,b,u,c,f){let g=this.getSubGoals;for(var S=0;S<g.length;S++)if(g[S].id===i){g[S].title=a.trim(),g[S].score=o,g[S].time=s,g[S].duration=h,g[S].canMove=b,g[S].inDefaults=u,g[S].isAlternative=c,g[S].jeSuis=f||[];break}n.localStorage.set("subGoals",JSON.stringify(g))}function O(){n.localStorage.remove("mainGoals"),console.log("removed all mainGoal")}function v(){n.localStorage.remove("subGoals"),console.log("removed all subGoals")}function q(){n.localStorage.remove("subGoals"),n.localStorage.remove("mainGoals"),n.localStorage.remove("AllDates"),n.localStorage.remove("Balancey"),console.log("removed ALL")}function E(i,a=null,o=null){let s=this.getSubGoals;for(var h=0;h<s.length;h++)if(s[h].id===i){s[h].time=a||s[h].time,s[h].score=o||s[h].score;break}n.localStorage.set("subGoals",JSON.stringify(s))}function T(i){let a=this.getSubGoals;for(var o=0;o<a.length;o++)a[o].id===i&&(a.splice(o,1),console.log("removeSubgoal spliced!"));return n.localStorage.set("subGoals",JSON.stringify(a)),a}function V(i,a){let o=this.getMainGoals;for(var s=0;s<o.length;s++)o[s].id===i&&(o.splice(s,1),console.log("removeMaingoal spliced!"));return n.localStorage.set("mainGoals",JSON.stringify(o)),o}function B(i){var s;let a=this.getMainGoals;for(var o=0;o<a.length;o++)if(((s=a[o])==null?void 0:s.title.trim())===i)return a[o];return null}function M(i,a=null){let o=this.getAllDates;o?a?o[`${i}`]=a:i in o?delete o[`${i}`]:console.log(`ERROR? deleting schedule of ${i} not found!`):(console.log(`Adding new schedule for ${i}`),o={},o[`${i}`]=a),n.localStorage.set("AllDates",JSON.stringify(o))}function N(i){let a=this.getAllDates;if(a)return a[`${i}`]}function I(i){let a=this.getAllDates;return a?!!a[`${i}`]:!1}function le(){const i=[];let a=function(s){return s==null?void 0:s.inDefaults},o=this.getSubGoals;return o?(o.forEach(s=>{a(s)&&i.push(s)}),i):(console.log("No subgoals to fetch defaults :("),i)}function ie(i=null){let a=this.getMainGoals,o=new Set;if(i)for(var s=0;s<a.length;s++)a[s].priority==i&&o.add(a[s].priority);else a.forEach(h=>{o.add(h.priority)});return o}function oe(){const i=[];let a=this.getSubGoals;return a&&a.forEach(o=>{o!=null&&o.isAlternative&&i.push(o)}),i}function ne(i){const a=[];let o=function(h){const b=h.split(/on/);return b.length!=2?(console.log(`parseScore error?${h}`,b),-1):b[1]-b[0]},s=this.getSubGoals;return s&&s.forEach(h=>{if(h.score=="")console.log(`no score event added: ${h.title}`,h.score),a.push(h);else{let b=o(h.score);b>-1&&b>=i&&a.push(h)}}),a}function ae(i){const o=(i/60).toFixed(2);return parseFloat(o)}function se(){let i=this.getMainGoals,a=this.getSubGoals,o=(u,c)=>{if(u.id>c.id)return 1;if(u.id==c.id)return 0;if(u.id<c.id)return-1},s=u=>{if(!u)return"";let c=u.split(":");return parseInt(c[0])>=12?"PM":"AM"},h=u=>{let c=[];return a&&a.forEach(f=>{f.parentGoal==u&&c.push(f)}),c},b=[];return i.forEach(u=>{var S,_,Q,U,K;let c={id:u.id,label:`${u.id}) ${u==null?void 0:u.title.trim()}`,details:`${u.details} ==> Prio:${u==null?void 0:u.priority}`,color:`${u==null?void 0:u.bgcolor}`,prio:u==null?void 0:u.priority,children:[]},f=h(u.id);for(let w=0;w<f.length;w++){let de=f[w].inDefaults?"Dft":"#",ce=f[w].canMove?"Mv":"#",fe=f[w].isAlternative?"Alt":"#";c.children.push({id:f[w].id,label:`${f[w].id} -- ${(S=f[w])==null?void 0:S.title.trim()} (${(_=f[w])==null?void 0:_.score})`,details:`${(Q=f[w])==null?void 0:Q.time}${s((U=f[w])==null?void 0:U.time)} for ${(K=f[w])==null?void 0:K.duration} mins :: ${de}~${ce}~${fe}`,color:`${u==null?void 0:u.bgcolor}`,isChildren:!0,moods:f[w].jeSuis||[]})}let g=c.children;g.sort(o),c.children=g,b.push(c)}),b.sort(o),b}function ue(){let i=this.getAllDates;if(!i)return[];let a=this.getMainGoals,o=this.getSubGoals,s={};for(let c in i){let f=i[c];for(let g in f)s[g]||(s[g]=[]),s[g].push({date:c,logged:ae(f[g].duration)})}let h=c=>{let f=[];return o&&o.forEach(g=>{g.parentGoal==c&&f.push(g)}),f},b=(c,f=null)=>{let g={children:[],title:f?`${c.title.trim()}(${c.score})`:`${c.title.trim()} !${c.priority}!`,key:f?`${f}-${c.id}`:c.id,logged:[],expanded:!0,color:c==null?void 0:c.bgcolor,isChild:!!f};if(f){let S=s[c.id]||[];g.logged=[...S]}return g},u=[];return a.forEach(c=>{let f=b(c),g=h(c.id);for(let S=0;S<g.length;S++){let _=b(g[S],c.id);if(_.logged.length==0){console.log(`Oooh no logged for parent ${c.title}`,_);continue}f.logged.push(..._.logged),_.children.length<1?delete _.children:console.log("huh children has descendents?!? ERROR?",_),f.children.push(_)}u.push(f)}),u}return{headers:l,headerRefs:t,getHeaders:G,getMainGoals:e,getSubGoals:r,getAllDates:d,getBalance:y,setBalance:m,addMainGoal:C,addSubGoal:D,editSubGoal:$,editMainGoal:A,getGoalByTitle:B,saveSubProp:E,saveDailySchedule:M,resetSub:v,resetMain:O,resetAll:q,removeSubgoal:T,removeMaingoal:V,getEventsForDate:N,hasEventsForDate:I,fetchAllTaskSummary:ue,fetchGoalsWithMinScore:ne,fetchAllPrio:ie,fetchDefaults:le,fetchAlternativeEvts:oe,fetchGoalsTree:se}});export{Ie as Q,_e as T,Ne as a,Oe as c,ze as u};
