import{_,E as u,O as f,H as l,G as d,bg as b,a1 as A,M as r,J as v,bh as m,an as p,F as C,I as B,N as h,a3 as x,a6 as S,a7 as g}from"./index.35e38d2c.js";import{b as V,Q as y}from"./QItem.1d5f7939.js";import{Q as E}from"./QSelect.3faa0d15.js";import{Q}from"./QSpace.afaca8e2.js";import"./touch.70a9dd44.js";import"./goalStorage.170f6813.js";import"./utiFunc.206c0c91.js";const k={name:"selectEvent",props:{canBeScheduled:Array,toBalance:Number},data(){return{doForce:!1,toAddE:null,useBalance:!1,allEvts:this.canBeScheduled}},emits:["onPickEvent","doCancel"],computed:{allScheduled:{get(){return this.allEvts},set(e){this.allEvts=e}},toAdd:{get(){return this.toAddE},set(e){this.toAddE=e}}},methods:{onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance),this.doForce=!1,this.useBalance=!1,this.toAdd=null},filterFn(e,t,s){t(()=>{const i=e.toLowerCase();this.allScheduled=this.canBeScheduled.filter(o=>(o==null?void 0:o.title.toLowerCase().indexOf(i))>-1)})},setModel(e){this.toAdd=e},goalyColor(e){var t,s;return this.toAdd==null?"":e=="c"?"bg-"+((t=this.toAdd)==null?void 0:t.color):(s=this.toAdd)==null?void 0:s.color},labely(){var e;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":" Of: "+((e=this.toAdd)==null?void 0:e.pg)},canBalance(){var t,s;let e=this.toBalance+parseInt((t=this.toAdd)==null?void 0:t.duration)||((s=this.toAdd)==null?void 0:s.isAlternative);return this.toAdd==null?!1:e}}},c=e=>(S("data-v-16be1250"),e=e(),g(),e),F={class:"q-pa-md"},I=c(()=>r("div",{class:"text-h3"},"Select event",-1)),q={class:"q-mx-md event-select"},N=c(()=>r("br",null,null,-1)),w=c(()=>r("div",{class:"q-mx-md",style:{"text-align":"center"}}," Add ",-1));function U(e,t,s,i,o,a){return u(),f("div",F,[l(x,null,{default:d(()=>[l(b,null,{default:d(()=>[I]),_:1}),l(A),r("div",q,[l(E,{modelValue:a.toAdd,"onUpdate:modelValue":t[0]||(t[0]=n=>a.toAdd=n),options:a.allScheduled,class:"q-gutter-md q-px-md","option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:a.labely(),"options-selected-class":a.goalyColor("c"),"label-color":a.goalyColor("l"),onFilter:a.filterFn,onInputValue:a.setModel,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(y,{class:"text-grey"},{default:d(()=>[v(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","label","options-selected-class","label-color","onFilter","onInputValue"])]),N,l(m,{align:"center",class:"q-px-xl"},{default:d(()=>[l(p,{dense:"",modelValue:o.doForce,"onUpdate:modelValue":t[1]||(t[1]=n=>o.doForce=n),label:"Force In",color:"teal"},null,8,["modelValue"]),l(Q),a.canBalance()?(u(),C(p,{key:0,dense:"",modelValue:o.useBalance,"onUpdate:modelValue":t[2]||(t[2]=n=>o.useBalance=n),label:"Use Balance",color:"brown"},null,8,["modelValue"])):B("",!0)]),_:1}),l(m,{align:"center"},{default:d(()=>[l(h,{flat:"",label:"Cancel",color:"primary",onClick:t[3]||(t[3]=n=>e.$emit("doCancel"))}),l(h,{elevated:"",color:"primary",align:"between",onClick:a.onAddClicked},{default:d(()=>[w]),_:1},8,["onClick"])]),_:1})]),_:1})])}var T=_(k,[["render",U],["__scopeId","data-v-16be1250"]]);export{T as default};
