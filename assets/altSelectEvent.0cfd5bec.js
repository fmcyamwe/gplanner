import{_ as B,E as r,O as m,H as s,G as i,M as o,J as f,K as x,a1 as C,F as h,Q as _,I as c,a2 as k,bv as y,aq as v,N as b,a3 as V,a6 as q,a7 as F}from"./index.ce87ae0d.js";import{Q as A}from"./QSelect.a79123cd.js";import{Q as g}from"./QKnob.6fb59970.js";import{Q as P}from"./QSpace.40341fde.js";import{w as S}from"./goalStorage.e6c3c0d6.js";import"./touch.70a9dd44.js";import"./QItem.52664d0e.js";const Q={name:"altSelectEvent",props:{allUnscheduled:Array,unscheduledParents:Object,toBalance:Number,at:String},data(){return{doForce:!1,selectedE:null,dura:null,useBalance:!1,allEvts:this.allUnscheduled,selectedParent:null,atTime:S(this.at)}},emits:["onPickEvent","doCancel"],computed:{unscheduledP:{get(){let e=[];for(let t in this.unscheduledParents)e.push(this.unscheduledParents[t]);return e}},toFilterBy:{get(){return this.selectedParent},set(e){this.selectedParent=e,this.toAdd&&(this.toAdd=null)}},filteredUnScheduled:{get(){return this.selectedParent?this.allUnscheduled.filter(e=>e.parentGoal==this.selectedParent.id):this.allEvts}},toAdd:{get(){return this.selectedE},set(e){this.selectedE=e,this.dura=(e==null?void 0:e.duration)||0}}},methods:{clear(){this.toFilterBy=null,this.toAdd=null},onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance,this.dura),this.doForce=!1,this.useBalance=!1,this.toAdd=null},goalyColor(e){var t,n,u;return this.toAdd==null?"":e=="c"?"bg-"+((t=this.toFilterBy)==null?void 0:t.color)+" "+((n=this.toFilterBy)==null?void 0:n.ic):(u=this.toFilterBy)==null?void 0:u.color},labely(){var e;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":` Of: ${((e=this.toFilterBy)==null?void 0:e.title)||""}`},classy(){return this.toAdd==null||this.toAdd==null||this.toAdd==""?"q-gutter-md q-px-md":"q-px-md"},canBalance(){var t,n;let e=this.toBalance+parseInt((t=this.toAdd)==null?void 0:t.duration)||((n=this.toAdd)==null?void 0:n.isAlternative);return this.toAdd==null?!1:e}}},p=e=>(q("data-v-5533ac57"),e=e(),F(),e),E={class:"q-pa-sm"},U=p(()=>o("div",{class:"text-h3 title"},"Select event",-1)),I={class:"q-mx-md do-center"},w={class:"q-mx-md event-select"},N={key:0,class:"q-mx-md event-select"},z={key:1,class:"q-mx-auto"},G=p(()=>o("br",null,null,-1)),T=p(()=>o("div",{class:"q-mx-md"}," Add ",-1));function O(e,t,n,u,d,l){return r(),m("div",E,[s(V,null,{default:i(()=>[o("div",null,[U,o("div",I,[f(" @ "),o("em",null,x(d.atTime),1)])]),s(C),o("div",w,[s(A,{modelValue:l.toFilterBy,"onUpdate:modelValue":t[0]||(t[0]=a=>l.toFilterBy=a),options:l.unscheduledP,class:"q-mx-md","option-value":"id","option-label":"title",popupContentClass:"q-px-sm","input-debounce":"0",label:"Parent Goal",behavior:"menu"},{default:i(()=>[l.toFilterBy?(r(),h(_,{key:0,name:"clear",size:"14px",onClick:l.clear},null,8,["onClick"])):c("",!0)]),_:1},8,["modelValue","options"])]),d.selectedParent?(r(),m("div",N,[s(A,{modelValue:l.toAdd,"onUpdate:modelValue":t[1]||(t[1]=a=>l.toAdd=a),options:l.filteredUnScheduled,class:k(l.classy()),"option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:l.labely(),"options-selected-class":l.goalyColor("c"),"label-color":l.goalyColor("l"),"input-debounce":"0",behavior:"menu"},{before:i(()=>[l.toAdd?(r(),h(_,{key:0,name:d.selectedParent.ic,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):c("",!0)]),_:1},8,["modelValue","options","class","label","options-selected-class","label-color"])])):c("",!0),l.toAdd?(r(),m("div",z,[f(" Duration (min) "),s(g,{min:5,max:120,thickness:.22,step:5,modelValue:d.dura,"onUpdate:modelValue":t[2]||(t[2]=a=>d.dura=a),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md"},null,8,["thickness","modelValue"])])):c("",!0),G,s(y,{align:"center",class:"q-mx-auto"},{default:i(()=>[s(v,{dense:"",modelValue:d.doForce,"onUpdate:modelValue":t[3]||(t[3]=a=>d.doForce=a),label:"Force In",color:"teal",class:"q-mx-sm"},null,8,["modelValue"]),s(P),l.canBalance()?(r(),h(v,{key:0,dense:"",modelValue:d.useBalance,"onUpdate:modelValue":t[4]||(t[4]=a=>d.useBalance=a),label:"Use Balance",color:"brown"},null,8,["modelValue"])):c("",!0)]),_:1}),s(y,{align:"center"},{default:i(()=>[s(b,{flat:"",label:"Cancel",color:"primary",onClick:t[5]||(t[5]=a=>e.$emit("doCancel"))}),s(b,{elevated:"",color:"primary",align:"between",onClick:l.onAddClicked},{default:i(()=>[T]),_:1},8,["onClick"])]),_:1})]),_:1})])}var R=B(Q,[["render",O],["__scopeId","data-v-5533ac57"]]);export{R as default};
