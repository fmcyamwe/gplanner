import{az as Ut,ad as Ae,v as kt,aA as Wt,aa as Te,aB as We,a9 as Me,b6 as le,aC as Re,ab as Xe,Z as ue,j as Le,b7 as Je,b8 as xt,b9 as qt,ba as At,U as Et,bb as Xt,W as Ot,bc as Yt,c as C,ay as Gt,g as De,h as A,Q as Pe,bd as Jt,aG as Zt,ae as el,af as tl,ag as ll,r as P,ah as ul,ai as nl,aj as ol,ak as al,al as il,w as de,be as rl,bf as mt,bg as sl,bh as cl,u as dl,bi as fl,k as vl,T as ml,e as Ze,aN as hl,bj as Sl,n as ce,bk as gl,aw as yl,aJ as bl,aK as wl,bl as Cl,bm as pl,bn as ht,aH as Ee,o as Vl,bo as kl,bp as xl,Y as ql,ao as Al,bq as El,D as Ol}from"./index.b9837b95.js";import{g as St,s as gt}from"./touch.70a9dd44.js";import{f as Ml,g as Fl,v as yt,h as zl,i as _l,j as Bl,k as bt,l as Il,r as wt,s as Tl}from"./goalStorage.940a25a8.js";import{Q as Pl,a as Rl,b as Hl}from"./QItem.acd3649c.js";let He=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,He=e.scrollLeft>=0,e.remove()}function Ye(e,n,o){const S=Re(e);let l,u=S.left-n.event.x,m=S.top-n.event.y,v=Math.abs(u),f=Math.abs(m);const h=n.direction;h.horizontal===!0&&h.vertical!==!0?l=u<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?l=m<0?"up":"down":h.up===!0&&m<0?(l="up",v>f&&(h.left===!0&&u<0?l="left":h.right===!0&&u>0&&(l="right"))):h.down===!0&&m>0?(l="down",v>f&&(h.left===!0&&u<0?l="left":h.right===!0&&u>0&&(l="right"))):h.left===!0&&u<0?(l="left",v<f&&(h.up===!0&&m<0?l="up":h.down===!0&&m>0&&(l="down"))):h.right===!0&&u>0&&(l="right",v<f&&(h.up===!0&&m<0?l="up":h.down===!0&&m>0&&(l="down")));let d=!1;if(l===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};l=n.event.lastDir,d=!0,l==="left"||l==="right"?(S.left-=u,v=0,u=0):(S.top-=m,f=0,m=0)}return{synthetic:d,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:S,direction:l,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:v,y:f},offset:{x:u,y:m},delta:{x:S.left-n.event.lastX,y:S.top-n.event.lastY}}}}let Ll=0;var lu=Ut({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&Ae.has.touch!==!0)return;function S(u,m){o.mouse===!0&&m===!0?ue(u):(o.stop===!0&&le(u),o.prevent===!0&&Me(u))}const l={uid:"qvtp_"+Ll++,handler:n,modifiers:o,direction:St(o),noop:kt,mouseStart(u){gt(u,l)&&Wt(u)&&(Te(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(u,!0))},touchStart(u){if(gt(u,l)){const m=u.target;Te(l,"temp",[[m,"touchmove","move","notPassiveCapture"],[m,"touchcancel","end","passiveCapture"],[m,"touchend","end","passiveCapture"]]),l.start(u)}},start(u,m){if(Ae.is.firefox===!0&&We(e,!0),l.lastEvt=u,m===!0||o.stop===!0){if(l.direction.all!==!0&&(m!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const h=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Me(h),u.cancelBubble===!0&&le(h),Object.assign(h,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[l.uid]:u.qClonedBy.concat(l.uid)}),l.initialEvent={target:u.target,event:h}}le(u)}const{left:v,top:f}=Re(u);l.event={x:v,y:f,time:Date.now(),mouse:m===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:v,lastY:f}},move(u){if(l.event===void 0)return;const m=Re(u),v=m.left-l.event.x,f=m.top-l.event.y;if(v===0&&f===0)return;l.lastEvt=u;const h=l.event.mouse===!0,d=()=>{S(u,h);let b;o.preserveCursor!==!0&&o.preservecursor!==!0&&(b=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ml(),l.styleCleanup=F=>{if(l.styleCleanup=void 0,b!==void 0&&(document.documentElement.style.cursor=b),document.body.classList.remove("non-selectable"),h===!0){const z=()=>{document.body.classList.remove("no-pointer-events--children")};F!==void 0?setTimeout(()=>{z(),F()},50):z()}else F!==void 0&&F()}};if(l.event.detected===!0){l.event.isFirst!==!0&&S(u,l.event.mouse);const{payload:b,synthetic:F}=Ye(u,l,!1);b!==void 0&&(l.handler(b)===!1?l.end(u):(l.styleCleanup===void 0&&l.event.isFirst===!0&&d(),l.event.lastX=b.position.left,l.event.lastY=b.position.top,l.event.lastDir=F===!0?void 0:b.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||h===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){d(),l.event.detected=!0,l.move(u);return}const y=Math.abs(v),k=Math.abs(f);y!==k&&(l.direction.horizontal===!0&&y>k||l.direction.vertical===!0&&y<k||l.direction.up===!0&&y<k&&f<0||l.direction.down===!0&&y<k&&f>0||l.direction.left===!0&&y>k&&v<0||l.direction.right===!0&&y>k&&v>0?(l.event.detected=!0,l.move(u)):l.end(u,!0))},end(u,m){if(l.event!==void 0){if(Xe(l,"temp"),Ae.is.firefox===!0&&We(e,!1),m===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(Ye(u===void 0?l.lastEvt:u,l).payload);const{payload:v}=Ye(u===void 0?l.lastEvt:u,l,!0),f=()=>{l.handler(v)};l.styleCleanup!==void 0?l.styleCleanup(f):f()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(e.__qtouchpan=l,o.mouse===!0){const u=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Te(l,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}Ae.has.touch===!0&&Te(l,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=St(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Xe(n,"main"),Xe(n,"temp"),Ae.is.firefox===!0&&We(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}}),Dl=Le({name:"QField",inheritAttrs:!1,props:Je,emits:xt,setup(){return qt(At())}});const Kl={xs:8,sm:10,md:14,lg:20,xl:24};var $l=Le({name:"QChip",props:{...Et,...Xt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:o}){const{proxy:{$q:S}}=De(),l=Ot(e,S),u=Yt(e,Kl),m=C(()=>e.selected===!0||e.icon!==void 0),v=C(()=>e.selected===!0?e.iconSelected||S.iconSet.chip.selected:e.icon),f=C(()=>e.iconRemove||S.iconSet.chip.remove),h=C(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=C(()=>{const q=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(q?` text-${q} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(l.value===!0?" q-chip--dark q-dark":"")}),y=C(()=>{const q=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},D={...q,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||S.lang.label.remove};return{chip:q,remove:D}});function k(q){q.keyCode===13&&b(q)}function b(q){e.disable||(o("update:selected",!e.selected),o("click",q))}function F(q){(q.keyCode===void 0||q.keyCode===13)&&(ue(q),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function z(){const q=[];h.value===!0&&q.push(A("div",{class:"q-focus-helper"})),m.value===!0&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--left",name:v.value}));const D=e.label!==void 0?[A("div",{class:"ellipsis"},[e.label])]:void 0;return q.push(A("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Jt(n.default,D))),e.iconRight&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:f.value,...y.value.remove,onClick:F,onKeyup:F})),q}return()=>{if(e.modelValue===!1)return;const q={class:d.value,style:u.value};return h.value===!0&&Object.assign(q,y.value.chip,{onClick:b,onKeyup:k}),Gt("div",q,z(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Zt,e.ripple]])}}}),jl=Le({name:"QMenu",inheritAttrs:!1,props:{...Fl,...el,...Et,...tl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:yt},self:{type:String,validator:yt},offset:{type:Array,validator:zl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ll,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:S}){let l=null,u,m,v;const f=De(),{proxy:h}=f,{$q:d}=h,y=P(null),k=P(!1),b=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),F=Ot(e,d),{registerTick:z,removeTick:q}=ul(),{registerTimeout:D}=nl(),{transitionProps:L,transitionStyle:U}=ol(e),{localScrollTarget:_,changeScrollEvent:B,unconfigureScrollTarget:W}=_l(e,V),{anchorEl:Q,canShow:ne}=Bl({showing:k}),{hide:oe}=al({showing:k,canShow:ne,handleShow:c,handleHide:r,hideOnRouteChange:b,processOnMount:!0}),{showPortal:Y,hidePortal:j,renderPortal:ae}=il(f,y,R,"menu"),ee={anchorEl:Q,innerRef:y,onClickOutside(a){if(e.persistent!==!0&&k.value===!0)return oe(a),(a.type==="touchstart"||a.target.classList.contains("q-dialog__backdrop"))&&ue(a),!0}},ie=C(()=>bt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),te=C(()=>e.cover===!0?ie.value:bt(e.self||"top start",d.lang.rtl)),G=C(()=>(e.square===!0?" q-menu--square":"")+(F.value===!0?" q-menu--dark q-dark":"")),Se=C(()=>e.autoClose===!0?{onClick:O}:{}),re=C(()=>k.value===!0&&e.persistent!==!0);de(re,a=>{a===!0?(rl(x),Il(ee)):(mt(x),wt(ee))});function J(){hl(()=>{let a=y.value;a&&a.contains(document.activeElement)!==!0&&(a=a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function c(a){if(l=e.noRefocus===!1?document.activeElement:null,sl(T),Y(),V(),u=void 0,a!==void 0&&(e.touchPosition||e.contextMenu)){const H=Re(a);if(H.left!==void 0){const{top:se,left:fe}=Q.value.getBoundingClientRect();u={left:H.left-fe,top:H.top-se}}}m===void 0&&(m=de(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,w)),e.noFocus!==!0&&document.activeElement.blur(),z(()=>{w(),e.noFocus!==!0&&J()}),D(()=>{d.platform.is.ios===!0&&(v=e.autoClose,y.value.click()),w(),Y(!0),o("show",a)},e.transitionDuration)}function r(a){q(),j(),g(!0),l!==null&&(a===void 0||a.qClickOutside!==!0)&&(((a&&a.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),D(()=>{j(!0),o("hide",a)},e.transitionDuration)}function g(a){u=void 0,m!==void 0&&(m(),m=void 0),(a===!0||k.value===!0)&&(cl(T),W(),wt(ee),mt(x)),a!==!0&&(l=null)}function V(){(Q.value!==null||e.scrollTarget!==void 0)&&(_.value=dl(Q.value,e.scrollTarget),B(_.value,w))}function O(a){v!==!0?(fl(h,a),o("click",a)):v=!1}function T(a){re.value===!0&&e.noFocus!==!0&&Sl(y.value,a.target)!==!0&&J()}function x(a){o("escapeKey"),oe(a)}function w(){const a=y.value;a===null||Q.value===null||Tl({el:a,offset:e.offset,anchorEl:Q.value,anchorOrigin:ie.value,selfOrigin:te.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function R(){return A(ml,L.value,()=>k.value===!0?A("div",{role:"menu",...S,ref:y,tabindex:-1,class:["q-menu q-position-engine scroll"+G.value,S.class],style:[S.style,U.value],...Se.value},vl(n.default)):null)}return Ze(g),Object.assign(h,{focus:J,updatePosition:w}),ae}});const X=1e3,Nl=["start","center","end","start-force","center-force","end-force"],Mt=Array.prototype.filter,Ql=window.getComputedStyle(document.body).overflowAnchor===void 0?kt:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];Mt.call(o,l=>l.dataset&&l.dataset.qVsAnchor!==void 0).forEach(l=>{delete l.dataset.qVsAnchor});const S=o[n];S&&S.dataset&&(S.dataset.qVsAnchor="")}))};function ke(e,n){return e+n}function Ge(e,n,o,S,l,u,m,v){const f=e===window?document.scrollingElement||document.documentElement:e,h=l===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-m-v,scrollMaxSize:0,offsetStart:-m,offsetEnd:-v};if(l===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=f.scrollLeft,d.scrollViewSize+=f.clientWidth),d.scrollMaxSize=f.scrollWidth,u===!0&&(d.scrollStart=(He===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=f.scrollTop,d.scrollViewSize+=f.clientHeight),d.scrollMaxSize=f.scrollHeight),o!==null)for(let y=o.previousElementSibling;y!==null;y=y.previousElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=y[h]);if(S!==null)for(let y=S.nextElementSibling;y!==null;y=y.nextElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=y[h]);if(n!==e){const y=f.getBoundingClientRect(),k=n.getBoundingClientRect();l===!0?(d.offsetStart+=k.left-y.left,d.offsetEnd-=k.width):(d.offsetStart+=k.top-y.top,d.offsetEnd-=k.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function Ct(e,n,o,S){n==="end"&&(n=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(S===!0&&(n=(He===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):o===!0?(S===!0&&(n=(He===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Oe(e,n,o,S){if(o>=S)return 0;const l=n.length,u=Math.floor(o/X),m=Math.floor((S-1)/X)+1;let v=e.slice(u,m).reduce(ke,0);return o%X!==0&&(v-=n.slice(u*X,o).reduce(ke,0)),S%X!==0&&S!==l&&(v-=n.slice(S,m*X).reduce(ke,0)),v}const Ul={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Wl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ul};function Xl({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:o,virtualScrollItemSizeComputed:S}){const l=De(),{props:u,emit:m,proxy:v}=l,{$q:f}=v;let h,d,y,k=[],b;const F=P(0),z=P(0),q=P({}),D=P(null),L=P(null),U=P(null),_=P({from:0,to:0}),B=C(()=>u.tableColspan!==void 0?u.tableColspan:100);S===void 0&&(S=C(()=>u.virtualScrollItemSize));const W=C(()=>S.value+";"+u.virtualScrollHorizontal),Q=C(()=>W.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);de(Q,()=>{G()}),de(W,ne);function ne(){te(d,!0)}function oe(r){te(r===void 0?d:r)}function Y(r,g){const V=n();if(V==null||V.nodeType===8)return;const O=Ge(V,o(),D.value,L.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);y!==O.scrollViewSize&&G(O.scrollViewSize),ae(V,O,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,Nl.indexOf(g)>-1?g:d>-1&&r>d?"end":"start")}function j(){const r=n();if(r==null||r.nodeType===8)return;const g=Ge(r,o(),D.value,L.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),V=e.value-1,O=g.scrollMaxSize-g.offsetStart-g.offsetEnd-z.value;if(h===g.scrollStart)return;if(g.scrollMaxSize<=0){ae(r,g,0,0);return}y!==g.scrollViewSize&&G(g.scrollViewSize),ee(_.value.from);const T=Math.floor(g.scrollMaxSize-Math.max(g.scrollViewSize,g.offsetEnd)-Math.min(b[V],g.scrollViewSize/2));if(T>0&&Math.ceil(g.scrollStart)>=T){ae(r,g,V,g.scrollMaxSize-g.offsetEnd-k.reduce(ke,0));return}let x=0,w=g.scrollStart-g.offsetStart,R=w;if(w<=O&&w+g.scrollViewSize>=F.value)w-=F.value,x=_.value.from,R=w;else for(let a=0;w>=k[a]&&x<V;a++)w-=k[a],x+=X;for(;w>0&&x<V;)w-=b[x],w>-g.scrollViewSize?(x++,R=w):R=b[x]+w;ae(r,g,x,R)}function ae(r,g,V,O,T){const x=typeof T=="string"&&T.indexOf("-force")>-1,w=x===!0?T.replace("-force",""):T,R=w!==void 0?w:"start";let a=Math.max(0,V-q.value[R]),H=a+q.value.total;H>e.value&&(H=e.value,a=Math.max(0,H-q.value.total)),h=g.scrollStart;const se=a!==_.value.from||H!==_.value.to;if(se===!1&&w===void 0){re(V);return}const{activeElement:fe}=document,Z=U.value;se===!0&&Z!==null&&Z!==fe&&Z.contains(fe)===!0&&(Z.addEventListener("focusout",ie),setTimeout(()=>{Z!==null&&Z.removeEventListener("focusout",ie)})),Ql(Z,V-a);const Fe=w!==void 0?b.slice(a,V).reduce(ke,0):0;if(se===!0){const ve=H>=_.value.from&&a<=_.value.to?_.value.to:H;_.value={from:a,to:ve},F.value=Oe(k,b,0,a),z.value=Oe(k,b,H,e.value),requestAnimationFrame(()=>{_.value.to!==H&&h===g.scrollStart&&(_.value={from:_.value.from,to:H},z.value=Oe(k,b,H,e.value))})}requestAnimationFrame(()=>{if(h!==g.scrollStart)return;se===!0&&ee(a);const ve=b.slice(a,V).reduce(ke,0),ge=ve+g.offsetStart+F.value,ze=ge+b[V];let xe=ge+O;if(w!==void 0){const Ke=ve-Fe,$=g.scrollStart+Ke;xe=x!==!0&&$<ge&&ze<$+g.scrollViewSize?$:w==="end"?ze-g.scrollViewSize:ge-(w==="start"?0:Math.round((g.scrollViewSize-b[V])/2))}h=xe,Ct(r,xe,u.virtualScrollHorizontal,f.lang.rtl),re(V)})}function ee(r){const g=U.value;if(g){const V=Mt.call(g.children,a=>a.classList&&a.classList.contains("q-virtual-scroll--skip")===!1),O=V.length,T=u.virtualScrollHorizontal===!0?a=>a.getBoundingClientRect().width:a=>a.offsetHeight;let x=r,w,R;for(let a=0;a<O;){for(w=T(V[a]),a++;a<O&&V[a].classList.contains("q-virtual-scroll--with-prev")===!0;)w+=T(V[a]),a++;R=w-b[x],R!==0&&(b[x]+=R,k[Math.floor(x/X)]+=R),x++}}}function ie(){U.value!==null&&U.value!==void 0&&U.value.focus()}function te(r,g){const V=1*S.value;(g===!0||Array.isArray(b)===!1)&&(b=[]);const O=b.length;b.length=e.value;for(let x=e.value-1;x>=O;x--)b[x]=V;const T=Math.floor((e.value-1)/X);k=[];for(let x=0;x<=T;x++){let w=0;const R=Math.min((x+1)*X,e.value);for(let a=x*X;a<R;a++)w+=b[a];k.push(w)}d=-1,h=void 0,F.value=Oe(k,b,0,_.value.from),z.value=Oe(k,b,_.value.to,e.value),r>=0?(ee(_.value.from),ce(()=>{Y(r)})):J()}function G(r){if(r===void 0&&typeof window!="undefined"){const w=n();w!=null&&w.nodeType!==8&&(r=Ge(w,o(),D.value,L.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}y=r;const g=parseFloat(u.virtualScrollSliceRatioBefore)||0,V=parseFloat(u.virtualScrollSliceRatioAfter)||0,O=1+g+V,T=r===void 0||r<=0?1:Math.ceil(r/S.value),x=Math.max(1,T,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/O));q.value={total:Math.ceil(x*O),start:Math.ceil(x*g),center:Math.ceil(x*(.5+g)),end:Math.ceil(x*(1+g)),view:T}}function Se(r,g){const V=u.virtualScrollHorizontal===!0?"width":"height",O={["--q-virtual-scroll-item-"+V]:S.value+"px"};return[r==="tbody"?A(r,{class:"q-virtual-scroll__padding",key:"before",ref:D},[A("tr",[A("td",{style:{[V]:`${F.value}px`,...O},colspan:B.value})])]):A(r,{class:"q-virtual-scroll__padding",key:"before",ref:D,style:{[V]:`${F.value}px`,...O}}),A(r,{class:"q-virtual-scroll__content",key:"content",ref:U,tabindex:-1},g.flat()),r==="tbody"?A(r,{class:"q-virtual-scroll__padding",key:"after",ref:L},[A("tr",[A("td",{style:{[V]:`${z.value}px`,...O},colspan:B.value})])]):A(r,{class:"q-virtual-scroll__padding",key:"after",ref:L,style:{[V]:`${z.value}px`,...O}})]}function re(r){d!==r&&(u.onVirtualScroll!==void 0&&m("virtualScroll",{index:r,from:_.value.from,to:_.value.to-1,direction:r<d?"decrease":"increase",ref:v}),d=r)}G();const J=gl(j,f.platform.is.ios===!0?120:35);yl(()=>{G()});let c=!1;return bl(()=>{c=!0}),wl(()=>{if(c!==!0)return;const r=n();h!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Ct(r,h,u.virtualScrollHorizontal,f.lang.rtl):Y(d)}),Ze(()=>{J.cancel()}),Object.assign(v,{scrollTo:Y,reset:ne,refresh:oe}),{virtualScrollSliceRange:_,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:G,onVirtualScrollEvt:J,localResetVirtualScroll:te,padVirtualScroll:Se,scrollTo:Y,reset:ne,refresh:oe}}function uu(e,n,o){return o<=n?n:Math.min(o,Math.max(n,e))}function pt(e,n,o){if(o<=n)return n;const S=o-n+1;let l=n+(e-n)%S;return l<n&&(l=S+l),l===0?0:l}const Vt=e=>["add","add-unique","toggle"].includes(e),Yl=".*+?^${}()|[]\\",Gl=Object.keys(Je);var nu=Le({name:"QSelect",inheritAttrs:!1,props:{...Wl,...Cl,...Je,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Vt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...xt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:n,emit:o}){const{proxy:S}=De(),{$q:l}=S,u=P(!1),m=P(!1),v=P(-1),f=P(""),h=P(!1),d=P(!1);let y=null,k,b,F,z=null,q,D,L,U;const _=P(null),B=P(null),W=P(null),Q=P(null),ne=P(null),oe=pl(e),Y=xl(st),j=C(()=>Array.isArray(e.options)?e.options.length:0),ae=C(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ee,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:te,padVirtualScroll:G,onVirtualScrollEvt:Se,scrollTo:re,setVirtualScrollSize:J}=Xl({virtualScrollLength:j,getVirtualScrollTarget:Bt,getVirtualScrollEl:it,virtualScrollItemSizeComputed:ae}),c=At(),r=C(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const i=e.mapOptions===!0&&k!==void 0?k:[],p=s.map(M=>_t(M,i));return e.modelValue===null&&t===!0?p.filter(M=>M!==null):p}return s}),g=C(()=>{const t={};return Gl.forEach(s=>{const i=e[s];i!==void 0&&(t[s]=i)}),t}),V=C(()=>e.optionsDark===null?c.isDark.value:e.optionsDark),O=C(()=>ht(r.value)),T=C(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),x=C(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),w=C(()=>j.value===0),R=C(()=>r.value.map(t=>N.value(t)).join(", ")),a=C(()=>e.displayValue!==void 0?e.displayValue:R.value),H=C(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),se=C(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(H.value))),fe=C(()=>c.focused.value===!0?e.tabindex:-1),Z=C(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${c.targetUid.value}_lb`};return v.value>=0&&(t["aria-activedescendant"]=`${c.targetUid.value}_${v.value}`),t}),Fe=C(()=>({id:`${c.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ve=C(()=>r.value.map((t,s)=>({index:s,opt:t,html:H.value(t),selected:!0,removeAtIndex:zt,toggleOption:me,tabindex:fe.value}))),ge=C(()=>{if(j.value===0)return[];const{from:t,to:s}=ee.value;return e.options.slice(t,s).map((i,p)=>{const M=ye.value(i)===!0,E=t+p,I={clickable:!0,active:!1,activeClass:Ke.value,manualFocus:!0,focused:!1,disable:M,tabindex:-1,dense:e.optionsDense,dark:V.value,role:"option",id:`${c.targetUid.value}_${E}`,onClick:()=>{me(i)}};return M!==!0&&(Ne(i)===!0&&(I.active=!0),v.value===E&&(I.focused=!0),I["aria-selected"]=I.active===!0?"true":"false",l.platform.is.desktop===!0&&(I.onMousemove=()=>{u.value===!0&&be(E)})),{index:E,opt:i,html:H.value(i),label:N.value(i),selected:I.active,focused:I.focused,toggleOption:me,setOptionIndex:be,itemProps:I}})}),ze=C(()=>e.dropdownIcon!==void 0?e.dropdownIcon:l.iconSet.arrow.dropdown),xe=C(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ke=C(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),$=C(()=>je(e.optionValue,"value")),N=C(()=>je(e.optionLabel,"label")),ye=C(()=>je(e.optionDisable,"disable")),_e=C(()=>r.value.map(t=>$.value(t))),Ft=C(()=>{const t={onInput:st,onChange:Y,onKeydown:at,onKeyup:nt,onKeypress:ot,onFocus:lt,onClick(s){b===!0&&le(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Y,t});de(r,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&c.innerLoading.value!==!0&&(m.value!==!0&&u.value!==!0||O.value!==!0)&&(F!==!0&&Ve(),(m.value===!0||u.value===!0)&&we(""))},{immediate:!0}),de(()=>e.fillInput,Ve),de(u,Qe),de(j,Qt);function et(t){return e.emitValue===!0?$.value(t):t}function $e(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();o("remove",{index:t,value:s.splice(t,1)[0]}),o("update:modelValue",s)}else o("update:modelValue",null)}function zt(t){$e(t),c.focus()}function tt(t,s){const i=et(t);if(e.multiple!==!0){e.fillInput===!0&&qe(N.value(t),!0,!0),o("update:modelValue",i);return}if(r.value.length===0){o("add",{index:0,value:i}),o("update:modelValue",e.multiple===!0?[i]:i);return}if(s===!0&&Ne(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const p=e.modelValue.slice();o("add",{index:p.length,value:i}),p.push(i),o("update:modelValue",p)}function me(t,s){if(c.editable.value!==!0||t===void 0||ye.value(t)===!0)return;const i=$.value(t);if(e.multiple!==!0){s!==!0&&(qe(e.fillInput===!0?N.value(t):"",!0,!0),he()),B.value!==null&&B.value.focus(),(r.value.length===0||Ee($.value(r.value[0]),i)!==!0)&&o("update:modelValue",e.emitValue===!0?i:t);return}if((b!==!0||h.value===!0)&&c.focus(),lt(),r.value.length===0){const E=e.emitValue===!0?i:t;o("add",{index:0,value:E}),o("update:modelValue",e.multiple===!0?[E]:E);return}const p=e.modelValue.slice(),M=_e.value.findIndex(E=>Ee(E,i));if(M>-1)o("remove",{index:M,value:p.splice(M,1)[0]});else{if(e.maxValues!==void 0&&p.length>=e.maxValues)return;const E=e.emitValue===!0?i:t;o("add",{index:p.length,value:E}),p.push(E)}o("update:modelValue",p)}function be(t){if(l.platform.is.desktop!==!0)return;const s=t>-1&&t<j.value?t:-1;v.value!==s&&(v.value=s)}function Be(t=1,s){if(u.value===!0){let i=v.value;do i=pt(i+t,-1,j.value-1);while(i!==-1&&i!==v.value&&ye.value(e.options[i])===!0);v.value!==i&&(be(i),re(i),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Ie(i>=0?N.value(e.options[i]):q))}}function _t(t,s){const i=p=>Ee($.value(p),t);return e.options.find(i)||s.find(i)||t}function je(t,s){const i=t!==void 0?t:s;return typeof i=="function"?i:p=>p!==null&&typeof p=="object"&&i in p?p[i]:p}function Ne(t){const s=$.value(t);return _e.value.find(i=>Ee(i,s))!==void 0}function lt(t){e.useInput===!0&&B.value!==null&&(t===void 0||B.value===t.target&&t.target.value===R.value)&&B.value.select()}function ut(t){ql(t,27)===!0&&u.value===!0&&(le(t),he(),Ve()),o("keyup",t)}function nt(t){const{value:s}=t.target;if(t.keyCode!==void 0){ut(t);return}if(t.target.value="",y!==null&&(clearTimeout(y),y=null),Ve(),typeof s=="string"&&s.length>0){const i=s.toLocaleLowerCase(),p=E=>{const I=e.options.find(K=>E.value(K).toLocaleLowerCase()===i);return I===void 0?!1:(r.value.indexOf(I)===-1?me(I):he(),!0)},M=E=>{p($)!==!0&&(p(N)===!0||E===!0||we(s,!0,()=>M(!0)))};M()}else c.clearValue(t)}function ot(t){o("keypress",t)}function at(t){if(o("keydown",t),Al(t)===!0)return;const s=f.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),i=t.shiftKey!==!0&&e.multiple!==!0&&(v.value>-1||s===!0);if(t.keyCode===27){Me(t);return}if(t.keyCode===9&&i===!1){Ce();return}if(t.target===void 0||t.target.id!==c.targetUid.value)return;if(t.keyCode===40&&c.innerLoading.value!==!0&&u.value===!1){ue(t),pe();return}if(t.keyCode===8&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?$e(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(ue(t),v.value=-1,Be(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ie.value!==void 0&&(ue(t),v.value=Math.max(-1,Math.min(j.value,v.value+(t.keyCode===33?-1:1)*ie.value.view)),Be(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ue(t),Be(t.keyCode===38?-1:1,e.multiple));const p=j.value;if((L===void 0||U<Date.now())&&(L=""),p>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||L.length>0)){u.value!==!0&&pe(t);const M=t.key.toLocaleLowerCase(),E=L.length===1&&L[0]===M;U=Date.now()+1500,E===!1&&(ue(t),L+=M);const I=new RegExp("^"+L.split("").map(Ue=>Yl.indexOf(Ue)>-1?"\\"+Ue:Ue).join(".*"),"i");let K=v.value;if(E===!0||K<0||I.test(N.value(e.options[K]))!==!0)do K=pt(K+1,-1,p-1);while(K!==v.value&&(ye.value(e.options[K])===!0||I.test(N.value(e.options[K]))!==!0));v.value!==K&&ce(()=>{be(K),re(K),K>=0&&e.useInput===!0&&e.fillInput===!0&&Ie(N.value(e.options[K]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||L!=="")&&(t.keyCode!==9||i===!1))){if(t.keyCode!==9&&ue(t),v.value>-1&&v.value<p){me(e.options[v.value]);return}if(s===!0){const M=(E,I)=>{if(I){if(Vt(I)!==!0)return}else I=e.newValueMode;if(E==null)return;qe("",e.multiple!==!0,!0),(I==="toggle"?me:tt)(E,I==="add-unique"),e.multiple!==!0&&(B.value!==null&&B.value.focus(),he())};if(e.onNewValue!==void 0?o("newValue",f.value,M):M(f.value),e.multiple!==!0)return}u.value===!0?Ce():c.innerLoading.value!==!0&&pe()}}function it(){return b===!0?ne.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function Bt(){return it()}function It(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?ve.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?ve.value.map((t,s)=>A($l,{key:"option-"+s,removable:c.editable.value===!0&&ye.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:fe.value,onRemove(){t.removeAtIndex(s)}},()=>A("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:N.value(t.opt)}))):[A("span",{[se.value===!0?"innerHTML":"textContent"]:a.value})]}function rt(){if(w.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:f.value}):void 0;const t=n.option!==void 0?n.option:i=>A(Hl,{key:i.index,...i.itemProps},()=>A(Pl,()=>A(Rl,()=>A("span",{[i.html===!0?"innerHTML":"textContent"]:i.label}))));let s=G("div",ge.value.map(t));return n["before-options"]!==void 0&&(s=n["before-options"]().concat(s)),Ol(n["after-options"],s)}function Tt(t,s){const i=s===!0?{...Z.value,...c.splitAttrs.attributes.value}:void 0,p={ref:s===!0?B:void 0,key:"i_t",class:T.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...i,id:s===!0?c.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ft.value};return t!==!0&&b===!0&&(Array.isArray(p.class)===!0?p.class=[...p.class,"no-pointer-events"]:p.class+=" no-pointer-events"),A("input",p)}function st(t){y!==null&&(clearTimeout(y),y=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ie(t.target.value||""),F=!0,q=f.value,c.focused.value!==!0&&(b!==!0||h.value===!0)&&c.focus(),e.onFilter!==void 0&&(y=setTimeout(()=>{y=null,we(f.value)},e.inputDebounce)))}function Ie(t){f.value!==t&&(f.value=t,o("inputValue",t))}function qe(t,s,i){F=i!==!0,e.useInput===!0&&(Ie(t),(s===!0||i!==!0)&&(q=t),s!==!0&&we(t))}function we(t,s,i){if(e.onFilter===void 0||s!==!0&&c.focused.value!==!0)return;c.innerLoading.value===!0?o("filterAbort"):(c.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&F!==!0&&t===N.value(r.value[0])&&(t="");const p=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);z!==null&&clearTimeout(z),z=p,o("filter",t,(M,E)=>{(s===!0||c.focused.value===!0)&&z===p&&(clearTimeout(z),typeof M=="function"&&M(),d.value=!1,ce(()=>{c.innerLoading.value=!1,c.editable.value===!0&&(s===!0?u.value===!0&&he():u.value===!0?Qe(!0):u.value=!0),typeof E=="function"&&ce(()=>{E(S)}),typeof i=="function"&&ce(()=>{i(S)})}))},()=>{c.focused.value===!0&&z===p&&(clearTimeout(z),c.innerLoading.value=!1,d.value=!1),u.value===!0&&(u.value=!1)})}function Pt(){return A(jl,{ref:W,class:x.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&w.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:V.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:xe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Fe.value,onScrollPassive:Se,onBeforeShow:dt,onBeforeHide:Rt,onShow:Ht},rt)}function Rt(t){ft(t),Ce()}function Ht(){J()}function Lt(t){le(t),B.value!==null&&B.value.focus(),h.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Dt(t){le(t),ce(()=>{h.value=!1})}function Kt(){const t=[A(Dl,{class:`col-auto ${c.fieldClass.value}`,...g.value,for:c.targetUid.value,dark:V.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:f.value.length>0,...c.splitAttrs.listeners.value,onFocus:Lt,onBlur:Dt},{...n,rawControl:()=>c.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(A("div",{ref:ne,class:x.value+" scroll",style:e.popupContentStyle,...Fe.value,onClick:Me,onScrollPassive:Se},rt())),A(El,{ref:Q,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:D,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:dt,onBeforeHide:$t,onHide:jt,onShow:Nt},()=>A("div",{class:"q-select__dialog"+(V.value===!0?" q-select__dialog--dark q-dark":"")+(h.value===!0?" q-select__dialog--focused":"")},t))}function $t(t){ft(t),Q.value!==null&&Q.value.__updateRefocusTarget(c.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),c.focused.value=!1}function jt(t){he(),c.focused.value===!1&&o("blur",t),Ve()}function Nt(){const t=document.activeElement;(t===null||t.id!==c.targetUid.value)&&B.value!==null&&B.value!==t&&B.value.focus(),J()}function Ce(){m.value!==!0&&(v.value=-1,u.value===!0&&(u.value=!1),c.focused.value===!1&&(z!==null&&(clearTimeout(z),z=null),c.innerLoading.value===!0&&(o("filterAbort"),c.innerLoading.value=!1,d.value=!1)))}function pe(t){c.editable.value===!0&&(b===!0?(c.onControlFocusin(t),m.value=!0,ce(()=>{c.focus()})):c.focus(),e.onFilter!==void 0?we(f.value):(w.value!==!0||n["no-option"]!==void 0)&&(u.value=!0))}function he(){m.value=!1,Ce()}function Ve(){e.useInput===!0&&qe(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&N.value(r.value[0])||"",!0,!0)}function Qe(t){let s=-1;if(t===!0){if(r.value.length>0){const i=$.value(r.value[0]);s=e.options.findIndex(p=>Ee($.value(p),i))}te(s)}be(s)}function Qt(t,s){u.value===!0&&c.innerLoading.value===!1&&(te(-1,!0),ce(()=>{u.value===!0&&c.innerLoading.value===!1&&(t>s?te():Qe(!0))}))}function ct(){m.value===!1&&W.value!==null&&W.value.updatePosition()}function dt(t){t!==void 0&&le(t),o("popupShow",t),c.hasPopupOpen=!0,c.onControlFocusin(t)}function ft(t){t!==void 0&&le(t),o("popupHide",t),c.hasPopupOpen=!1,c.onControlFocusout(t)}function vt(){b=l.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||w.value===!1:!0),D=l.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return Vl(vt),kl(ct),vt(),Ze(()=>{y!==null&&clearTimeout(y)}),Object.assign(S,{showPopup:pe,hidePopup:he,removeAtIndex:$e,add:tt,toggleOption:me,getOptionIndex:()=>v.value,setOptionIndex:be,moveOptionSelection:Be,filter:we,updateMenuPosition:ct,updateInputValue:qe,isOptionSelected:Ne,getEmittingOptionValue:et,isOptionDisabled:(...t)=>ye.value.apply(null,t)===!0,getOptionValue:(...t)=>$.value.apply(null,t),getOptionLabel:(...t)=>N.value.apply(null,t)}),Object.assign(c,{innerValue:r,fieldClass:C(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:_,targetRef:B,hasValue:O,showPopup:pe,floatingLabel:C(()=>e.hideSelected!==!0&&O.value===!0||typeof f.value=="number"||f.value.length>0||ht(e.displayValue)),getControlChild:()=>{if(c.editable.value!==!1&&(m.value===!0||w.value!==!0||n["no-option"]!==void 0))return b===!0?Kt():Pt();c.hasPopupOpen===!0&&(c.hasPopupOpen=!1)},controlEvents:{onFocusin(t){c.onControlFocusin(t)},onFocusout(t){c.onControlFocusout(t,()=>{Ve(),Ce()})},onClick(t){if(Me(t),b!==!0&&u.value===!0){Ce(),B.value!==null&&B.value.focus();return}pe(t)}},getControl:t=>{const s=It(),i=t===!0||m.value!==!0||b!==!0;if(e.useInput===!0)s.push(Tt(t,i));else if(c.editable.value===!0){const M=i===!0?Z.value:void 0;s.push(A("input",{ref:i===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:i===!0?c.targetUid.value:void 0,value:a.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...M,onKeydown:at,onKeyup:ut,onKeypress:ot})),i===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&s.push(A("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:nt}))}if(oe.value!==void 0&&e.disable!==!0&&_e.value.length>0){const M=_e.value.map(E=>A("option",{value:E,selected:!0}));s.push(A("select",{class:"hidden",name:oe.value,multiple:e.multiple},M))}const p=e.useInput===!0||i!==!0?void 0:c.splitAttrs.attributes.value;return A("div",{class:"q-field__native row items-center",...p,...c.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[A(Pe,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:ze.value})]:null}),qt(c)}});export{nu as Q,lu as T,$l as a,uu as b,jl as c,pt as n,He as r};
