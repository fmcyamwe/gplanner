import{_ as C,E as r,O as m,H as s,G as o,bt as v,a1 as k,M as c,F as h,Q as f,I as u,a2 as B,J as A,bu as _,aq as b,N as y,a3 as V,a6 as g,a7 as q}from"./index.9430d842.js";import{Q as x}from"./QSelect.738cda65.js";import{b as F,Q}from"./QItem.90a110a6.js";import{Q as E}from"./QKnob.67a6e52d.js";import{Q as P}from"./QSpace.064b2ac9.js";import"./touch.70a9dd44.js";import"./goalStorage.5f034ce0.js";const S={name:"selectEvent",props:{unscheduled:Array,unscheduledParents:Array,toBalance:Number},data(){return{doForce:!1,selectedE:null,dura:null,useBalance:!1,allEvts:this.unscheduled,unscheduledP:this.unscheduledParents,selectedP:null}},emits:["onPickEvent","doCancel"],computed:{toFilterBy:{get(){return this.selectedP},set(e){this.selectedP=e,this.toAdd&&(this.toAdd=null)}},allunScheduled:{get(){return this.selectedP?this.unscheduled.filter(e=>e.parentGoal==this.selectedP.id):this.allEvts},set(e){this.allEvts=e}},toAdd:{get(){return this.selectedE},set(e){this.selectedE=e,this.dura=(e==null?void 0:e.duration)||0}}},methods:{clear(){this.toFilterBy=null,this.toAdd=null},onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance,this.dura),this.doForce=!1,this.useBalance=!1,this.toAdd=null},filterFn(e,t,n){t(()=>{const i=e.toLowerCase();this.allunScheduled=this.unscheduled.filter(d=>(d==null?void 0:d.title.toLowerCase().indexOf(i))>-1)})},setModel(e){this.toAdd=e},goalyColor(e){var t,n,i;return this.toAdd==null?"":e=="c"?"bg-"+((t=this.toAdd)==null?void 0:t.color)+" "+((n=this.toAdd)==null?void 0:n.ic):(i=this.toAdd)==null?void 0:i.color},labely(){var e;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":` Of: ${((e=this.toAdd)==null?void 0:e.pg)||""}`},classy(){return this.toAdd==null||this.toAdd==null||this.toAdd==""?"q-gutter-md q-px-md":"q-px-md"},canBalance(){var t,n;let e=this.toBalance+parseInt((t=this.toAdd)==null?void 0:t.duration)||((n=this.toAdd)==null?void 0:n.isAlternative);return this.toAdd==null?!1:e}}},p=e=>(g("data-v-a7fc9e92"),e=e(),q(),e),I={class:"q-pa-md"},w=p(()=>c("div",{class:"text-h3"},"Select event",-1)),N={class:"q-mx-md event-select"},U={key:0,class:"q-mx-md event-select"},z={key:1,class:"q-px-md"},G=p(()=>c("br",null,null,-1)),M=p(()=>c("div",{class:"q-mx-md",style:{"text-align":"center"}}," Add ",-1));function O(e,t,n,i,d,l){return r(),m("div",I,[s(V,null,{default:o(()=>[s(v,null,{default:o(()=>[w]),_:1}),s(k),c("div",N,[s(x,{modelValue:l.toFilterBy,"onUpdate:modelValue":t[0]||(t[0]=a=>l.toFilterBy=a),options:d.unscheduledP,class:"q-gutter-md q-px-md","option-value":"id","option-label":"title",popupContentClass:"q-px-sm","input-debounce":"0",label:"Filter by Parent Goal",behavior:"menu"},{default:o(()=>[l.toFilterBy?(r(),h(f,{key:0,name:"clear",size:"14px",onClick:l.clear},null,8,["onClick"])):u("",!0)]),_:1},8,["modelValue","options"])]),this.selectedP?(r(),m("div",U,[s(x,{modelValue:l.toAdd,"onUpdate:modelValue":t[1]||(t[1]=a=>l.toAdd=a),options:l.allunScheduled,class:B(l.classy()),"option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:l.labely(),"options-selected-class":l.goalyColor("c"),"label-color":l.goalyColor("l"),onFilter:l.filterFn,onInputValue:l.setModel,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu"},{"no-option":o(()=>[s(F,null,{default:o(()=>[s(Q,{class:"text-grey"},{default:o(()=>[A(" No results ")]),_:1})]),_:1})]),before:o(()=>[l.toAdd?(r(),h(f,{key:0,name:l.toAdd.ic,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):u("",!0)]),_:1},8,["modelValue","options","class","label","options-selected-class","label-color","onFilter","onInputValue"])])):u("",!0),l.toAdd?(r(),m("div",z,[A(" Duration (min) "),s(E,{min:5,max:120,thickness:.22,step:5,modelValue:d.dura,"onUpdate:modelValue":t[2]||(t[2]=a=>d.dura=a),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md"},null,8,["thickness","modelValue"])])):u("",!0),G,s(_,{align:"center",class:"q-px-xl"},{default:o(()=>[s(b,{dense:"",modelValue:d.doForce,"onUpdate:modelValue":t[3]||(t[3]=a=>d.doForce=a),label:"Force In",color:"teal"},null,8,["modelValue"]),s(P),l.canBalance()?(r(),h(b,{key:0,dense:"",modelValue:d.useBalance,"onUpdate:modelValue":t[4]||(t[4]=a=>d.useBalance=a),label:"Use Balance",color:"brown"},null,8,["modelValue"])):u("",!0)]),_:1}),s(_,{align:"center"},{default:o(()=>[s(y,{flat:"",label:"Cancel",color:"primary",onClick:t[5]||(t[5]=a=>e.$emit("doCancel"))}),s(y,{elevated:"",color:"primary",align:"between",onClick:l.onAddClicked},{default:o(()=>[M]),_:1},8,["onClick"])]),_:1})]),_:1})])}var R=C(S,[["render",O],["__scopeId","data-v-a7fc9e92"]]);export{R as default};
