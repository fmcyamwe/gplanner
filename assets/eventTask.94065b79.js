import{_ as N,d as $,E as w,F as h,M as u,I as r,K as d,H as c,Q as b,N as m,O as v,P as g,R as C,S as M,J as f,U as Q,V as L}from"./index.1553c8f3.js";import{N as G,Q as q,t as D,g as B,p as k,i as p,a as T}from"./NavigationBar.a288a70d.js";import{u as E}from"./goalStorage.15e0189c.js";import{u as H}from"./use-quasar.a1a5fbdb.js";const V=$({name:"TaskDark",components:{NavigationBar:G,QCalendarTask:q},data(){return{selectedDate:D(),selectedMonth:"",allMonths:B("long","en-US"),startDate:D(),endDate:D(),store:E(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:H()}},computed:{parsedTasks(){const e=k(this.startDate),s=k(this.endDate),l=[];for(let o=0;o<this.tasks.length;++o){const t=this.tasks[o];for(let n=0;n<t.logged.length;++n){const i=k(t.logged[n].date);if(p(i,e,s)){l.push(t);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){const e=new Date,s=e.getFullYear(),l=T(e.getMonth()+1,2);let o=this.store.fetchAllTaskSummary();if(o.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=o,console.log("weeee tasks:",this.tasks);const t=n=>{n.logged.forEach(i=>{const _=i.date.slice(-2);[s,T(l,2),T(_,2)].join("-")})};this.tasks.forEach(n=>{t(n),n.children!==void 0&&n.children.forEach(i=>{t(i)})})},methods:{getLogged(e,s,l=null){const o=[];if(s.length==0)return console.log("Empty getLogged?!?",e,l),o;for(let t=0;t<s.length;++t)if(s[t].date===e){o.push({logged:s[t].logged});break}return o},getLoggedSummary(e){let s=0;const l=(o,t)=>e===t.date?o+t.logged:o;for(const o in this.tasks)s+=this.tasks[o].logged.reduce(l,0);return s},sum(e,s,l){const o=(t,n)=>{const i=k(n.date);return p(i,e,s)?t+n.logged:t};return l.logged.reduce(o,0)},getTasks(e,s,l){const o=[];for(let t=0;t<l.logged.length;++t){const n=k(l.logged[t].date);if(p(n,e,s)){o.push(l);break}}return o},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,s){let l=0;const o=(t,n)=>{const i=k(n.date);return p(i,e,s)?t+n.logged:t};for(const t in this.tasks)l+=this.tasks[t].logged.reduce(o,0);return l},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let s=e.days[0].month;console.log("onChange",s,e),this.selectedMonth=this.allMonths[s-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),S=e=>(Q("data-v-60525596"),e=e(),L(),e),j={class:"subcontent"},F={class:"row justify-center"},I={style:{display:"flex","max-width":"800px",width:"100%"}},P={class:"header ellipsis",style:{"font-weight":"600"}},U={class:"issue ellipsis"},A=S(()=>d("div",{class:"key"},"Key",-1)),K=S(()=>d("div",{class:"logged"},"Logged",-1)),O={class:"issue ellipsis"},R={class:"key"},J={class:"logged"},Y={key:0,class:"logged-time",style:{"font-weight":"800"}},x={key:1,class:"logged-time"},z={class:"summary ellipsis"},W={class:"title ellipsis"},X={class:"total"},Z={class:"logged-time"},ee={class:"row justify-center items-center"},te={class:"column justify-center items-center"};function se(e,s,l,o,t,n){const i=w("navigation-bar"),_=w("q-calendar-task");return h(),u("div",j,[r(i,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),d("div",F,[d("div",I,[r(_,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":s[0]||(s[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":s[1]||(s[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":s[2]||(s[2]=a=>e.footerTasks=a),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":c(({})=>[d("div",P,[d("div",U,g(e.getViewedMonth),1),A,K])]),task:c(({scope:a})=>[(h(!0),u(C,null,M(e.getTasks(a.start,a.end,a.task),y=>(h(),u("div",{key:y.key,class:"header ellipsis"},[d("div",O,g(a.task.title)+" ",1),d("div",R,g(a.task.key),1),d("div",J,g(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:c(({scope:a})=>[(h(!0),u(C,null,M(e.getLogged(a.timestamp.date,a.task.logged),y=>(h(),u(C,{key:y},[a.task.children!==void 0?(h(),u("div",Y,g(y.logged),1)):(h(),u("div",x,g(y.logged),1))],64))),128))]),"footer-task":c(({scope:a})=>[d("div",z,[d("div",W,g(a.footer.title),1),d("div",X,g(e.totals(a.start,a.end)),1)])]),"footer-day":c(({scope:a})=>[d("div",Z,g(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),d("div",ee,[r(b,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/dayCalendar",label:"Schedule","no-caps":""}),r(b,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/viewGoals",label:"Goals","no-caps":""})]),d("div",te,[r(m,null,{default:c(()=>[f(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),r(v),r(m,null,{default:c(()=>[f(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),r(v),r(m,null,{default:c(()=>[f(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),r(v),r(m,null,{default:c(()=>[f(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),r(v),r(m,null,{default:c(()=>[f(" 5. Check out the summary of all goals here! ")]),_:1})])])}var de=N(V,[["render",se],["__scopeId","data-v-60525596"]]);export{de as default};
