import{_ as b,d as M,E as D,F as c,M as g,I as r,K as d,H as i,ak as m,ai as p,S as h,O as C,N as S,J as f,al as N,am as $,R as G}from"./index.3e7e061f.js";import{N as L,P as Q,t as T,S as V,c as k,i as v,Q as E}from"./NavigationBar.834eaedf.js";/* empty css                             */import{u as F}from"./goalStorage.3adfc774.js";import{u as H}from"./use-quasar.d070d5b1.js";const q=M({name:"TaskDark",components:{NavigationBar:L,QCalendarTask:Q},data(){return{selectedDate:T(),selectedMonth:"",allMonths:V("long","en-US"),startDate:T(),endDate:T(),store:F(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:H(),treeGoals:[],expanded:[]}},computed:{parsedTasks(){const e=k(this.startDate),s=k(this.endDate),l=[];for(let a=0;a<this.tasks.length;++a){const o=this.tasks[a];for(let n=0;n<o.logged.length;++n){const u=k(o.logged[n].date);if(v(u,e,s)){l.push(o);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e,console.log("weeee tasks:",this.tasks);const s=l=>{l.logged.forEach(a=>{a.date.slice(-2)})};this.tasks.forEach(l=>{s(l),l.children!==void 0&&l.children.forEach(a=>{s(a)})}),this.constructTree()},methods:{getLogged(e,s,l=null){const a=[];if(s.length==0)return console.log("ERROR...Empty getLogged?!?",e,l),a;for(let o=0;o<s.length;++o)if(s[o].date===e){a.push({logged:s[o].logged});break}return a},getLoggedSummary(e){let s=0;const l=(a,o)=>e===o.date?a+o.logged:a;for(const a in this.tasks)s+=this.tasks[a].logged.reduce(l,0);return s.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree(),console.log("constructTree",this.treeGoals)},sum(e,s,l){const a=(n,u)=>{const _=k(u.date);return v(_,e,s)?n+u.logged:n};return l.logged.reduce(a,0).toFixed(2)},getTasks(e,s,l){const a=[];for(let o=0;o<l.logged.length;++o){const n=k(l.logged[o].date);if(v(n,e,s)){a.push(l);break}}return a},badgeStyles(e){return{color:e.isChild?"white":e.color!==void 0?e.color:"gold"}},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,s){let l=0;const a=(o,n)=>{const u=k(n.date);return v(u,e,s)?o+n.logged:o};for(const o in this.tasks)l+=this.tasks[o].logged.reduce(a,0);return l.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let s=e.days[0].month;console.log("onChange",s,e),this.selectedMonth=this.allMonths[s-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),w=e=>(N("data-v-41020aa4"),e=e(),$(),e),B={class:"subcontent"},I={class:"row justify-center"},P={style:{display:"flex","max-width":"800px",width:"100%"}},R={class:"header ellipsis",style:{"font-weight":"600"}},U={class:"issue ellipsis"},x=w(()=>d("div",{class:"key"},"Key",-1)),A=w(()=>d("div",{class:"logged"},"Logged",-1)),j={class:"key"},O={class:"logged"},K={key:0,class:"logged-time",style:{"font-weight":"800"}},z={key:1,class:"logged-time"},J={class:"summary ellipsis"},W={class:"title ellipsis"},X={class:"total"},Y={class:"logged-time"},Z=w(()=>d("br",null,null,-1)),ee={key:0,class:"column justify-center items-center"},se={key:1,class:"q-pa-xl bg-grey-9 text-white",style:{"max-width":"350px"}};function te(e,s,l,a,o,n){const u=D("navigation-bar"),_=D("q-calendar-task");return c(),g("div",B,[r(u,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),d("div",I,[d("div",P,[r(_,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":s[0]||(s[0]=t=>e.selectedDate=t),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":s[1]||(s[1]=t=>e.parsedTasks=t),"model-footer":e.footerTasks,"onUpdate:modelFooter":s[2]||(s[2]=t=>e.footerTasks=t),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":i(({})=>[d("div",R,[d("div",U,h(e.getViewedMonth),1),x,A])]),task:i(({scope:t})=>[(c(!0),g(C,null,S(e.getTasks(t.start,t.end,t.task),y=>(c(),g("div",{key:y.key,class:"header ellipsis"},[d("div",{class:"issue ellipsis",style:G(e.badgeStyles(t.task))},h(t.task.title)+" ",5),d("div",j,h(t.task.key),1),d("div",O,h(e.sum(t.start,t.end,t.task)),1)]))),128))]),day:i(({scope:t})=>[(c(!0),g(C,null,S(e.getLogged(t.timestamp.date,t.task.logged),y=>(c(),g(C,{key:y},[t.task.children!==void 0?(c(),g("div",K,h(y.logged),1)):(c(),g("div",z,h(y.logged),1))],64))),128))]),"footer-task":i(({scope:t})=>[d("div",J,[d("div",W,h(t.footer.title),1),d("div",X,h(e.totals(t.start,t.end)),1)])]),"footer-day":i(({scope:t})=>[d("div",Y,h(e.getLoggedSummary(t.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),Z,e.tasks.length<=0?(c(),g("div",ee,[r(m,null,{default:i(()=>[f(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),r(p),r(m,null,{default:i(()=>[f(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),r(p),r(m,null,{default:i(()=>[f(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),r(p),r(m,null,{default:i(()=>[f(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),r(p),r(m,null,{default:i(()=>[f(" 5. Check out the summary of all goals here! ")]),_:1})])):(c(),g("div",se,[r(E,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":s[3]||(s[3]=t=>e.expanded=t),dark:""},null,8,["nodes","expanded"])]))])}var re=b(q,[["render",te],["__scopeId","data-v-41020aa4"]]);export{re as default};
