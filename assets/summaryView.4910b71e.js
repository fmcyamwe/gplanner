import{j as V,l as he,m as j,as as le,c as b,q as fe,h as d,Q as A,k as E,W as se,Y as ie,s as ye,g as z,r as Q,at as ke,w as M,au as ae,av as be,e as re,i as de,aw as _e,ax as Ce,P as H,E as we,F as qe,d as Te,N as ne,G as m,H as q,I as u,O as i,J as v,M as f,R as k,S as F,U as x,L as w,a5 as $,a3 as D,K as T,a2 as pe,a4 as U}from"./index.a90d1627.js";import{a as Se,u as xe,Q as $e,b as De,c as Pe}from"./goalStorage.e1d7475d.js";import{i as Qe,Q as Me}from"./isMobile.a2aabf89.js";import{u as Ie,a as Fe,b as Ne,c as Ee}from"./use-panel.b3217d38.js";import{Q as Ve,t as R,P as Be,b as p,N}from"./QCalendarTask.d0e226d3.js";/* empty css                             */import Le from"./NavigationBar.9a790453.js";import"./utiFunc.f569f737.js";import"./touch.9135741d.js";var oe=V({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const l=he(le,j);if(l===j)return console.error("QTimelineEntry needs to be child of QTimeline"),j;const n=b(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),o=b(()=>`q-timeline__dot text-${e.color||l.color}`),s=b(()=>l.layout==="comfortable"&&l.side==="left");return()=>{const r=fe(t.default,[]);if(e.body!==void 0&&r.unshift(e.body),e.heading===!0){const c=[d("div"),d("div"),d(e.tag,{class:"q-timeline__heading-title"},r)];return d("div",{class:"q-timeline__heading"},s.value===!0?c.reverse():c)}let g;e.icon!==void 0?g=[d(A,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(g=[d("img",{class:"q-timeline__dot-img",src:e.avatar})]);const a=[d("div",{class:"q-timeline__subtitle"},[d("span",{},E(t.subtitle,[e.subtitle]))]),d("div",{class:o.value},g),d("div",{class:"q-timeline__content"},[d("h6",{class:"q-timeline__title"},E(t.title,[e.title]))].concat(r))];return d("li",{class:n.value},s.value===!0?a.reverse():a)}}}),Ge=V({name:"QTimeline",props:{...se,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const l=z(),n=ie(e,l.proxy.$q);ye(le,e);const o=b(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(n.value===!0?" q-timeline--dark":""));return()=>d("ul",{class:o.value},E(t.default))}}),Oe=V({name:"QCarouselSlide",props:{...Ie,imgSrc:String},setup(e,{slots:t}){const l=b(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:l.value},E(t.default))}});let P=0;const je={fullscreen:Boolean,noRouteFullscreenExit:Boolean},He=["update:fullscreen","fullscreen"];function Ue(){const e=z(),{props:t,emit:l,proxy:n}=e;let o,s,r;const g=Q(!1);ke(e)===!0&&M(()=>n.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&y()}),M(()=>t.fullscreen,C=>{g.value!==C&&a()}),M(g,C=>{l("update:fullscreen",C),l("fullscreen",C)});function a(){g.value===!0?y():c()}function c(){g.value!==!0&&(g.value=!0,r=n.$el.parentNode,r.replaceChild(s,n.$el),document.body.appendChild(n.$el),P++,P===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:y},ae.add(o))}function y(){g.value===!0&&(o!==void 0&&(ae.remove(o),o=void 0),r.replaceChild(n.$el,s),g.value=!1,P=Math.max(0,P-1),P===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return be(()=>{s=document.createElement("span")}),re(()=>{t.fullscreen===!0&&c()}),de(y),Object.assign(n,{toggleFullscreen:a,setFullscreen:c,exitFullscreen:y}),{inFullscreen:g,toggleFullscreen:a}}const Re=["top","right","bottom","left"],Ae=["regular","flat","outline","push","unelevated"];var ze=V({name:"QCarousel",props:{...se,...Fe,...je,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ae.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Re.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...He,...Ne],setup(e,{slots:t}){const{proxy:{$q:l}}=z(),n=ie(e,l);let o=null,s;const{updatePanelsList:r,getPanelContent:g,panelDirectives:a,goToPanel:c,previousPanel:y,nextPanel:C,getEnabledPanels:ue,panelIndex:I}=Ee(),{inFullscreen:K}=Ue(),ce=b(()=>K.value!==!0&&e.height!==void 0?{height:e.height}:{}),B=b(()=>e.vertical===!0?"vertical":"horizontal"),J=b(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),me=b(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(K.value===!0?" fullscreen":"")+(n.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${B.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${J.value}`:"")),W=b(()=>{const h=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?h.reverse():h}),Y=b(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),ge=b(()=>e.navigationActiveIcon||Y.value),L=b(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));M(()=>e.modelValue,()=>{e.autoplay&&G()}),M(()=>e.autoplay,h=>{h?G():o!==null&&(clearTimeout(o),o=null)});function G(){const h=_e(e.autoplay)===!0?Math.abs(e.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,h>=0?C():y()},h)}re(()=>{e.autoplay&&G()}),de(()=>{o!==null&&clearTimeout(o)});function X(h,S){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${h} q-carousel__navigation--${J.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},ue().map(S))])}function ve(){const h=[];if(e.navigation===!0){const S=t["navigation-icon"]!==void 0?t["navigation-icon"]:_=>d(H,{key:"nav"+_.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${_.active===!0?"":"in"}active`,..._.btnProps,onClick:_.onClick}),O=s-1;h.push(X("buttons",(_,Z)=>{const ee=_.props.name,te=I.value===Z;return S({index:Z,maxIndex:O,name:ee,active:te,btnProps:{icon:te===!0?ge.value:Y.value,size:"sm",...L.value},onClick:()=>{c(ee)}})}))}else if(e.thumbnails===!0){const S=e.controlColor!==void 0?` text-${e.controlColor}`:"";h.push(X("thumbnails",O=>{const _=O.props;return d("img",{key:"tmb#"+_.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${_.name===e.modelValue?"":"in"}active`+S,src:_.imgSrc||_["img-src"],onClick:()=>{c(_.name)}})}))}return e.arrows===!0&&I.value>=0&&((e.infinite===!0||I.value>0)&&h.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${B.value} absolute flex flex-center`},[d(H,{icon:W.value[0],...L.value,onClick:y})])),(e.infinite===!0||I.value<s-1)&&h.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${B.value} absolute flex flex-center`},[d(H,{icon:W.value[1],...L.value,onClick:C})]))),we(t.control,h)}return()=>(s=r(t),d("div",{class:me.value,style:ce.value},[Ce("div",{class:"q-carousel__slides-container"},g(),"sl-cont",e.swipeable,()=>a.value)].concat(ve())))}});const Ke=Te({name:"summaryCalendar",components:{NavigationBar:Le,QCalendarTask:Ve},data(){return{calendar:Q(null),mobile:Q(!0),selectedDate:R(),selectedMonth:"",allMonths:Be("long","en-US"),startDate:R(),endDate:R(),store:Se(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:xe(),treeGoals:[],expanded:[],showTree:!1,daOptions:Q({}),panel:Q("")}},computed:{parsedTasks(){const e=p(this.startDate),t=p(this.endDate),l=[];for(let n=0;n<this.tasks.length;++n){const o=this.tasks[n];for(let s=0;s<o.logged.length;++s){const r=p(o.logged[s].date);if(N(r,e,t)){l.push(o);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){this.mobile=Qe();let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e;const t={},l=(n,o=!1,s="")=>{n.logged.forEach(r=>{r.date.slice(-2),o&&(t[n.key]||(t[n.key]=[],this.panel=n.key),t[n.key].push({on:r.date,note:r.notes,score:r.atScore,title:n.title,color:s}))})};this.tasks.forEach(n=>{l(n),n.children!==void 0&&n.children.forEach(o=>{l(o,!0,n==null?void 0:n.color)})}),this.daOptions=t,this.constructTree()},methods:{getLogged(e,t,l=null){const n=[];if(t.length==0)return console.log("ERROR...Empty getLogged?!?",e,l),n;for(let o=0;o<t.length;++o)if(t[o].date===e){n.push({logged:t[o].logged});break}return n},classyColor(e){return`row items-center ${e.isChildren?"text-":"text-white bg-"}${e.color} `},timelineColor(e){return e!=""?`bg-${e} text-white shadow-2 rounded-borders q-px-md`:"bg-black text-white shadow-2 rounded-borders q-px-md"},getLoggedSummary(e){let t=0;const l=(n,o)=>e===o.date?n+o.logged:n;for(const n in this.tasks)t+=this.tasks[n].logged.reduce(l,0);return t.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree()},sum(e,t,l){const n=(s,r)=>{const g=p(r.date);return N(g,e,t)?s+r.logged:s};return l.logged.reduce(n,0).toFixed(2)},getTasks(e,t,l){const n=[];for(let o=0;o<l.logged.length;++o){const s=p(l.logged[o].date);if(N(s,e,t)){n.push(l);break}}return n},badgeStyles(e){return`issue ellipsis ${e.isChild?"text-white":`text-white bg-${e.color}`}`},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let l=0;const n=(o,s)=>{const r=p(s.date);return N(r,e,t)?o+s.logged:o};for(const o in this.tasks)l+=this.tasks[o].logged.reduce(n,0);return l.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let t=e.days[0].month;console.log("onChange",t,this.selectedDate,e),this.selectedMonth=this.allMonths[t-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),Je={class:"subcontent"},We={class:"q-pa-md"},Ye={class:"row justify-center"},Xe={style:{display:"flex","max-width":"800px",width:"100%"}},Ze={class:"header ellipsis",style:{"font-weight":"600"}},et={class:"issue ellipsis q-px-xs"},tt={class:"key"},at={class:"logged"},nt={key:0,class:"logged-time",style:{"font-weight":"800"}},ot={key:1,class:"logged-time"},lt={class:"summary ellipsis"},st={class:"title ellipsis"},it={class:"total"},rt={class:"logged-time"},dt={key:0,class:"column justify-center items-center"},ut={key:0,class:"q-pa-md"},ct={key:0,class:"q-pa-md bg-grey-12",style:{"max-width":"400px"}},mt={class:"q-mr-sm text-weight-bold",size:"28px"},gt={key:0},vt={class:"text-weight-bold"},ht={key:1,class:"text-weight-light text-black"},ft={class:"q-pa-sm q-pb-md"},yt={class:"q-px-sm myHeading"};function kt(e,t,l,n,o,s){const r=ne("navigation-bar"),g=ne("q-calendar-task");return m(),q($e,{padding:""},{default:u(()=>[i("div",Je,[i("div",We,[v(r,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),i("div",Ye,[i("div",Xe,[v(g,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=a=>e.footerTasks=a),view:"month","task-width":e.mobile?140:240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":u(({})=>[i("div",Ze,[i("div",et,f(e.getViewedMonth),1),t[6]||(t[6]=i("div",{class:"key"},"Key",-1)),t[7]||(t[7]=i("div",{class:"logged"},"Logged",-1))])]),task:u(({scope:a})=>[(m(!0),k(x,null,F(e.getTasks(a.start,a.end,a.task),c=>(m(),k("div",{key:c.key,class:"header ellipsis"},[i("div",{class:U(e.badgeStyles(c))},f(a.task.title),3),i("div",tt,f(a.task.key),1),i("div",at,f(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:u(({scope:a})=>[(m(!0),k(x,null,F(e.getLogged(a.timestamp.date,a.task.logged),c=>(m(),k(x,{key:c},[a.task.children!==void 0?(m(),k("div",nt,f(c.logged),1)):(m(),k("div",ot,f(c.logged),1))],64))),128))]),"footer-task":u(({scope:a})=>[i("div",lt,[i("div",st,f(a.footer.title),1),i("div",it,f(e.totals(a.start,a.end)),1)])]),"footer-day":u(({scope:a})=>[i("div",rt,f(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","task-width","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),t[14]||(t[14]=i("br",null,null,-1)),e.tasks.length<=0?(m(),k("div",dt,[t[13]||(t[13]=i("br",null,null,-1)),v($,null,{default:u(()=>t[8]||(t[8]=[w(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")])),_:1}),v(D),v($,null,{default:u(()=>t[9]||(t[9]=[w(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")])),_:1}),v(D),v($,null,{default:u(()=>t[10]||(t[10]=[w(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")])),_:1}),v(D),v($,null,{default:u(()=>t[11]||(t[11]=[w(" 4. Save the daily schedule (dont forget to update their score as needed!) ")])),_:1}),v(D),v($,null,{default:u(()=>t[12]||(t[12]=[w(" 5. Check out the summary of all goals here! ")])),_:1})])):T("",!0)]),v(pe,{modelValue:e.showTree,"onUpdate:modelValue":t[3]||(t[3]=a=>e.showTree=a),label:e.showTree?"Hide Legend":"Show Legend",color:"teal",class:"q-pa-md"},null,8,["modelValue","label"]),v(Pe,null,{default:u(()=>[e.showTree?(m(),k("div",ut,[e.treeGoals.length>0?(m(),k("div",ct,[t[15]||(t[15]=i("div",{class:"row justify-center"}," Goals & Goal Events ",-1)),v(D),t[16]||(t[16]=i("br",null,null,-1)),v(Me,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":t[4]||(t[4]=a=>e.expanded=a),"no-connectors":"",dense:"",accordion:""},{"default-header":u(a=>[i("div",{class:U(e.classyColor(a.node))},[a.node.isChildren?T("",!0):(m(),q(A,{key:0,name:a.expanded?"expand_less":"expand_more",size:"28px",class:"q-mr-sm"},null,8,["name"])),i("div",mt,f(a.node.label),1),v(A,{name:a.node.icon},null,8,["name"])],2)]),"default-body":u(a=>[a.node.isChildren?(m(),k("div",gt,[i("span",vt," >> "+f(a.node.details),1),a.node.moods.length>0?(m(),q(De,{key:0},{default:u(()=>[w(f("Moods::> "+a.node.moods.join(",")),1)]),_:2},1024)):T("",!0)])):(m(),k("span",ht,f(a.node.details),1))]),_:1},8,["nodes","expanded"])])):T("",!0)])):T("",!0)]),_:1}),Object.keys(e.daOptions).length>0?(m(),q(ze,{key:0,modelValue:e.panel,"onUpdate:modelValue":t[5]||(t[5]=a=>e.panel=a),"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"white",infinite:"",arrows:"",navigation:"",class:"bg-primary text-white shadow-2 rounded-borders",style:{width:"100%"}},{default:u(()=>[(m(!0),k(x,null,F(e.daOptions,(a,c)=>(m(),q(Oe,{name:c,key:c},{default:u(()=>[i("div",ft,[v(Ge,{class:U(e.timelineColor(a[0].color))},{default:u(()=>[v(oe,{heading:""},{default:u(()=>[i("span",yt,f(a[0].title),1)]),_:2},1024),(m(!0),k(x,null,F(a,y=>(m(),q(oe,{key:y.on,title:y.score,subtitle:y.on},{default:u(()=>[w(f(y.note),1)]),_:2},1032,["title","subtitle"]))),128))]),_:2},1032,["class"])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):T("",!0)])]),_:1})}var $t=qe(Ke,[["render",kt],["__scopeId","data-v-8de9ac1e"]]);export{$t as default};
