import{_ as w,d as b,j as C,k as c,U as g,p as u,s as l,m as h,Q as D,Y as f,Z as T,t as i,a2 as N,a3 as S}from"./index.549d4914.js";import{N as $,Q as L,t as p,p as k,i as m,a as _}from"./NavigationBar.65884ce3.js";import{u as M}from"./goalStorage.98b49868.js";import{u as Q}from"./use-quasar.233fae5c.js";const q=b({name:"TaskDark",components:{NavigationBar:$,QCalendarTask:L},data(){return{selectedDate:p(),startDate:p(),endDate:p(),store:M(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:Q()}},computed:{parsedTasks(){const e=k(this.startDate),a=k(this.endDate),n=[];for(let s=0;s<this.tasks.length;++s){const o=this.tasks[s];for(let d=0;d<o.logged.length;++d){const r=k(o.logged[d].date);if(m(r,e,a)){n.push(o);break}}}return n}},beforeMount(){const e=new Date,a=e.getFullYear(),n=_(e.getMonth()+1,2);let s=this.store.fetchAllTaskSummary();if(s.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=s,console.log("weeee?",this.tasks);const o=d=>{d.logged.forEach(r=>{const v=r.date.slice(-2);[a,_(n,2),_(v,2)].join("-")})};this.tasks.forEach(d=>{o(d),d.children!==void 0&&d.children.forEach(r=>{o(r)})})},methods:{getLogged(e,a){const n=[];for(let s=0;s<a.length;++s)if(a[s].date===e){n.push({logged:a[s].logged});break}return n},getLoggedSummary(e){let a=0;const n=(s,o)=>e===o.date?s+o.logged:s;for(const s in this.tasks)a+=this.tasks[s].logged.reduce(n,0);return a},sum(e,a,n){const s=(o,d)=>{const r=k(d.date);return m(r,e,a)?o+d.logged:o};return n.logged.reduce(s,0)},getTasks(e,a,n){const s=[];for(let o=0;o<n.logged.length;++o){const d=k(n.logged[o].date);if(m(d,e,a)){s.push(n);break}}return s},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,a){let n=0;const s=(o,d)=>{const r=k(d.date);return m(r,e,a)?o+d.logged:o};for(const o in this.tasks)n+=this.tasks[o].logged.reduce(s,0);return n},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){console.log("onChange",e),this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),B=e=>(N("data-v-03ea6c9c"),e=e(),S(),e),j={class:"subcontent"},H={class:"row justify-center"},E={style:{display:"flex","max-width":"800px",width:"100%"}},G=B(()=>l("div",{class:"header ellipsis",style:{"font-weight":"600"}},[l("div",{class:"issue ellipsis"},"Goaly"),l("div",{class:"key"},"Key"),l("div",{class:"logged"},"Logged")],-1)),I={class:"issue ellipsis"},P={class:"key"},U={class:"logged"},F={key:0,class:"logged-time",style:{"font-weight":"800"}},A={key:1,class:"logged-time"},V={class:"summary ellipsis"},Y={class:"title ellipsis"},K={class:"total"},O={class:"logged-time"},Z={class:"row justify-center items-center"};function z(e,a,n,s,o,d){const r=C("navigation-bar"),v=C("q-calendar-task");return c(),g("div",j,[u(r,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),l("div",H,[l("div",E,[u(v,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":a[0]||(a[0]=t=>e.selectedDate=t),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":a[1]||(a[1]=t=>e.parsedTasks=t),"model-footer":e.footerTasks,"onUpdate:modelFooter":a[2]||(a[2]=t=>e.footerTasks=t),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":h(({})=>[G]),task:h(({scope:t})=>[(c(!0),g(f,null,T(e.getTasks(t.start,t.end,t.task),y=>(c(),g("div",{key:y.key,class:"header ellipsis"},[l("div",I,i(t.task.title)+" ",1),l("div",P,i(t.task.key),1),l("div",U,i(e.sum(t.start,t.end,t.task)),1)]))),128))]),day:h(({scope:t})=>[(c(!0),g(f,null,T(e.getLogged(t.timestamp.date,t.task.logged),y=>(c(),g(f,{key:y},[t.task.children!==void 0?(c(),g("div",F,i(y.logged),1)):(c(),g("div",A,i(y.logged),1))],64))),128))]),"footer-task":h(({scope:t})=>[l("div",V,[l("div",Y,i(t.footer.title),1),l("div",K,i(e.totals(t.start,t.end)),1)])]),"footer-day":h(({scope:t})=>[l("div",O,i(e.getLoggedSummary(t.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),l("div",Z,[u(D,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/planner/dayCalendar",label:"Schedule","no-caps":""}),u(D,{class:"q-ma-xl",color:"white","text-color":"blue",unelevated:"",to:"/planner/viewGoals",label:"Goals","no-caps":""})])])}var x=w(q,[["render",z],["__scopeId","data-v-03ea6c9c"]]);export{x as default};
