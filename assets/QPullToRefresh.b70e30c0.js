import{j as ze,U as At,az as Jt,W as Ot,aA as el,c as w,at as Et,g as Fe,h as x,Q as _e,aB as tl,aC as ll,Z as ne,aD as tt,aE as Mt,aF as Tt,aG as _t,ae as ul,af as nl,ag as ol,r as B,ah as al,ai as il,aj as rl,ak as sl,al as cl,w as ae,aH as dl,aI as St,aJ as fl,aw as De,aK as vl,u as zt,aL as ml,k as Ft,T as hl,e as Ke,aM as gl,aN as Sl,v as Bt,n as de,aO as yl,aP as bl,aQ as wl,aR as pl,aS as Cl,aT as Vl,aU as yt,aV as Ee,o as xl,aW as kl,a9 as ke,aX as ql,aY as oe,Y as Al,am as Ol,aZ as El,D as Ml,au as Tl,ad as Me,av as _l,aa as He,a_ as Ye,ab as Ge,b as zl,an as Fl,y as Bl}from"./index.d5412a32.js";import{Q as Pl,a as Il,b as Rl}from"./QItem.feb83afb.js";import{u as Ll,v as bt,e as Hl,f as Dl,g as $l,h as wt,i as Kl,r as pt,s as jl,d as Nl}from"./utiFunc.97ba64dc.js";const Ql={xs:8,sm:10,md:14,lg:20,xl:24};var Ul=ze({name:"QChip",props:{...At,...Jt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:o}){const{proxy:{$q:g}}=Fe(),u=Ot(e,g),l=el(e,Ql),m=w(()=>e.selected===!0||e.icon!==void 0),f=w(()=>e.selected===!0?e.iconSelected||g.iconSet.chip.selected:e.icon),v=w(()=>e.iconRemove||g.iconSet.chip.remove),h=w(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=w(()=>{const q=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(q?` text-${q} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(u.value===!0?" q-chip--dark q-dark":"")}),S=w(()=>{const q=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},R={...q,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||g.lang.label.remove};return{chip:q,remove:R}});function k(q){q.keyCode===13&&b(q)}function b(q){e.disable||(o("update:selected",!e.selected),o("click",q))}function M(q){(q.keyCode===void 0||q.keyCode===13)&&(ne(q),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function T(){const q=[];h.value===!0&&q.push(x("div",{class:"q-focus-helper"})),m.value===!0&&q.push(x(_e,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const R=e.label!==void 0?[x("div",{class:"ellipsis"},[e.label])]:void 0;return q.push(x("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},tl(n.default,R))),e.iconRight&&q.push(x(_e,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&q.push(x(_e,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...S.value.remove,onClick:M,onKeyup:M})),q}return()=>{if(e.modelValue===!1)return;const q={class:d.value,style:l.value};return h.value===!0&&Object.assign(q,S.value.chip,{onClick:b,onKeyup:k}),Et("div",q,T(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ll,e.ripple]])}}}),Wl=ze({name:"QField",inheritAttrs:!1,props:tt,emits:Mt,setup(){return Tt(_t())}}),Xl=ze({name:"QMenu",inheritAttrs:!1,props:{...Ll,...ul,...At,...nl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:bt},self:{type:String,validator:bt},offset:{type:Array,validator:Hl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ol,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:g}){let u=null,l,m,f;const v=Fe(),{proxy:h}=v,{$q:d}=h,S=B(null),k=B(!1),b=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),M=Ot(e,d),{registerTick:T,removeTick:q}=al(),{registerTimeout:R}=il(),{transitionProps:H,transitionStyle:D}=rl(e),{localScrollTarget:E,changeScrollEvent:_,unconfigureScrollTarget:P}=Dl(e,V),{anchorEl:$,canShow:Q}=$l({showing:k}),{hide:Z}=sl({showing:k,canShow:Q,handleShow:c,handleHide:r,hideOnRouteChange:b,processOnMount:!0}),{showPortal:Y,hidePortal:W,renderPortal:ie}=cl(v,S,K,"menu"),le={anchorEl:$,innerRef:S,onClickOutside(a){if(e.persistent!==!0&&k.value===!0)return Z(a),(a.type==="touchstart"||a.target.classList.contains("q-dialog__backdrop"))&&ne(a),!0}},re=w(()=>wt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),ue=w(()=>e.cover===!0?re.value:wt(e.self||"top start",d.lang.rtl)),J=w(()=>(e.square===!0?" q-menu--square":"")+(M.value===!0?" q-menu--dark q-dark":"")),ge=w(()=>e.autoClose===!0?{onClick:z}:{}),se=w(()=>k.value===!0&&e.persistent!==!0);ae(se,a=>{a===!0?(dl(A),Kl(le)):(St(A),pt(le))});function ee(){gl(()=>{let a=S.value;a&&a.contains(document.activeElement)!==!0&&(a=a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function c(a){if(u=e.noRefocus===!1?document.activeElement:null,fl(L),Y(),V(),l=void 0,a!==void 0&&(e.touchPosition||e.contextMenu)){const j=De(a);if(j.left!==void 0){const{top:ce,left:fe}=$.value.getBoundingClientRect();l={left:j.left-fe,top:j.top-ce}}}m===void 0&&(m=ae(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,p)),e.noFocus!==!0&&document.activeElement.blur(),T(()=>{p(),e.noFocus!==!0&&ee()}),R(()=>{d.platform.is.ios===!0&&(f=e.autoClose,S.value.click()),p(),Y(!0),o("show",a)},e.transitionDuration)}function r(a){q(),W(),y(!0),u!==null&&(a===void 0||a.qClickOutside!==!0)&&(((a&&a.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),R(()=>{W(!0),o("hide",a)},e.transitionDuration)}function y(a){l=void 0,m!==void 0&&(m(),m=void 0),(a===!0||k.value===!0)&&(vl(L),P(),pt(le),St(A)),a!==!0&&(u=null)}function V(){($.value!==null||e.scrollTarget!==void 0)&&(E.value=zt($.value,e.scrollTarget),_(E.value,p))}function z(a){f!==!0?(ml(h,a),o("click",a)):f=!1}function L(a){se.value===!0&&e.noFocus!==!0&&Sl(S.value,a.target)!==!0&&ee()}function A(a){o("escapeKey"),Z(a)}function p(){const a=S.value;a===null||$.value===null||jl({el:a,offset:e.offset,anchorEl:$.value,anchorOrigin:re.value,selfOrigin:ue.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function K(){return x(hl,H.value,()=>k.value===!0?x("div",{role:"menu",...g,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+J.value,g.class],style:[g.style,D.value],...ge.value},Ft(n.default)):null)}return Ke(y),Object.assign(h,{focus:ee,updatePosition:p}),ie}});let $e=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,$e=e.scrollLeft>=0,e.remove()}const G=1e3,Yl=["start","center","end","start-force","center-force","end-force"],Pt=Array.prototype.filter,Gl=window.getComputedStyle(document.body).overflowAnchor===void 0?Bt:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];Pt.call(o,u=>u.dataset&&u.dataset.qVsAnchor!==void 0).forEach(u=>{delete u.dataset.qVsAnchor});const g=o[n];g&&g.dataset&&(g.dataset.qVsAnchor="")}))};function qe(e,n){return e+n}function Ze(e,n,o,g,u,l,m,f){const v=e===window?document.scrollingElement||document.documentElement:e,h=u===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-m-f,scrollMaxSize:0,offsetStart:-m,offsetEnd:-f};if(u===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=v.scrollLeft,d.scrollViewSize+=v.clientWidth),d.scrollMaxSize=v.scrollWidth,l===!0&&(d.scrollStart=($e===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=v.scrollTop,d.scrollViewSize+=v.clientHeight),d.scrollMaxSize=v.scrollHeight),o!==null)for(let S=o.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=S[h]);if(g!==null)for(let S=g.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=S[h]);if(n!==e){const S=v.getBoundingClientRect(),k=n.getBoundingClientRect();u===!0?(d.offsetStart+=k.left-S.left,d.offsetEnd-=k.width):(d.offsetStart+=k.top-S.top,d.offsetEnd-=k.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function Ct(e,n,o,g){n==="end"&&(n=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(g===!0&&(n=($e===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):o===!0?(g===!0&&(n=($e===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Te(e,n,o,g){if(o>=g)return 0;const u=n.length,l=Math.floor(o/G),m=Math.floor((g-1)/G)+1;let f=e.slice(l,m).reduce(qe,0);return o%G!==0&&(f-=n.slice(l*G,o).reduce(qe,0)),g%G!==0&&g!==u&&(f-=n.slice(g,m*G).reduce(qe,0)),f}const Zl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Jl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Zl};function eu({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:o,virtualScrollItemSizeComputed:g}){const u=Fe(),{props:l,emit:m,proxy:f}=u,{$q:v}=f;let h,d,S,k=[],b;const M=B(0),T=B(0),q=B({}),R=B(null),H=B(null),D=B(null),E=B({from:0,to:0}),_=w(()=>l.tableColspan!==void 0?l.tableColspan:100);g===void 0&&(g=w(()=>l.virtualScrollItemSize));const P=w(()=>g.value+";"+l.virtualScrollHorizontal),$=w(()=>P.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);ae($,()=>{J()}),ae(P,Q);function Q(){ue(d,!0)}function Z(r){ue(r===void 0?d:r)}function Y(r,y){const V=n();if(V==null||V.nodeType===8)return;const z=Ze(V,o(),R.value,H.value,l.virtualScrollHorizontal,v.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);S!==z.scrollViewSize&&J(z.scrollViewSize),ie(V,z,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,Yl.indexOf(y)>-1?y:d>-1&&r>d?"end":"start")}function W(){const r=n();if(r==null||r.nodeType===8)return;const y=Ze(r,o(),R.value,H.value,l.virtualScrollHorizontal,v.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),V=e.value-1,z=y.scrollMaxSize-y.offsetStart-y.offsetEnd-T.value;if(h===y.scrollStart)return;if(y.scrollMaxSize<=0){ie(r,y,0,0);return}S!==y.scrollViewSize&&J(y.scrollViewSize),le(E.value.from);const L=Math.floor(y.scrollMaxSize-Math.max(y.scrollViewSize,y.offsetEnd)-Math.min(b[V],y.scrollViewSize/2));if(L>0&&Math.ceil(y.scrollStart)>=L){ie(r,y,V,y.scrollMaxSize-y.offsetEnd-k.reduce(qe,0));return}let A=0,p=y.scrollStart-y.offsetStart,K=p;if(p<=z&&p+y.scrollViewSize>=M.value)p-=M.value,A=E.value.from,K=p;else for(let a=0;p>=k[a]&&A<V;a++)p-=k[a],A+=G;for(;p>0&&A<V;)p-=b[A],p>-y.scrollViewSize?(A++,K=p):K=b[A]+p;ie(r,y,A,K)}function ie(r,y,V,z,L){const A=typeof L=="string"&&L.indexOf("-force")>-1,p=A===!0?L.replace("-force",""):L,K=p!==void 0?p:"start";let a=Math.max(0,V-q.value[K]),j=a+q.value.total;j>e.value&&(j=e.value,a=Math.max(0,j-q.value.total)),h=y.scrollStart;const ce=a!==E.value.from||j!==E.value.to;if(ce===!1&&p===void 0){se(V);return}const{activeElement:fe}=document,te=D.value;ce===!0&&te!==null&&te!==fe&&te.contains(fe)===!0&&(te.addEventListener("focusout",re),setTimeout(()=>{te!==null&&te.removeEventListener("focusout",re)})),Gl(te,V-a);const Be=p!==void 0?b.slice(a,V).reduce(qe,0):0;if(ce===!0){const ve=j>=E.value.from&&a<=E.value.to?E.value.to:j;E.value={from:a,to:ve},M.value=Te(k,b,0,a),T.value=Te(k,b,j,e.value),requestAnimationFrame(()=>{E.value.to!==j&&h===y.scrollStart&&(E.value={from:E.value.from,to:j},T.value=Te(k,b,j,e.value))})}requestAnimationFrame(()=>{if(h!==y.scrollStart)return;ce===!0&&le(a);const ve=b.slice(a,V).reduce(qe,0),Se=ve+y.offsetStart+M.value,Pe=Se+b[V];let Ae=Se+z;if(p!==void 0){const je=ve-Be,U=y.scrollStart+je;Ae=A!==!0&&U<Se&&Pe<U+y.scrollViewSize?U:p==="end"?Pe-y.scrollViewSize:Se-(p==="start"?0:Math.round((y.scrollViewSize-b[V])/2))}h=Ae,Ct(r,Ae,l.virtualScrollHorizontal,v.lang.rtl),se(V)})}function le(r){const y=D.value;if(y){const V=Pt.call(y.children,a=>a.classList&&a.classList.contains("q-virtual-scroll--skip")===!1),z=V.length,L=l.virtualScrollHorizontal===!0?a=>a.getBoundingClientRect().width:a=>a.offsetHeight;let A=r,p,K;for(let a=0;a<z;){for(p=L(V[a]),a++;a<z&&V[a].classList.contains("q-virtual-scroll--with-prev")===!0;)p+=L(V[a]),a++;K=p-b[A],K!==0&&(b[A]+=K,k[Math.floor(A/G)]+=K),A++}}}function re(){D.value!==null&&D.value!==void 0&&D.value.focus()}function ue(r,y){const V=1*g.value;(y===!0||Array.isArray(b)===!1)&&(b=[]);const z=b.length;b.length=e.value;for(let A=e.value-1;A>=z;A--)b[A]=V;const L=Math.floor((e.value-1)/G);k=[];for(let A=0;A<=L;A++){let p=0;const K=Math.min((A+1)*G,e.value);for(let a=A*G;a<K;a++)p+=b[a];k.push(p)}d=-1,h=void 0,M.value=Te(k,b,0,E.value.from),T.value=Te(k,b,E.value.to,e.value),r>=0?(le(E.value.from),de(()=>{Y(r)})):ee()}function J(r){if(r===void 0&&typeof window!="undefined"){const p=n();p!=null&&p.nodeType!==8&&(r=Ze(p,o(),R.value,H.value,l.virtualScrollHorizontal,v.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}S=r;const y=parseFloat(l.virtualScrollSliceRatioBefore)||0,V=parseFloat(l.virtualScrollSliceRatioAfter)||0,z=1+y+V,L=r===void 0||r<=0?1:Math.ceil(r/g.value),A=Math.max(1,L,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/z));q.value={total:Math.ceil(A*z),start:Math.ceil(A*y),center:Math.ceil(A*(.5+y)),end:Math.ceil(A*(1+y)),view:L}}function ge(r,y){const V=l.virtualScrollHorizontal===!0?"width":"height",z={["--q-virtual-scroll-item-"+V]:g.value+"px"};return[r==="tbody"?x(r,{class:"q-virtual-scroll__padding",key:"before",ref:R},[x("tr",[x("td",{style:{[V]:`${M.value}px`,...z},colspan:_.value})])]):x(r,{class:"q-virtual-scroll__padding",key:"before",ref:R,style:{[V]:`${M.value}px`,...z}}),x(r,{class:"q-virtual-scroll__content",key:"content",ref:D,tabindex:-1},y.flat()),r==="tbody"?x(r,{class:"q-virtual-scroll__padding",key:"after",ref:H},[x("tr",[x("td",{style:{[V]:`${T.value}px`,...z},colspan:_.value})])]):x(r,{class:"q-virtual-scroll__padding",key:"after",ref:H,style:{[V]:`${T.value}px`,...z}})]}function se(r){d!==r&&(l.onVirtualScroll!==void 0&&m("virtualScroll",{index:r,from:E.value.from,to:E.value.to-1,direction:r<d?"decrease":"increase",ref:f}),d=r)}J();const ee=yl(W,v.platform.is.ios===!0?120:35);bl(()=>{J()});let c=!1;return wl(()=>{c=!0}),pl(()=>{if(c!==!0)return;const r=n();h!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Ct(r,h,l.virtualScrollHorizontal,v.lang.rtl):Y(d)}),Ke(()=>{ee.cancel()}),Object.assign(f,{scrollTo:Y,reset:Q,refresh:Z}),{virtualScrollSliceRange:E,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:J,onVirtualScrollEvt:ee,localResetVirtualScroll:ue,padVirtualScroll:ge,scrollTo:Y,reset:Q,refresh:Z}}function tu(e,n,o){return o<=n?n:Math.min(o,Math.max(n,e))}function Vt(e,n,o){if(o<=n)return n;const g=o-n+1;let u=n+(e-n)%g;return u<n&&(u=g+u),u===0?0:u}const xt=e=>["add","add-unique","toggle"].includes(e),lu=".*+?^${}()|[]\\",uu=Object.keys(tt);var cu=ze({name:"QSelect",inheritAttrs:!1,props:{...Jl,...Cl,...tt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:xt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Mt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:n,emit:o}){const{proxy:g}=Fe(),{$q:u}=g,l=B(!1),m=B(!1),f=B(-1),v=B(""),h=B(!1),d=B(!1);let S=null,k,b,M,T=null,q,R,H,D;const E=B(null),_=B(null),P=B(null),$=B(null),Q=B(null),Z=Vl(e),Y=ql(ft),W=w(()=>Array.isArray(e.options)?e.options.length:0),ie=w(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:le,virtualScrollSliceSizeComputed:re,localResetVirtualScroll:ue,padVirtualScroll:J,onVirtualScrollEvt:ge,scrollTo:se,setVirtualScrollSize:ee}=eu({virtualScrollLength:W,getVirtualScrollTarget:Ht,getVirtualScrollEl:ct,virtualScrollItemSizeComputed:ie}),c=_t(),r=w(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const i=e.mapOptions===!0&&k!==void 0?k:[],C=s.map(F=>Lt(F,i));return e.modelValue===null&&t===!0?C.filter(F=>F!==null):C}return s}),y=w(()=>{const t={};return uu.forEach(s=>{const i=e[s];i!==void 0&&(t[s]=i)}),t}),V=w(()=>e.optionsDark===null?c.isDark.value:e.optionsDark),z=w(()=>yt(r.value)),L=w(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),A=w(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),p=w(()=>W.value===0),K=w(()=>r.value.map(t=>X.value(t)).join(", ")),a=w(()=>e.displayValue!==void 0?e.displayValue:K.value),j=w(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ce=w(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(j.value))),fe=w(()=>c.focused.value===!0?e.tabindex:-1),te=w(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${c.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${c.targetUid.value}_${f.value}`),t}),Be=w(()=>({id:`${c.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ve=w(()=>r.value.map((t,s)=>({index:s,opt:t,html:j.value(t),selected:!0,removeAtIndex:Rt,toggleOption:me,tabindex:fe.value}))),Se=w(()=>{if(W.value===0)return[];const{from:t,to:s}=le.value;return e.options.slice(t,s).map((i,C)=>{const F=ye.value(i)===!0,O=t+C,I={clickable:!0,active:!1,activeClass:je.value,manualFocus:!0,focused:!1,disable:F,tabindex:-1,dense:e.optionsDense,dark:V.value,role:"option",id:`${c.targetUid.value}_${O}`,onClick:()=>{me(i)}};return F!==!0&&(Ue(i)===!0&&(I.active=!0),f.value===O&&(I.focused=!0),I["aria-selected"]=I.active===!0?"true":"false",u.platform.is.desktop===!0&&(I.onMousemove=()=>{l.value===!0&&be(O)})),{index:O,opt:i,html:j.value(i),label:X.value(i),selected:I.active,focused:I.focused,toggleOption:me,setOptionIndex:be,itemProps:I}})}),Pe=w(()=>e.dropdownIcon!==void 0?e.dropdownIcon:u.iconSet.arrow.dropdown),Ae=w(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),je=w(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),U=w(()=>Qe(e.optionValue,"value")),X=w(()=>Qe(e.optionLabel,"label")),ye=w(()=>Qe(e.optionDisable,"disable")),Ie=w(()=>r.value.map(t=>U.value(t))),It=w(()=>{const t={onInput:ft,onChange:Y,onKeydown:st,onKeyup:it,onKeypress:rt,onFocus:ot,onClick(s){b===!0&&oe(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Y,t});ae(r,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&c.innerLoading.value!==!0&&(m.value!==!0&&l.value!==!0||z.value!==!0)&&(M!==!0&&Ve(),(m.value===!0||l.value===!0)&&we(""))},{immediate:!0}),ae(()=>e.fillInput,Ve),ae(l,We),ae(W,Zt);function ut(t){return e.emitValue===!0?U.value(t):t}function Ne(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();o("remove",{index:t,value:s.splice(t,1)[0]}),o("update:modelValue",s)}else o("update:modelValue",null)}function Rt(t){Ne(t),c.focus()}function nt(t,s){const i=ut(t);if(e.multiple!==!0){e.fillInput===!0&&Oe(X.value(t),!0,!0),o("update:modelValue",i);return}if(r.value.length===0){o("add",{index:0,value:i}),o("update:modelValue",e.multiple===!0?[i]:i);return}if(s===!0&&Ue(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const C=e.modelValue.slice();o("add",{index:C.length,value:i}),C.push(i),o("update:modelValue",C)}function me(t,s){if(c.editable.value!==!0||t===void 0||ye.value(t)===!0)return;const i=U.value(t);if(e.multiple!==!0){s!==!0&&(Oe(e.fillInput===!0?X.value(t):"",!0,!0),he()),_.value!==null&&_.value.focus(),(r.value.length===0||Ee(U.value(r.value[0]),i)!==!0)&&o("update:modelValue",e.emitValue===!0?i:t);return}if((b!==!0||h.value===!0)&&c.focus(),ot(),r.value.length===0){const O=e.emitValue===!0?i:t;o("add",{index:0,value:O}),o("update:modelValue",e.multiple===!0?[O]:O);return}const C=e.modelValue.slice(),F=Ie.value.findIndex(O=>Ee(O,i));if(F>-1)o("remove",{index:F,value:C.splice(F,1)[0]});else{if(e.maxValues!==void 0&&C.length>=e.maxValues)return;const O=e.emitValue===!0?i:t;o("add",{index:C.length,value:O}),C.push(O)}o("update:modelValue",C)}function be(t){if(u.platform.is.desktop!==!0)return;const s=t>-1&&t<W.value?t:-1;f.value!==s&&(f.value=s)}function Re(t=1,s){if(l.value===!0){let i=f.value;do i=Vt(i+t,-1,W.value-1);while(i!==-1&&i!==f.value&&ye.value(e.options[i])===!0);f.value!==i&&(be(i),se(i),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Le(i>=0?X.value(e.options[i]):q))}}function Lt(t,s){const i=C=>Ee(U.value(C),t);return e.options.find(i)||s.find(i)||t}function Qe(t,s){const i=t!==void 0?t:s;return typeof i=="function"?i:C=>C!==null&&typeof C=="object"&&i in C?C[i]:C}function Ue(t){const s=U.value(t);return Ie.value.find(i=>Ee(i,s))!==void 0}function ot(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===K.value)&&_.value.select()}function at(t){Al(t,27)===!0&&l.value===!0&&(oe(t),he(),Ve()),o("keyup",t)}function it(t){const{value:s}=t.target;if(t.keyCode!==void 0){at(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),Ve(),typeof s=="string"&&s.length>0){const i=s.toLocaleLowerCase(),C=O=>{const I=e.options.find(N=>O.value(N).toLocaleLowerCase()===i);return I===void 0?!1:(r.value.indexOf(I)===-1?me(I):he(),!0)},F=O=>{C(U)!==!0&&(C(X)===!0||O===!0||we(s,!0,()=>F(!0)))};F()}else c.clearValue(t)}function rt(t){o("keypress",t)}function st(t){if(o("keydown",t),Ol(t)===!0)return;const s=v.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),i=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||s===!0);if(t.keyCode===27){ke(t);return}if(t.keyCode===9&&i===!1){pe();return}if(t.target===void 0||t.target.id!==c.targetUid.value)return;if(t.keyCode===40&&c.innerLoading.value!==!0&&l.value===!1){ne(t),Ce();return}if(t.keyCode===8&&e.hideSelected!==!0&&v.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ne(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof v.value!="string"||v.value.length===0)&&(ne(t),f.value=-1,Re(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&re.value!==void 0&&(ne(t),f.value=Math.max(-1,Math.min(W.value,f.value+(t.keyCode===33?-1:1)*re.value.view)),Re(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ne(t),Re(t.keyCode===38?-1:1,e.multiple));const C=W.value;if((H===void 0||D<Date.now())&&(H=""),C>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||H.length>0)){l.value!==!0&&Ce(t);const F=t.key.toLocaleLowerCase(),O=H.length===1&&H[0]===F;D=Date.now()+1500,O===!1&&(ne(t),H+=F);const I=new RegExp("^"+H.split("").map(Xe=>lu.indexOf(Xe)>-1?"\\"+Xe:Xe).join(".*"),"i");let N=f.value;if(O===!0||N<0||I.test(X.value(e.options[N]))!==!0)do N=Vt(N+1,-1,C-1);while(N!==f.value&&(ye.value(e.options[N])===!0||I.test(X.value(e.options[N]))!==!0));f.value!==N&&de(()=>{be(N),se(N),N>=0&&e.useInput===!0&&e.fillInput===!0&&Le(X.value(e.options[N]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||H!=="")&&(t.keyCode!==9||i===!1))){if(t.keyCode!==9&&ne(t),f.value>-1&&f.value<C){me(e.options[f.value]);return}if(s===!0){const F=(O,I)=>{if(I){if(xt(I)!==!0)return}else I=e.newValueMode;if(O==null)return;Oe("",e.multiple!==!0,!0),(I==="toggle"?me:nt)(O,I==="add-unique"),e.multiple!==!0&&(_.value!==null&&_.value.focus(),he())};if(e.onNewValue!==void 0?o("newValue",v.value,F):F(v.value),e.multiple!==!0)return}l.value===!0?pe():c.innerLoading.value!==!0&&Ce()}}function ct(){return b===!0?Q.value:P.value!==null&&P.value.contentEl!==null?P.value.contentEl:void 0}function Ht(){return ct()}function Dt(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?ve.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?ve.value.map((t,s)=>x(Ul,{key:"option-"+s,removable:c.editable.value===!0&&ye.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:fe.value,onRemove(){t.removeAtIndex(s)}},()=>x("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:X.value(t.opt)}))):[x("span",{[ce.value===!0?"innerHTML":"textContent"]:a.value})]}function dt(){if(p.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:v.value}):void 0;const t=n.option!==void 0?n.option:i=>x(Rl,{key:i.index,...i.itemProps},()=>x(Pl,()=>x(Il,()=>x("span",{[i.html===!0?"innerHTML":"textContent"]:i.label}))));let s=J("div",Se.value.map(t));return n["before-options"]!==void 0&&(s=n["before-options"]().concat(s)),Ml(n["after-options"],s)}function $t(t,s){const i=s===!0?{...te.value,...c.splitAttrs.attributes.value}:void 0,C={ref:s===!0?_:void 0,key:"i_t",class:L.value,style:e.inputStyle,value:v.value!==void 0?v.value:"",type:"search",...i,id:s===!0?c.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...It.value};return t!==!0&&b===!0&&(Array.isArray(C.class)===!0?C.class=[...C.class,"no-pointer-events"]:C.class+=" no-pointer-events"),x("input",C)}function ft(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(Le(t.target.value||""),M=!0,q=v.value,c.focused.value!==!0&&(b!==!0||h.value===!0)&&c.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,we(v.value)},e.inputDebounce)))}function Le(t){v.value!==t&&(v.value=t,o("inputValue",t))}function Oe(t,s,i){M=i!==!0,e.useInput===!0&&(Le(t),(s===!0||i!==!0)&&(q=t),s!==!0&&we(t))}function we(t,s,i){if(e.onFilter===void 0||s!==!0&&c.focused.value!==!0)return;c.innerLoading.value===!0?o("filterAbort"):(c.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&M!==!0&&t===X.value(r.value[0])&&(t="");const C=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);T!==null&&clearTimeout(T),T=C,o("filter",t,(F,O)=>{(s===!0||c.focused.value===!0)&&T===C&&(clearTimeout(T),typeof F=="function"&&F(),d.value=!1,de(()=>{c.innerLoading.value=!1,c.editable.value===!0&&(s===!0?l.value===!0&&he():l.value===!0?We(!0):l.value=!0),typeof O=="function"&&de(()=>{O(g)}),typeof i=="function"&&de(()=>{i(g)})}))},()=>{c.focused.value===!0&&T===C&&(clearTimeout(T),c.innerLoading.value=!1,d.value=!1),l.value===!0&&(l.value=!1)})}function Kt(){return x(Xl,{ref:P,class:A.value,style:e.popupContentStyle,modelValue:l.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&p.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:V.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ae.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Be.value,onScrollPassive:ge,onBeforeShow:mt,onBeforeHide:jt,onShow:Nt},dt)}function jt(t){ht(t),pe()}function Nt(){ee()}function Qt(t){oe(t),_.value!==null&&_.value.focus(),h.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Ut(t){oe(t),de(()=>{h.value=!1})}function Wt(){const t=[x(Wl,{class:`col-auto ${c.fieldClass.value}`,...y.value,for:c.targetUid.value,dark:V.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:v.value.length>0,...c.splitAttrs.listeners.value,onFocus:Qt,onBlur:Ut},{...n,rawControl:()=>c.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&t.push(x("div",{ref:Q,class:A.value+" scroll",style:e.popupContentStyle,...Be.value,onClick:ke,onScrollPassive:ge},dt())),x(El,{ref:$,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:R,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:mt,onBeforeHide:Xt,onHide:Yt,onShow:Gt},()=>x("div",{class:"q-select__dialog"+(V.value===!0?" q-select__dialog--dark q-dark":"")+(h.value===!0?" q-select__dialog--focused":"")},t))}function Xt(t){ht(t),$.value!==null&&$.value.__updateRefocusTarget(c.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),c.focused.value=!1}function Yt(t){he(),c.focused.value===!1&&o("blur",t),Ve()}function Gt(){const t=document.activeElement;(t===null||t.id!==c.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),ee()}function pe(){m.value!==!0&&(f.value=-1,l.value===!0&&(l.value=!1),c.focused.value===!1&&(T!==null&&(clearTimeout(T),T=null),c.innerLoading.value===!0&&(o("filterAbort"),c.innerLoading.value=!1,d.value=!1)))}function Ce(t){c.editable.value===!0&&(b===!0?(c.onControlFocusin(t),m.value=!0,de(()=>{c.focus()})):c.focus(),e.onFilter!==void 0?we(v.value):(p.value!==!0||n["no-option"]!==void 0)&&(l.value=!0))}function he(){m.value=!1,pe()}function Ve(){e.useInput===!0&&Oe(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&X.value(r.value[0])||"",!0,!0)}function We(t){let s=-1;if(t===!0){if(r.value.length>0){const i=U.value(r.value[0]);s=e.options.findIndex(C=>Ee(U.value(C),i))}ue(s)}be(s)}function Zt(t,s){l.value===!0&&c.innerLoading.value===!1&&(ue(-1,!0),de(()=>{l.value===!0&&c.innerLoading.value===!1&&(t>s?ue():We(!0))}))}function vt(){m.value===!1&&P.value!==null&&P.value.updatePosition()}function mt(t){t!==void 0&&oe(t),o("popupShow",t),c.hasPopupOpen=!0,c.onControlFocusin(t)}function ht(t){t!==void 0&&oe(t),o("popupHide",t),c.hasPopupOpen=!1,c.onControlFocusout(t)}function gt(){b=u.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||p.value===!1:!0),R=u.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return xl(gt),kl(vt),gt(),Ke(()=>{S!==null&&clearTimeout(S)}),Object.assign(g,{showPopup:Ce,hidePopup:he,removeAtIndex:Ne,add:nt,toggleOption:me,getOptionIndex:()=>f.value,setOptionIndex:be,moveOptionSelection:Re,filter:we,updateMenuPosition:vt,updateInputValue:Oe,isOptionSelected:Ue,getEmittingOptionValue:ut,isOptionDisabled:(...t)=>ye.value.apply(null,t)===!0,getOptionValue:(...t)=>U.value.apply(null,t),getOptionLabel:(...t)=>X.value.apply(null,t)}),Object.assign(c,{innerValue:r,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:E,targetRef:_,hasValue:z,showPopup:Ce,floatingLabel:w(()=>e.hideSelected!==!0&&z.value===!0||typeof v.value=="number"||v.value.length>0||yt(e.displayValue)),getControlChild:()=>{if(c.editable.value!==!1&&(m.value===!0||p.value!==!0||n["no-option"]!==void 0))return b===!0?Wt():Kt();c.hasPopupOpen===!0&&(c.hasPopupOpen=!1)},controlEvents:{onFocusin(t){c.onControlFocusin(t)},onFocusout(t){c.onControlFocusout(t,()=>{Ve(),pe()})},onClick(t){if(ke(t),b!==!0&&l.value===!0){pe(),_.value!==null&&_.value.focus();return}Ce(t)}},getControl:t=>{const s=Dt(),i=t===!0||m.value!==!0||b!==!0;if(e.useInput===!0)s.push($t(t,i));else if(c.editable.value===!0){const F=i===!0?te.value:void 0;s.push(x("input",{ref:i===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:i===!0?c.targetUid.value:void 0,value:a.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...F,onKeydown:st,onKeyup:at,onKeypress:rt})),i===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&s.push(x("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:it}))}if(Z.value!==void 0&&e.disable!==!0&&Ie.value.length>0){const F=Ie.value.map(O=>x("option",{value:O,selected:!0}));s.push(x("select",{class:"hidden",name:Z.value,multiple:e.multiple},F))}const C=e.useInput===!0||i!==!0?void 0:c.splitAttrs.attributes.value;return x("div",{class:"q-field__native row items-center",...C,...c.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[x(_e,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:Pe.value})]:null}),Tt(c)}});const lt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},nu=Object.keys(lt);lt.all=!0;function kt(e){const n={};for(const o of nu)e[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?lt:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function qt(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function Je(e,n,o){const g=De(e);let u,l=g.left-n.event.x,m=g.top-n.event.y,f=Math.abs(l),v=Math.abs(m);const h=n.direction;h.horizontal===!0&&h.vertical!==!0?u=l<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?u=m<0?"up":"down":h.up===!0&&m<0?(u="up",f>v&&(h.left===!0&&l<0?u="left":h.right===!0&&l>0&&(u="right"))):h.down===!0&&m>0?(u="down",f>v&&(h.left===!0&&l<0?u="left":h.right===!0&&l>0&&(u="right"))):h.left===!0&&l<0?(u="left",f<v&&(h.up===!0&&m<0?u="up":h.down===!0&&m>0&&(u="down"))):h.right===!0&&l>0&&(u="right",f<v&&(h.up===!0&&m<0?u="up":h.down===!0&&m>0&&(u="down")));let d=!1;if(u===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};u=n.event.lastDir,d=!0,u==="left"||u==="right"?(g.left-=l,f=0,l=0):(g.top-=m,v=0,m=0)}return{synthetic:d,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:g,direction:u,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:f,y:v},offset:{x:l,y:m},delta:{x:g.left-n.event.lastX,y:g.top-n.event.lastY}}}}let ou=0;var au=Tl({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&Me.has.touch!==!0)return;function g(l,m){o.mouse===!0&&m===!0?ne(l):(o.stop===!0&&oe(l),o.prevent===!0&&ke(l))}const u={uid:"qvtp_"+ou++,handler:n,modifiers:o,direction:kt(o),noop:Bt,mouseStart(l){qt(l,u)&&_l(l)&&(He(u,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),u.start(l,!0))},touchStart(l){if(qt(l,u)){const m=l.target;He(u,"temp",[[m,"touchmove","move","notPassiveCapture"],[m,"touchcancel","end","passiveCapture"],[m,"touchend","end","passiveCapture"]]),u.start(l)}},start(l,m){if(Me.is.firefox===!0&&Ye(e,!0),u.lastEvt=l,m===!0||o.stop===!0){if(u.direction.all!==!0&&(m!==!0||u.modifiers.mouseAllDir!==!0&&u.modifiers.mousealldir!==!0)){const h=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&ke(h),l.cancelBubble===!0&&oe(h),Object.assign(h,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[u.uid]:l.qClonedBy.concat(u.uid)}),u.initialEvent={target:l.target,event:h}}oe(l)}const{left:f,top:v}=De(l);u.event={x:f,y:v,time:Date.now(),mouse:m===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:f,lastY:v}},move(l){if(u.event===void 0)return;const m=De(l),f=m.left-u.event.x,v=m.top-u.event.y;if(f===0&&v===0)return;u.lastEvt=l;const h=u.event.mouse===!0,d=()=>{g(l,h);let b;o.preserveCursor!==!0&&o.preservecursor!==!0&&(b=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Nl(),u.styleCleanup=M=>{if(u.styleCleanup=void 0,b!==void 0&&(document.documentElement.style.cursor=b),document.body.classList.remove("non-selectable"),h===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};M!==void 0?setTimeout(()=>{T(),M()},50):T()}else M!==void 0&&M()}};if(u.event.detected===!0){u.event.isFirst!==!0&&g(l,u.event.mouse);const{payload:b,synthetic:M}=Je(l,u,!1);b!==void 0&&(u.handler(b)===!1?u.end(l):(u.styleCleanup===void 0&&u.event.isFirst===!0&&d(),u.event.lastX=b.position.left,u.event.lastY=b.position.top,u.event.lastDir=M===!0?void 0:b.direction,u.event.isFirst=!1));return}if(u.direction.all===!0||h===!0&&(u.modifiers.mouseAllDir===!0||u.modifiers.mousealldir===!0)){d(),u.event.detected=!0,u.move(l);return}const S=Math.abs(f),k=Math.abs(v);S!==k&&(u.direction.horizontal===!0&&S>k||u.direction.vertical===!0&&S<k||u.direction.up===!0&&S<k&&v<0||u.direction.down===!0&&S<k&&v>0||u.direction.left===!0&&S>k&&f<0||u.direction.right===!0&&S>k&&f>0?(u.event.detected=!0,u.move(l)):u.end(l,!0))},end(l,m){if(u.event!==void 0){if(Ge(u,"temp"),Me.is.firefox===!0&&Ye(e,!1),m===!0)u.styleCleanup!==void 0&&u.styleCleanup(),u.event.detected!==!0&&u.initialEvent!==void 0&&u.initialEvent.target.dispatchEvent(u.initialEvent.event);else if(u.event.detected===!0){u.event.isFirst===!0&&u.handler(Je(l===void 0?u.lastEvt:l,u).payload);const{payload:f}=Je(l===void 0?u.lastEvt:l,u,!0),v=()=>{u.handler(f)};u.styleCleanup!==void 0?u.styleCleanup(v):v()}u.event=void 0,u.initialEvent=void 0,u.lastEvt=void 0}}};if(e.__qtouchpan=u,o.mouse===!0){const l=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";He(u,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}Me.has.touch===!0&&He(u,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=kt(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Ge(n,"main"),Ge(n,"temp"),Me.is.firefox===!0&&Ye(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});const xe=40,et=20;var du=ze({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:{default:void 0}},emits:["refresh"],setup(e,{slots:n,emit:o}){const{proxy:g}=Fe(),{$q:u}=g,l=B("pull"),m=B(0),f=B(!1),v=B(-xe),h=B(!1),d=B({}),S=w(()=>({opacity:m.value,transform:`translateY(${v.value}px) rotate(${m.value*360}deg)`})),k=w(()=>"q-pull-to-refresh__puller row flex-center"+(h.value===!0?" q-pull-to-refresh__puller--animating":"")+(e.bgColor!==void 0?` bg-${e.bgColor}`:""));function b(P){if(P.isFinal===!0){f.value===!0&&(f.value=!1,l.value==="pulled"?(l.value="refreshing",E({pos:et}),q()):l.value==="pull"&&E({pos:-xe,ratio:0}));return}if(h.value===!0||l.value==="refreshing")return!1;if(P.isFirst===!0){if(Bl(H)!==0||P.direction!=="down")return f.value===!0&&(f.value=!1,l.value="pull",E({pos:-xe,ratio:0})),!1;f.value=!0;const{top:Z,left:Y}=R.getBoundingClientRect();d.value={top:Z+"px",left:Y+"px",width:window.getComputedStyle(R).getPropertyValue("width")}}ke(P.evt);const $=Math.min(140,Math.max(0,P.distance.y));v.value=$-xe,m.value=tu($/(et+xe),0,1);const Q=v.value>et?"pulled":"pull";l.value!==Q&&(l.value=Q)}const M=w(()=>{const P={down:!0};return e.noMouse!==!0&&(P.mouse=!0),[[au,b,void 0,P]]}),T=w(()=>`q-pull-to-refresh__content${f.value===!0?" no-pointer-events":""}`);function q(){o("refresh",()=>{E({pos:-xe,ratio:0},()=>{l.value="pull"})})}let R,H,D=null;function E({pos:P,ratio:$},Q){h.value=!0,v.value=P,$!==void 0&&(m.value=$),D!==null&&clearTimeout(D),D=setTimeout(()=>{D=null,h.value=!1,Q&&Q()},300)}function _(){H=zt(R,e.scrollTarget)}return ae(()=>e.scrollTarget,_),zl(()=>{R=g.$el,_()}),Ke(()=>{D!==null&&clearTimeout(D)}),Object.assign(g,{trigger:q,updateScrollTarget:_}),()=>{const P=[x("div",{class:T.value},Ft(n.default)),x("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:d.value},[x("div",{class:k.value,style:S.value},[l.value!=="refreshing"?x(_e,{name:e.icon||u.iconSet.pullToRefresh.icon,color:e.color,size:"32px"}):x(Fl,{size:"24px",color:e.color})])])];return Et("div",{class:"q-pull-to-refresh"},P,"main",e.disable===!1,()=>M.value)}}});export{cu as Q,au as T,Ul as a,du as b,tu as c,Xl as d,kt as g,Vt as n,$e as r,qt as s};
