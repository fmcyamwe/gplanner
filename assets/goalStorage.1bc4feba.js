import{W as w,r as U,c as d}from"./index.5c6c43eb.js";import{u as W}from"./use-quasar.101cf9c6.js";const B=w("allGoals",()=>{const b=U([{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}]),S=[{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}],i=W(),G=d(()=>S),m=d(()=>{let t=JSON.parse(i.localStorage.getItem("mainGoals"));return h(t)}),p=d(()=>{let t=JSON.parse(i.localStorage.getItem("subGoals"));return h(t)}),v=d(()=>JSON.parse(i.localStorage.getItem("AllDates")));function h(t){return t?[...t]:[]}function y(t,l,e,s){console.log(t+" "+l+" "+e+" "+s);let a=this.getMainGoals;if(!a){console.log("umm no mainGoals...adding"),i.localStorage.set("mainGoals",JSON.stringify([{id:0,title:t,details:l,priority:s,bgcolor:e,icon:"fas fa-utensils"}]));return}let r=a.length+1;for(;a.some(n=>n.id===r);)r=Math.floor(Math.random()*1e3);return a.unshift({id:r,title:t,details:l,priority:s,bgcolor:e,icon:"fas fa-utensils"}),i.localStorage.set("mainGoals",JSON.stringify(a)),console.log("done adding mainGoal",r),r}function D(t,l,e,s,a,r){console.log(t+" "+l+" "+e+" "+s+" "+a+" "+r);let n=this.getSubGoals;if(!n){i.localStorage.set("subGoals",JSON.stringify([{id:0,parentGoal:t,title:l,score:e,time:s,duration:a,canMove:r}]));return}let o=n.length+1;for(;n.some(u=>u.id===o);)o=Math.floor(Math.random()*1e3);return n.unshift({id:o,parentGoal:t,title:l,score:e,time:s,duration:a,canMove:r}),i.localStorage.set("subGoals",JSON.stringify(n)),console.log("done adding subGoal",o),o}function O(t,l,e,s,a,r){let n=this.getSubGoals;for(var o=0;o<n.length;o++)if(n[o].id===t){n[o].title=l,n[o].score=e,n[o].time=s,n[o].duration=a,n[o].canMove=r,console.log("editSubGoal for",n[o],o);break}i.localStorage.set("subGoals",JSON.stringify(n))}function x(){i.localStorage.remove("mainGoals"),console.log("removed all mainGoal")}function A(){i.localStorage.remove("subGoals"),console.log("removed all subGoals")}function M(){i.localStorage.remove("subGoals"),i.localStorage.remove("mainGoals"),console.log("removed ALL")}function N(t,l=null,e=null){let s=this.getSubGoals;for(var a=0;a<s.length;a++)if(s[a].id===t){s[a].time=l||s[a].time,s[a].score=e||s[a].score;break}i.localStorage.set("subGoals",JSON.stringify(s))}function I(t){let l=this.getSubGoals;for(var e=0;e<l.length;e++)l[e].id===t&&(l.splice(e,1),console.log("removeSubgoal spliced!"));return i.localStorage.set("subGoals",JSON.stringify(l)),l}function J(t,l){let e=this.getMainGoals;for(var s=0;s<e.length;s++)e[s].id===t&&(e.splice(s,1),console.log("removeMaingoal spliced!"));return i.localStorage.set("mainGoals",JSON.stringify(e)),e}function T(t){let l=this.getMainGoals;for(var e=0;e<l.length;e++)if(l[e].title===t)return l[e];return null}function $(t,l){let e=this.getAllDates;e?(e[`${t}`]=l,i.localStorage.set("AllDates",JSON.stringify(e))):(console.log(`Adding new schedule for ${t}`),e={},e[`${t}`]=l,i.localStorage.set("AllDates",JSON.stringify(e)))}function R(t){let l=this.getAllDates;if(l)return l[`${t}`]}function E(t){let l=this.getAllDates;return l?!!l[`${t}`]:!1}function F(t){const l=[];let e=function(a){const r=a.split(/on/);return r.length!=2?(console.log(`parseScore error?${a}`,r),-1):r[1]-r[0]},s=this.getSubGoals;return s&&s.forEach(a=>{if(a.score=="")console.log(`no score event added: ${a.title}`,a.score),l.push(a);else{let r=e(a.score);r>-1&&r>=t&&l.push(a)}}),l}function L(t){const e=(t/60).toFixed(2);return parseFloat(e)}function k(){let t=this.getAllDates;if(!t)return console.log("no savedTaskSummary..ERROR"),[];let l=this.getMainGoals,e=this.getSubGoals,s={};for(let o in t){let u=t[o];for(let c in u)s[c]||(s[c]=[]),s[c].push({date:o,logged:L(u[c].duration)})}let a=o=>{let u=[];return e&&e.forEach(c=>{c.parentGoal==o&&u.push(c)}),u},r=(o,u=null)=>{let c={children:[],title:u?`${o.title}:(${o.score})`:o.title,key:u?`${u}-${o.id}`:o.id,logged:[],expanded:!1};if(u){let f=s[o.id]||[];c.logged=[...f]}return c},n=[];return l.forEach(o=>{let u=r(o),c=a(o.id);for(let f=0;f<c.length;f++){let g=r(c[f],o.id);if(g.logged.length==0){console.log(`Oooh no logged for parent ${o.title}`,g);continue}u.logged.push(...g.logged),u.children.push(g)}n.push(u)}),n}return{headers:S,headerRefs:b,getHeaders:G,getMainGoals:m,getSubGoals:p,getAllDates:v,addMainGoal:y,addSubGoal:D,editSubGoal:O,getGoalByTitle:T,saveSubProp:N,saveDailySchedule:$,resetSub:A,resetMain:x,resetAll:M,removeSubgoal:I,removeMaingoal:J,getEventsForDate:R,hasEventsForDate:E,fetchAllTaskSummary:k,fetchGoalsWithMinScore:F}});export{B as u};
