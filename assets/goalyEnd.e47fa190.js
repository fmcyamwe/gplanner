import{j as O,r as v,c as j,ar as D,n as I,aG as A,h as f,g as P,O as c,_ as R,d as U,F as H,P as T,N as b,K as N,L as w,I as l,Q as z,H as d,a2 as y,a6 as F,a4 as G,bv as M,b7 as E,bx as K,aU as L}from"./index.de5b6eb1.js";import{d as W}from"./goalStorage.3ec70b5b.js";import{c as J}from"./QSelect.72762aff.js";import"./touch.9135741d.js";import"./QItem.83b98971.js";function S(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const o=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const a=e.valueOf();if(Object(a)!==a){const i=new e.constructor(a);return t.set(e,i),i}}return t.set(e,o),e instanceof Set?e.forEach(a=>{o.add(S(a,t))}):e instanceof Map&&e.forEach((a,i)=>{o.set(i,S(a,t))}),Object.assign(o,...Object.keys(e).map(a=>({[a]:S(e[a],t)})))}var X=O({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:a}=P(),{$q:i}=a,u=v(null),r=v(""),n=v("");let g=!1;const k=j(()=>D({initialValue:r.value,validate:e.validate,set:m,cancel:p,updatePosition:C},"value",()=>n.value,s=>{n.value=s}));function m(){e.validate(n.value)!==!1&&(h()===!0&&(o("save",n.value,r.value),o("update:modelValue",n.value)),V())}function p(){h()===!0&&o("cancel",n.value,r.value),V()}function C(){I(()=>{u.value.updatePosition()})}function h(){return A(n.value,r.value)===!1}function V(){g=!0,u.value.hide()}function q(){g=!1,r.value=S(e.modelValue),n.value=S(e.modelValue),o("beforeShow")}function B(){o("show")}function _(){g===!1&&h()===!0&&(e.autoSave===!0&&e.validate(n.value)===!0?(o("save",n.value,r.value),o("update:modelValue",n.value)):o("cancel",n.value,r.value)),o("beforeHide")}function $(){o("hide")}function Q(){const s=t.default!==void 0?[].concat(t.default(k.value)):[];return e.title&&s.unshift(f("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&s.push(f("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[f(c,{flat:!0,color:e.color,label:e.labelCancel||i.lang.label.cancel,onClick:p}),f(c,{flat:!0,color:e.color,label:e.labelSet||i.lang.label.set,onClick:m})])),s}return Object.assign(a,{set:m,cancel:p,show(s){u.value!==null&&u.value.show(s)},hide(s){u.value!==null&&u.value.hide(s)},updatePosition:C}),()=>{if(e.disable!==!0)return f(J,{ref:u,class:"q-popup-edit",cover:e.cover,onBeforeShow:q,onShow:B,onBeforeHide:_,onHide:$,onEscapeKey:p},Q)}}});const Y=U({name:"GoalyEnd",props:{disabledScore:Boolean,title:String,id:Number,startTime:String,details:String,notes:String,score:String,happeningNow:Boolean,icon:String},data(){const e=v(""),t=v(!1);return{note:this.notes,daScore:this.score,daIcon:this.icon,errorMessageScore:e,errorScore:t}},emits:["saveScore","endNow","deleteNow","addMins"],computed:{aScore:{get(){return this.daScore},set(e){this.aScorey(e)?this.daScore=e:console.log("setting invalid aScore?",e,this.daScore)},cancel(){console.log("aScore remove?",this.id)}},aNote:{get(){return this.note},set(e){this.note=e}},userIconStyle(){return{color:this.disabledScore===!0?"red":"blue",cursor:"pointer"}},ClassNStyle(){let e="title q-calendar__ellipsis";return this.disabledScore===!1&&this.happeningNow===!0?e+" mooh":e},showBtnStyle(){return{display:this.disabledScore===!0&&this.happeningNow===!0?"flex":"none","text-align":"center","margin-left":"1em",height:"auto"}}},watch:{title(e){console.log("titleValue:",e)}},methods:{onDelete(){this.$emit("deleteNow")},onSave(){if(this.errorMessageScore!=""||this.errorScore){console.log("ERROR saveScore",this.aScore,this.errorMessageScore);return}this.$emit("saveScore",this.id,this.aScore,this.aNote)},wannaEnd(){this.$emit("endNow",this.id)},wannaAdd(e){this.$emit("addMins",this.id,e)},aScorey(e){var t=/^\don\d$/g,o=e.match(t)||[];return o&&e!==o[0]?(this.errorScore=!0,this.errorMessageScore=`Error: ${e} Unsaved.Must format as: #on#`,!1):(this.errorScore=!1,this.errorMessageScore="",!0)},reset(){this.errorScore=!1,this.errorMessageScore=""}}}),Z={class:"title q-calendar__ellipsis"},x={class:"q-pl-sm"},ee={class:"title"};function te(e,t,o,a,i,u){return H(),T("div",Z,[b("div",x,[N(w(` ${e.title} (${e.score})`)+" ",1),l(z,{name:e.daIcon},null,8,["name"])]),l(W,null,{default:d(()=>[N(w("("+e.id+") "+e.details),1)]),_:1}),b("div",{style:F(e.showBtnStyle)},[l(c,{"no-caps":"",label:"Add5",align:"between",onClick:t[0]||(t[0]=r=>e.wannaAdd(5))}),l(c,{"no-caps":"",label:"Add10",align:"between",class:"q-mx-md poppy",onClick:t[1]||(t[1]=r=>e.wannaAdd(10))}),l(y,{vertical:!0}),l(c,{"no-caps":"",label:"End-Now",align:"between",onClick:e.wannaEnd},null,8,["onClick"])],4),l(X,{modelValue:e.aScore,"onUpdate:modelValue":t[3]||(t[3]=r=>e.aScore=r),disable:e.disabledScore,"auto-save":"","touch-position":""},{default:d(r=>[l(G,{class:"bg-secondary text-white"},{default:d(()=>[b("div",ee," NoteyOnScore :: "+w(e.title),1),l(M,{class:"q-gutter-md"},{default:d(()=>[l(E,{modelValue:r.value,"onUpdate:modelValue":n=>r.value=n,dense:"",hint:"format: #on#",error:e.errorScore,"error-message":e.errorMessageScore},null,8,["modelValue","onUpdate:modelValue","error","error-message"])]),_:2},1024),l(M,{class:"q-gutter-md"},{default:d(()=>[l(E,{filled:"",modelValue:e.aNote,"onUpdate:modelValue":t[2]||(t[2]=n=>e.aNote=n),label:"Note",autogrow:"","lazy-rules":"","item-aligned":"",rules:[n=>n&&n.length>0||"Add a note..."]},null,8,["modelValue","rules"])]),_:1}),l(y,{dark:""}),l(K,{class:"q-gutter-md q-mx-md inputBtn"},{default:d(()=>[l(c,{label:"Save",flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[L(r.set,["stop","prevent"]),e.onSave]},null,8,["onClick"]),l(y,{vertical:!0}),l(c,{label:"Del",flat:"",dense:"",color:"negative",icon:"delete_forever",onClick:e.onDelete},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","disable"])])}var se=R(Y,[["render",te],["__scopeId","data-v-52429507"]]);export{se as default};
