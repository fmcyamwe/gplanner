import{a7 as $e,r as Y,W as Ae,a8 as de,n as He,a9 as V,w as z,e as Ce,i as Q,g as se,aa as ne,P as ie,ab as fe,ac as De,v as Pe,j as ue,ad as Le,ae as te,Y as Oe,af as We,c as q,ag as Ne,ah as je,ai as ke,aj as qe,ak as Je,Z as Be,h as X,T as ye,k as be,X as Re,l as oe,m as R,p as ze,t as Fe,al as Qe,am as Ie}from"./index.1bde7470.js";import{p as Ke}from"./utiFunc.f569f737.js";function ae(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),$e.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const xe={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},it={...xe,contextMenu:Boolean};function Ye({showing:e,avoidEmit:o,configureAnchorEl:r}){const{props:t,proxy:c,emit:p}=se(),u=Y(null);let h=null;function v(f){return u.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const b={};r===void 0&&(Object.assign(b,{hide(f){c.hide(f)},toggle(f){c.toggle(f),f.qAnchorHandled=!0},toggleKey(f){Ae(f,13)===!0&&b.toggle(f)},contextClick(f){c.hide(f),de(f),He(()=>{c.show(f),f.qAnchorHandled=!0})},prevent:de,mobileTouch(f){if(b.mobileCleanup(f),v(f)!==!0)return;c.hide(f),u.value.classList.add("non-selectable");const x=f.target;V(b,"anchor",[[x,"touchmove","mobileCleanup","passive"],[x,"touchend","mobileCleanup","passive"],[x,"touchcancel","mobileCleanup","passive"],[u.value,"contextmenu","prevent","notPassive"]]),h=setTimeout(()=>{h=null,c.show(f),f.qAnchorHandled=!0},300)},mobileCleanup(f){u.value.classList.remove("non-selectable"),h!==null&&(clearTimeout(h),h=null),e.value===!0&&f!==void 0&&ae()}}),r=function(f=t.contextMenu){if(t.noParentEvent===!0||u.value===null)return;let x;f===!0?c.$q.platform.is.mobile===!0?x=[[u.value,"touchstart","mobileTouch","passive"]]:x=[[u.value,"mousedown","hide","passive"],[u.value,"contextmenu","contextClick","notPassive"]]:x=[[u.value,"click","toggle","passive"],[u.value,"keyup","toggleKey","passive"]],V(b,"anchor",x)});function w(){ne(b,"anchor")}function O(f){for(u.value=f;u.value.classList.contains("q-anchor--skip");)u.value=u.value.parentNode;r()}function P(){if(t.target===!1||t.target===""||c.$el.parentNode===null)u.value=null;else if(t.target===!0)O(c.$el.parentNode);else{let f=t.target;if(typeof t.target=="string")try{f=document.querySelector(t.target)}catch{f=void 0}f!=null?(u.value=f.$el||f,r()):(u.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return z(()=>t.contextMenu,f=>{u.value!==null&&(w(),r(f))}),z(()=>t.target,()=>{u.value!==null&&w(),P()}),z(()=>t.noParentEvent,f=>{u.value!==null&&(f===!0?w():r())}),Ce(()=>{P(),o!==!0&&t.modelValue===!0&&u.value===null&&p("update:modelValue",!1)}),Q(()=>{h!==null&&clearTimeout(h),w()}),{anchorEl:u,canShow:v,anchorEvents:b}}function Ve(e,o){const r=Y(null);let t;function c(h,v){const b=`${v!==void 0?"add":"remove"}EventListener`,w=v!==void 0?v:t;h!==window&&h[b]("scroll",w,ie.passive),window[b]("scroll",w,ie.passive),t=v}function p(){r.value!==null&&(c(r.value),r.value=null)}const u=z(()=>e.noParentEvent,()=>{r.value!==null&&(p(),o())});return Q(u),{localScrollTarget:r,unconfigureScrollTarget:p,changeScrollEvent:c}}const{notPassiveCapture:U}=ie,B=[];function Z(e){const o=e.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let r=fe.length-1;for(;r>=0;){const t=fe[r].$;if(t.type.name==="QTooltip"){r--;continue}if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;r--}for(let t=B.length-1;t>=0;t--){const c=B[t];if((c.anchorEl.value===null||c.anchorEl.value.contains(o)===!1)&&(o===document.body||c.innerRef.value!==null&&c.innerRef.value.contains(o)===!1))e.qClickOutside=!0,c.onClickOutside(e);else return}}function Xe(e){B.push(e),B.length===1&&(document.addEventListener("mousedown",Z,U),document.addEventListener("touchstart",Z,U))}function he(e){const o=B.findIndex(r=>r===e);o!==-1&&(B.splice(o,1),B.length===0&&(document.removeEventListener("mousedown",Z,U),document.removeEventListener("touchstart",Z,U)))}let ge,me;function ve(e){const o=e.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ue(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const re={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{re[`${e}#ltr`]=e,re[`${e}#rtl`]=e});function pe(e,o){const r=e.split(" ");return{vertical:r[0],horizontal:re[`${r[1]}#${o===!0?"rtl":"ltr"}`]}}function Ze(e,o){let{top:r,left:t,right:c,bottom:p,width:u,height:h}=e.getBoundingClientRect();return o!==void 0&&(r-=o[1],t-=o[0],p+=o[1],c+=o[0],u+=o[0],h+=o[1]),{top:r,bottom:p,height:h,left:t,right:c,width:u,middle:t+(c-t)/2,center:r+(p-r)/2}}function _e(e,o,r){let{top:t,left:c}=e.getBoundingClientRect();return t+=o.top,c+=o.left,r!==void 0&&(t+=r[1],c+=r[0]),{top:t,bottom:t+1,height:1,left:c,right:c+1,width:1,middle:c,center:t}}function et(e,o){return{top:0,center:o/2,bottom:o,left:0,middle:e/2,right:e}}function Se(e,o,r,t){return{top:e[r.vertical]-o[t.vertical],left:e[r.horizontal]-o[t.horizontal]}}function Ge(e,o=0){if(e.targetEl===null||e.anchorEl===null||o>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Ge(e,o+1)},10);return}const{targetEl:r,offset:t,anchorEl:c,anchorOrigin:p,selfOrigin:u,absoluteOffset:h,fit:v,cover:b,maxHeight:w,maxWidth:O}=e;if(De.is.ios===!0&&window.visualViewport!==void 0){const J=document.body.style,{offsetLeft:D,offsetTop:W}=window.visualViewport;D!==ge&&(J.setProperty("--q-pe-left",D+"px"),ge=D),W!==me&&(J.setProperty("--q-pe-top",W+"px"),me=W)}const{scrollLeft:P,scrollTop:f}=r,x=h===void 0?Ze(c,b===!0?[0,0]:t):_e(c,h,t);Object.assign(r.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:O,maxHeight:w,visibility:"visible"});const{offsetWidth:S,offsetHeight:M}=r,{elWidth:C,elHeight:H}=v===!0||b===!0?{elWidth:Math.max(x.width,S),elHeight:b===!0?Math.max(x.height,M):M}:{elWidth:S,elHeight:M};let A={maxWidth:O,maxHeight:w};(v===!0||b===!0)&&(A.minWidth=x.width+"px",b===!0&&(A.minHeight=x.height+"px")),Object.assign(r.style,A);const j=et(C,H);let T=Se(x,j,p,u);if(h===void 0||t===void 0)le(T,x,j,p,u);else{const{top:J,left:D}=T;le(T,x,j,p,u);let W=!1;if(T.top!==J){W=!0;const N=2*t[1];x.center=x.top-=N,x.bottom-=N+2}if(T.left!==D){W=!0;const N=2*t[0];x.middle=x.left-=N,x.right-=N+2}W===!0&&(T=Se(x,j,p,u),le(T,x,j,p,u))}A={top:T.top+"px",left:T.left+"px"},T.maxHeight!==void 0&&(A.maxHeight=T.maxHeight+"px",x.height>T.maxHeight&&(A.minHeight=A.maxHeight)),T.maxWidth!==void 0&&(A.maxWidth=T.maxWidth+"px",x.width>T.maxWidth&&(A.minWidth=A.maxWidth)),Object.assign(r.style,A),r.scrollTop!==f&&(r.scrollTop=f),r.scrollLeft!==P&&(r.scrollLeft=P)}function le(e,o,r,t,c){const p=r.bottom,u=r.right,h=Pe(),v=window.innerHeight-h,b=document.body.clientWidth;if(e.top<0||e.top+p>v)if(c.vertical==="center")e.top=o[t.vertical]>v/2?Math.max(0,v-p):0,e.maxHeight=Math.min(p,v);else if(o[t.vertical]>v/2){const w=Math.min(v,t.vertical==="center"?o.center:t.vertical===c.vertical?o.bottom:o.top);e.maxHeight=Math.min(p,w),e.top=Math.max(0,w-p)}else e.top=Math.max(0,t.vertical==="center"?o.center:t.vertical===c.vertical?o.top:o.bottom),e.maxHeight=Math.min(p,v-e.top);if(e.left<0||e.left+u>b)if(e.maxWidth=Math.min(u,b),c.horizontal==="middle")e.left=o[t.horizontal]>b/2?Math.max(0,b-u):0;else if(o[t.horizontal]>b/2){const w=Math.min(b,t.horizontal==="middle"?o.middle:t.horizontal===c.horizontal?o.right:o.left);e.maxWidth=Math.min(u,w),e.left=Math.max(0,w-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?o.middle:t.horizontal===c.horizontal?o.left:o.right),e.maxWidth=Math.min(u,b-e.left)}var ot=ue({name:"QTooltip",inheritAttrs:!1,props:{...xe,...Le,...te,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...te.transitionShow,default:"jump-down"},transitionHide:{...te.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ve},self:{type:String,default:"top middle",validator:ve},offset:{type:Array,default:()=>[14,14],validator:Ue},scrollTarget:Oe,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...We],setup(e,{slots:o,emit:r,attrs:t}){let c,p;const u=se(),{proxy:{$q:h}}=u,v=Y(null),b=Y(!1),w=q(()=>pe(e.anchor,h.lang.rtl)),O=q(()=>pe(e.self,h.lang.rtl)),P=q(()=>e.persistent!==!0),{registerTick:f,removeTick:x}=Ne(),{registerTimeout:S}=je(),{transitionProps:M,transitionStyle:C}=ke(e),{localScrollTarget:H,changeScrollEvent:A,unconfigureScrollTarget:j}=Ve(e,E),{anchorEl:T,canShow:J,anchorEvents:D}=Ye({showing:b,configureAnchorEl:G}),{show:W,hide:N}=qe({showing:b,canShow:J,handleShow:ee,handleHide:F,hideOnRouteChange:P,processOnMount:!0});Object.assign(D,{delayShow:i,delayHide:d});const{showPortal:I,hidePortal:K,renderPortal:_}=Je(u,v,y,"tooltip");if(h.platform.is.mobile===!0){const s={anchorEl:T,innerRef:v,onClickOutside(g){return N(g),g.target.classList.contains("q-dialog__backdrop")&&Re(g),!0}},m=q(()=>e.modelValue===null&&e.persistent!==!0&&b.value===!0);z(m,g=>{(g===!0?Xe:he)(s)}),Q(()=>{he(s)})}function ee(s){I(),f(()=>{p=new MutationObserver(()=>l()),p.observe(v.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),l(),E()}),c===void 0&&(c=z(()=>h.screen.width+"|"+h.screen.height+"|"+e.self+"|"+e.anchor+"|"+h.lang.rtl,l)),S(()=>{I(!0),r("show",s)},e.transitionDuration)}function F(s){x(),K(),n(),S(()=>{K(!0),r("hide",s)},e.transitionDuration)}function n(){p!==void 0&&(p.disconnect(),p=void 0),c!==void 0&&(c(),c=void 0),j(),ne(D,"tooltipTemp")}function l(){Ge({targetEl:v.value,offset:e.offset,anchorEl:T.value,anchorOrigin:w.value,selfOrigin:O.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function i(s){if(h.platform.is.mobile===!0){ae(),document.body.classList.add("non-selectable");const m=T.value,g=["touchmove","touchcancel","touchend","click"].map($=>[m,$,"delayHide","passiveCapture"]);V(D,"tooltipTemp",g)}S(()=>{W(s)},e.delay)}function d(s){h.platform.is.mobile===!0&&(ne(D,"tooltipTemp"),ae(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),S(()=>{N(s)},e.hideDelay)}function G(){if(e.noParentEvent===!0||T.value===null)return;const s=h.platform.is.mobile===!0?[[T.value,"touchstart","delayShow","passive"]]:[[T.value,"mouseenter","delayShow","passive"],[T.value,"mouseleave","delayHide","passive"]];V(D,"anchor",s)}function E(){if(T.value!==null||e.scrollTarget!==void 0){H.value=Be(T.value,e.scrollTarget);const s=e.noParentEvent===!0?l:N;A(H.value,s)}}function a(){return b.value===!0?X("div",{...t,ref:v,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",t.class],style:[t.style,C.value],role:"tooltip"},be(o.default)):null}function y(){return X(ye,M.value,a)}return Q(n),Object.assign(u.proxy,{updatePosition:l}),_}}),at=ue({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:r}){let t=!1,c,p,u=null,h=null,v,b;function w(){c&&c(),c=null,t=!1,u!==null&&(clearTimeout(u),u=null),h!==null&&(clearTimeout(h),h=null),p!==void 0&&p.removeEventListener("transitionend",v),v=null}function O(S,M,C){M!==void 0&&(S.style.height=`${M}px`),S.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,t=!0,c=C}function P(S,M){S.style.overflowY=null,S.style.height=null,S.style.transition=null,w(),M!==b&&r(M)}function f(S,M){let C=0;p=S,t===!0?(w(),C=S.offsetHeight===S.scrollHeight?0:void 0):(b="hide",S.style.overflowY="hidden"),O(S,C,M),u=setTimeout(()=>{u=null,S.style.height=`${S.scrollHeight}px`,v=H=>{h=null,(Object(H)!==H||H.target===S)&&P(S,"show")},S.addEventListener("transitionend",v),h=setTimeout(v,e.duration*1.1)},100)}function x(S,M){let C;p=S,t===!0?w():(b="show",S.style.overflowY="hidden",C=S.scrollHeight),O(S,C,M),u=setTimeout(()=>{u=null,S.style.height=0,v=H=>{h=null,(Object(H)!==H||H.target===S)&&P(S,"hide")},S.addEventListener("transitionend",v),h=setTimeout(v,e.duration*1.1)},100)}return Q(()=>{t===!0&&w()}),()=>X(ye,{css:!1,appear:e.appear,onEnter:f,onLeave:x},o.default)}}),rt=ue({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:r}}=se(),t=oe(ze,R);if(t===R)return console.error("QPage needs to be a deep child of QLayout"),R;if(oe(Fe,R)===R)return console.error("QPage needs to be child of QPageContainer"),R;const p=q(()=>{const h=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const v=t.isContainer.value===!0?t.containerHeight.value:r.screen.height;return e.styleFn(h,v)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-h+"px":r.screen.height===0?h!==0?`calc(100vh - ${h}px)`:"100vh":r.screen.height-h+"px"}}),u=q(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>X("main",{class:u.value,style:p.value},be(o.default))}});function tt(){return oe(Qe)}const st=Ie("allGoals",()=>{const e=tt(),o=q(()=>{let n=JSON.parse(e.localStorage.getItem("mainGoals"));return c(n)}),r=q(()=>{let n=JSON.parse(e.localStorage.getItem("subGoals"));return c(n)}),t=q(()=>JSON.parse(e.localStorage.getItem("AllDates")));function c(n){return n?[...n]:[]}function p(n){e.localStorage.set("Balancey",JSON.stringify(n))}function u(){return JSON.parse(e.localStorage.getItem("Balancey"))}function h(n,l,i=null){x(),e.localStorage.set("mainGoals",JSON.stringify(n)),e.localStorage.set("subGoals",JSON.stringify(l)),i&&e.localStorage.set("AllDates",JSON.stringify(i))}function v(n,l,i,d,G=null){let E=this.getMainGoals;if(!E){console.log("umm no mainGoals...adding"),e.localStorage.set("mainGoals",JSON.stringify([{id:0,title:n.trim(),details:l,priority:d,bgcolor:i,icon:G?F(G):"fas fa-utensils"}]));return}let a=E.length+1;for(;E.some(y=>y.id===a);)a=Math.floor(Math.random()*(a*2));return E.unshift({id:a,title:n.trim(),details:l,priority:d,bgcolor:i,icon:G?F(G):"fas fa-utensils"}),e.localStorage.set("mainGoals",JSON.stringify(E)),a}function b(n,l,i,d,G,E=null){let a=this.getMainGoals;for(var y=0;y<a.length;y++)if(a[y].id===n){a[y].title=l.trim(),a[y].details=i,a[y].bgcolor=d,a[y].priority=G,a[y].icon=E?F(E):a[y].icon;break}e.localStorage.set("mainGoals",JSON.stringify(a))}function w(n,l,i,d,G,E,a,y,s){let m=this.getSubGoals;if(!m){e.localStorage.set("subGoals",JSON.stringify([{id:0,parentGoal:n,title:l.trim(),score:i,time:d,duration:G,canMove:E,inDefaults:a,isAlternative:y,jeSuis:s||[]}]));return}let g=m.length+1;for(;m.some($=>$.id===g);)g=Math.floor(Math.random()*(g*2));return m.unshift({id:g,parentGoal:n,title:l.trim(),score:i,time:d,duration:G,canMove:E,inDefaults:a,isAlternative:y,jeSuis:s||[]}),e.localStorage.set("subGoals",JSON.stringify(m)),g}function O(n,l,i,d,G,E,a,y,s){let m=this.getSubGoals;for(var g=0;g<m.length;g++)if(m[g].id===n){m[g].title=l.trim(),m[g].score=i,m[g].time=d,m[g].duration=G,m[g].canMove=E,m[g].inDefaults=a,m[g].isAlternative=y,m[g].jeSuis=s||[];break}e.localStorage.set("subGoals",JSON.stringify(m))}function P(){e.localStorage.remove("mainGoals"),console.log("removed all mainGoal")}function f(){e.localStorage.remove("subGoals"),console.log("removed all subGoals")}function x(){e.localStorage.remove("subGoals"),e.localStorage.remove("mainGoals"),e.localStorage.remove("AllDates"),e.localStorage.remove("Balancey"),console.log("removed ALL")}function S(n,l=null,i=null){let d=this.getSubGoals;for(var G=0;G<d.length;G++)if(d[G].id===n){d[G].time=l||d[G].time,d[G].score=i||d[G].score;break}e.localStorage.set("subGoals",JSON.stringify(d))}function M(n){let l=this.getSubGoals;for(var i=0;i<l.length;i++)l[i].id===n&&l.splice(i,1);return e.localStorage.set("subGoals",JSON.stringify(l)),l}function C(n){let l=this.getAllDates;for(let i in l){let d=l[i];n in d&&(delete d[n],console.log("removeDeletedGoal deleted id: "+n,i))}e.localStorage.set("AllDates",JSON.stringify(l))}function H(n,l){let i=this.getMainGoals;for(var d=0;d<i.length;d++)i[d].id===n&&i.splice(d,1);return e.localStorage.set("mainGoals",JSON.stringify(i)),i}function A(n){var d;let l=this.getMainGoals;for(var i=0;i<l.length;i++)if(((d=l[i])==null?void 0:d.title.trim())===n)return l[i];return null}function j(n,l=null){let i=this.getAllDates;i?l?i[`${n}`]=l:n in i&&delete i[`${n}`]:(console.log(`Adding new schedule for ${n}`),i={},i[`${n}`]=l),e.localStorage.set("AllDates",JSON.stringify(i))}function T(n){let l=this.getAllDates;if(l)return l[`${n}`]}function J(n){let l=this.getAllDates;return l?!!l[`${n}`]:!1}function D(){const n=[];let l=function(d){return d==null?void 0:d.inDefaults},i=this.getSubGoals;return i?(i.forEach(d=>{l(d)&&n.push(d)}),n):(console.log("No subgoals to fetch defaults :("),n)}function W(){let n=this.getMainGoals,l=new Set;return n?(n.forEach(i=>{l.add(i.priority)}),l):(console.log("fetchAllPrio::No mainGoals :("),l)}function N(){const n=[];let l=this.getSubGoals;return l&&l.forEach(i=>{i!=null&&i.isAlternative&&n.push(i)}),n}function I(n){const l=[];let i=this.getSubGoals;return i&&i.forEach(d=>{if(d.score=="")console.log(`ERROR::empty score event added: ${d.title}`,d.score),l.push(d);else{let G=Ke(d.score);G>-1&&G<=n&&l.push(d)}}),l}function K(n){const i=(n/60).toFixed(2);return parseFloat(i)}function _(){let n=this.getMainGoals,l=this.getSubGoals,i=(a,y)=>{if(a.id>y.id)return 1;if(a.id==y.id)return 0;if(a.id<y.id)return-1},d=a=>{if(!a)return"";let y=a.split(":");return parseInt(y[0])>=12?a+" PM":a+" AM"},G=a=>{let y=[];return l&&l.forEach(s=>{s.parentGoal==a&&y.push(s)}),y},E=[];return n?(n.forEach(a=>{var g,$,k,ce;let y={id:a.id,label:`${a.id}) ${a==null?void 0:a.title.trim()}`,details:`${a.details} ==> Priority (${a==null?void 0:a.priority})`,color:`${a==null?void 0:a.bgcolor}`,prio:a==null?void 0:a.priority,icon:a==null?void 0:a.icon,children:[]},s=G(a.id);for(let L=0;L<s.length;L++){let Te=s[L].inDefaults?"Dft":"#",we=s[L].canMove?"Mv":"#",Ee=s[L].isAlternative?"Alt":"#",Me=[`${d((g=s[L])==null?void 0:g.time)} for ${($=s[L])==null?void 0:$.duration} mins`,`:: ${Te}~${we}~${Ee}`].join(`
`);y.children.push({id:s[L].id,label:`${s[L].id})- ${(k=s[L])==null?void 0:k.title.trim()} (${(ce=s[L])==null?void 0:ce.score})`,details:Me,color:`${a==null?void 0:a.bgcolor}`,isChildren:!0,moods:s[L].jeSuis||[]})}let m=y.children;m.sort(i),y.children=m,E.push(y)}),E.sort(i),E):(console.log("fetchGoalsTree::No mainGoals :("),E)}function ee(){var y;let n=this.getAllDates;if(!n)return[];let l=this.getMainGoals,i=this.getSubGoals,d={};for(let s in n){let m=n[s];for(let g in m){d[g]||(d[g]=[]);let $={date:s,logged:K(m[g].duration),atScore:(y=m[g])==null?void 0:y.atScore};"notes"in m[g]&&($.notes=m[g].notes),d[g].push($)}}let G=s=>{let m=[];return i&&i.forEach(g=>{g.parentGoal==s&&m.push(g)}),m},E=(s,m=null)=>{let g={children:[],title:m?`${s.title.trim()} (${s.score})`:`${s.title.trim()} !${s.priority}!`,key:m?`${m}-${s.id}`:s.id,logged:[],expanded:!0,color:s==null?void 0:s.bgcolor,isChild:!!m};if(m){let $=d[s.id]||[];g.logged=[...$]}return g},a=[];return l.forEach(s=>{let m=E(s),g=G(s.id);for(let $=0;$<g.length;$++){let k=E(g[$],s.id);k.logged.length!=0&&(m.logged.push(...k.logged),k.children.length<1?delete k.children:console.log("huh children has descendents?!? ERROR?",k),m.children.push(k))}a.push(m)}),a}function F(n){if(n.indexOf("-")>-1)return n;let l=n.replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map(d=>d.toLowerCase()),i=!1;return l.length>1&&(console.log("iconParse::FAS",l),i=!0),l=l.join("-"),l.includes("regular")?"far fa-"+l.replace("-regular",""):i?"fas fa-"+l:"fab fa-"+l}return{getMainGoals:o,getSubGoals:r,removeDeletedGoal:C,getAllDates:t,currentBalance:u,setBalance:p,addMainGoal:v,addSubGoal:w,editSubGoal:O,editMainGoal:b,importGoals:h,getGoalByTitle:A,saveSubProp:S,saveDailySchedule:j,resetSub:f,resetMain:P,resetAll:x,removeSubgoal:M,removeMaingoal:H,getEventsForDate:T,hasEventsForDate:J,fetchAllTaskSummary:ee,fetchGoalsUpToMaxScore:I,fetchAllPrio:W,fetchDefaults:D,fetchAlternativeEvts:N,fetchGoalsTree:_}});export{rt as Q,st as a,ot as b,at as c,ae as d,it as e,Ue as f,Ve as g,Ye as h,Xe as i,pe as p,he as r,Ge as s,tt as u,ve as v};
