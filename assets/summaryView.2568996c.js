import{j as N,l as fe,m as O,c as k,p as ye,h as d,Q as le,k as E,at as se,U as ie,W as re,s as _e,g as z,r as A,au as ke,w as P,av as ae,aw as be,b as de,e as ue,ax as Ce,ay as we,N as R,D as Te,_ as qe,d as pe,L as ne,E as v,F as I,G as g,M as r,H as m,K as y,O as _,P as M,R as S,J as w,a3 as x,a1 as $,I as F,a0 as Se,a2 as j,a6 as xe,a7 as $e}from"./index.aeb2e1ef.js";import{S as De,t as H,T as Pe,b as T,i as V,Q as Qe,e as Ie}from"./QCalendarTask.da93829c.js";import{u as Me,a as Fe,Q as Ve}from"./goalStorage.af1036a6.js";import{u as Ee,a as Ne,b as Be,c as Le}from"./use-panel.64d3f0ca.js";/* empty css                             */import Ge from"./NavigationBar.e05f6ddd.js";import"./touch.70a9dd44.js";var oe=N({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const l=fe(se,O);if(l===O)return console.error("QTimelineEntry needs to be child of QTimeline"),O;const n=k(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),o=k(()=>`q-timeline__dot text-${e.color||l.color}`),s=k(()=>l.layout==="comfortable"&&l.side==="left");return()=>{const i=ye(t.default,[]);if(e.body!==void 0&&i.unshift(e.body),e.heading===!0){const u=[d("div"),d("div"),d(e.tag,{class:"q-timeline__heading-title"},i)];return d("div",{class:"q-timeline__heading"},s.value===!0?u.reverse():u)}let c;e.icon!==void 0?c=[d(le,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(c=[d("img",{class:"q-timeline__dot-img",src:e.avatar})]);const a=[d("div",{class:"q-timeline__subtitle"},[d("span",{},E(t.subtitle,[e.subtitle]))]),d("div",{class:o.value},c),d("div",{class:"q-timeline__content"},[d("h6",{class:"q-timeline__title"},E(t.title,[e.title]))].concat(i))];return d("li",{class:n.value},s.value===!0?a.reverse():a)}}}),Ue=N({name:"QTimeline",props:{...ie,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const l=z(),n=re(e,l.proxy.$q);_e(se,e);const o=k(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(n.value===!0?" q-timeline--dark":""));return()=>d("ul",{class:o.value},E(t.default))}}),Oe=N({name:"QCarouselSlide",props:{...Ee,imgSrc:String},setup(e,{slots:t}){const l=k(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:l.value},E(t.default))}});let D=0;const Re={fullscreen:Boolean,noRouteFullscreenExit:Boolean},je=["update:fullscreen","fullscreen"];function He(){const e=z(),{props:t,emit:l,proxy:n}=e;let o,s,i;const c=A(!1);ke(e)===!0&&P(()=>n.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&f()}),P(()=>t.fullscreen,C=>{c.value!==C&&a()}),P(c,C=>{l("update:fullscreen",C),l("fullscreen",C)});function a(){c.value===!0?f():u()}function u(){c.value!==!0&&(c.value=!0,i=n.$el.parentNode,i.replaceChild(s,n.$el),document.body.appendChild(n.$el),D++,D===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:f},ae.add(o))}function f(){c.value===!0&&(o!==void 0&&(ae.remove(o),o=void 0),i.replaceChild(n.$el,s),c.value=!1,D=Math.max(0,D-1),D===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return be(()=>{s=document.createElement("span")}),de(()=>{t.fullscreen===!0&&u()}),ue(f),Object.assign(n,{toggleFullscreen:a,setFullscreen:u,exitFullscreen:f}),{inFullscreen:c,toggleFullscreen:a}}const Ae=["top","right","bottom","left"],ze=["regular","flat","outline","push","unelevated"];var Ke=N({name:"QCarousel",props:{...ie,...Ne,...Re,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>ze.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Ae.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...je,...Be],setup(e,{slots:t}){const{proxy:{$q:l}}=z(),n=re(e,l);let o=null,s;const{updatePanelsList:i,getPanelContent:c,panelDirectives:a,goToPanel:u,previousPanel:f,nextPanel:C,getEnabledPanels:ce,panelIndex:Q}=Le(),{inFullscreen:K}=He(),ge=k(()=>K.value!==!0&&e.height!==void 0?{height:e.height}:{}),B=k(()=>e.vertical===!0?"vertical":"horizontal"),me=k(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(K.value===!0?" fullscreen":"")+(n.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${B.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${X.value}`:"")),J=k(()=>{const h=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?h.reverse():h}),W=k(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),ve=k(()=>e.navigationActiveIcon||W.value),X=k(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),L=k(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));P(()=>e.modelValue,()=>{e.autoplay&&G()}),P(()=>e.autoplay,h=>{h?G():o!==null&&(clearTimeout(o),o=null)});function G(){const h=Ce(e.autoplay)===!0?Math.abs(e.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,h>=0?C():f()},h)}de(()=>{e.autoplay&&G()}),ue(()=>{o!==null&&clearTimeout(o)});function Y(h,p){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${h} q-carousel__navigation--${X.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},ce().map(p))])}function he(){const h=[];if(e.navigation===!0){const p=t["navigation-icon"]!==void 0?t["navigation-icon"]:b=>d(R,{key:"nav"+b.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${b.active===!0?"":"in"}active`,...b.btnProps,onClick:b.onClick}),U=s-1;h.push(Y("buttons",(b,Z)=>{const ee=b.props.name,te=Q.value===Z;return p({index:Z,maxIndex:U,name:ee,active:te,btnProps:{icon:te===!0?ve.value:W.value,size:"sm",...L.value},onClick:()=>{u(ee)}})}))}else if(e.thumbnails===!0){const p=e.controlColor!==void 0?` text-${e.controlColor}`:"";h.push(Y("thumbnails",U=>{const b=U.props;return d("img",{key:"tmb#"+b.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${b.name===e.modelValue?"":"in"}active`+p,src:b.imgSrc||b["img-src"],onClick:()=>{u(b.name)}})}))}return e.arrows===!0&&Q.value>=0&&((e.infinite===!0||Q.value>0)&&h.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${B.value} absolute flex flex-center`},[d(R,{icon:J.value[0],...L.value,onClick:f})])),(e.infinite===!0||Q.value<s-1)&&h.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${B.value} absolute flex flex-center`},[d(R,{icon:J.value[1],...L.value,onClick:C})]))),Te(t.control,h)}return()=>(s=i(t),d("div",{class:me.value,style:ge.value},[we("div",{class:"q-carousel__slides-container"},c(),"sl-cont",e.swipeable,()=>a.value)].concat(he())))}});const Je=pe({name:"summaryCalendar",components:{NavigationBar:Ge,QCalendarTask:De},data(){return{selectedDate:H(),selectedMonth:"",allMonths:Pe("long","en-US"),startDate:H(),endDate:H(),store:Me(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:Fe(),treeGoals:[],expanded:[],showTree:!1,daOptions:A({}),panel:A("")}},computed:{parsedTasks(){const e=T(this.startDate),t=T(this.endDate),l=[];for(let n=0;n<this.tasks.length;++n){const o=this.tasks[n];for(let s=0;s<o.logged.length;++s){const i=T(o.logged[s].date);if(V(i,e,t)){l.push(o);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e;const t={},l=(n,o=!1,s="")=>{n.logged.forEach(i=>{i.date.slice(-2),o&&"notes"in i&&(t[n.key]||(t[n.key]=[],this.panel=n.key),t[n.key].push({on:i.date,note:i.notes,score:i.atScore,title:n.title,color:s}))})};this.tasks.forEach(n=>{l(n),n.children!==void 0&&n.children.forEach(o=>{l(o,!0,n==null?void 0:n.color)})}),this.daOptions=t,this.constructTree()},methods:{getLogged(e,t,l=null){const n=[];if(t.length==0)return console.log("ERROR...Empty getLogged?!?",e,l),n;for(let o=0;o<t.length;++o)if(t[o].date===e){n.push({logged:t[o].logged});break}return n},classyColor(e){return`row items-center ${e.isChildren?"text-":"text-white bg-"}${e.color} `},timelineColor(e){return e!=""?`bg-${e} text-white shadow-2 rounded-borders`:"bg-black text-white shadow-2 rounded-borders"},getLoggedSummary(e){let t=0;const l=(n,o)=>e===o.date?n+o.logged:n;for(const n in this.tasks)t+=this.tasks[n].logged.reduce(l,0);return t.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree()},sum(e,t,l){const n=(s,i)=>{const c=T(i.date);return V(c,e,t)?s+i.logged:s};return l.logged.reduce(n,0).toFixed(2)},getTasks(e,t,l){const n=[];for(let o=0;o<l.logged.length;++o){const s=T(l.logged[o].date);if(V(s,e,t)){n.push(l);break}}return n},badgeStyles(e){return`issue ellipsis ${e.isChild?"text-white":`text-white bg-${e.color}`}`},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let l=0;const n=(o,s)=>{const i=T(s.date);return V(i,e,t)?o+s.logged:o};for(const o in this.tasks)l+=this.tasks[o].logged.reduce(n,0);return l.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let t=e.days[0].month;console.log("onChange",t,e),this.selectedMonth=this.allMonths[t-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),q=e=>(xe("data-v-ad7bbea2"),e=e(),$e(),e),We={class:"subcontent"},Xe={class:"q-pa-md"},Ye={class:"row justify-center"},Ze={style:{display:"flex","max-width":"800px",width:"100%"}},et={class:"header ellipsis q-ma-sm",style:{"font-weight":"600"}},tt={class:"issue ellipsis q-px-xs"},at=q(()=>r("div",{class:"key"},"Key",-1)),nt=q(()=>r("div",{class:"logged"},"Logged",-1)),ot={class:"key"},lt={class:"logged"},st={key:0,class:"logged-time",style:{"font-weight":"800"}},it={key:1,class:"logged-time"},rt={class:"summary ellipsis"},dt={class:"title ellipsis"},ut={class:"total"},ct={class:"logged-time"},gt=q(()=>r("br",null,null,-1)),mt={key:0,class:"column justify-center items-center"},vt=q(()=>r("br",null,null,-1)),ht={key:0,class:"q-pa-md"},ft={key:0,class:"q-pa-md bg-grey-12",style:{"max-width":"400px"}},yt=q(()=>r("div",{class:"row justify-center"}," Goals & Goal Events ",-1)),_t=q(()=>r("br",null,null,-1)),kt={class:"q-mr-sm text-weight-bold",size:"28px"},bt={key:0},Ct={class:"text-weight-bold"},wt={key:1,class:"text-weight-light text-black"};function Tt(e,t,l,n,o,s){const i=ne("navigation-bar"),c=ne("q-calendar-task");return v(),I(Qe,{padding:""},{default:g(()=>[r("div",We,[r("div",Xe,[m(i,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),r("div",Ye,[r("div",Ze,[m(c,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=a=>e.footerTasks=a),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":g(({})=>[r("div",et,[r("div",tt,y(e.getViewedMonth),1),at,nt])]),task:g(({scope:a})=>[(v(!0),_(S,null,M(e.getTasks(a.start,a.end,a.task),u=>(v(),_("div",{key:u.key,class:"header ellipsis"},[r("div",{class:j(e.badgeStyles(u))},y(a.task.title)+" ",3),r("div",ot,y(a.task.key),1),r("div",lt,y(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:g(({scope:a})=>[(v(!0),_(S,null,M(e.getLogged(a.timestamp.date,a.task.logged),u=>(v(),_(S,{key:u},[a.task.children!==void 0?(v(),_("div",st,y(u.logged),1)):(v(),_("div",it,y(u.logged),1))],64))),128))]),"footer-task":g(({scope:a})=>[r("div",rt,[r("div",dt,y(a.footer.title),1),r("div",ut,y(e.totals(a.start,a.end)),1)])]),"footer-day":g(({scope:a})=>[r("div",ct,y(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),gt,e.tasks.length<=0?(v(),_("div",mt,[vt,m(x,null,{default:g(()=>[w(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 5. Check out the summary of all goals here! ")]),_:1})])):F("",!0)]),m(Se,{modelValue:e.showTree,"onUpdate:modelValue":t[3]||(t[3]=a=>e.showTree=a),label:"Tree Legend",color:"teal",class:"q-pa-md"},null,8,["modelValue"]),m(Ve,null,{default:g(()=>[e.showTree?(v(),_("div",ht,[e.treeGoals.length>0?(v(),_("div",ft,[yt,m($),_t,m(Ie,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":t[4]||(t[4]=a=>e.expanded=a),"no-connectors":"",dense:"",accordion:""},{"default-header":g(a=>[r("div",{class:j(e.classyColor(a.node))},[a.node.isChildren?F("",!0):(v(),I(le,{key:0,name:a.node.icon||a.expanded?"expand_less":"expand_more",size:"28px",class:"q-mr-sm"},null,8,["name"])),r("div",kt,y(a.node.label),1)],2)]),"default-body":g(a=>[a.node.isChildren?(v(),_("div",bt,[r("span",Ct," >> "+y(a.node.details),1)])):(v(),_("span",wt,y(a.node.details),1))]),_:1},8,["nodes","expanded"])])):F("",!0)])):F("",!0)]),_:1}),m(Ke,{modelValue:e.panel,"onUpdate:modelValue":t[5]||(t[5]=a=>e.panel=a),"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"white",navigation:"",padding:"",infinite:"",arrows:"",class:"bg-primary text-white shadow-2 rounded-borders"},{default:g(()=>[(v(!0),_(S,null,M(e.daOptions,(a,u)=>(v(),I(Oe,{name:u,key:u},{default:g(()=>[r("div",null,[m(Ue,{class:j(e.timelineColor(a[0].color))},{default:g(()=>[m(oe,{heading:"",body:a[0].title},null,8,["body"]),(v(!0),_(S,null,M(a,f=>(v(),I(oe,{key:f.on,title:f.score,subtitle:f.on},{default:g(()=>[w(y(f.note),1)]),_:2},1032,["title","subtitle"]))),128))]),_:2},1032,["class"])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1})}var Qt=qe(Je,[["render",Tt],["__scopeId","data-v-ad7bbea2"]]);export{Qt as default};
