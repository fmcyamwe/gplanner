import{_ as b,d as M,E as w,F as g,M as h,I as r,K as d,H as i,ac as m,aa as v,U as N,S as c,O as _,N as T,R as $,J as f,ad as V,ae as L}from"./index.0f75d3cd.js";import{N as E,Q,t as C,P as F,c as k,i as p}from"./NavigationBar.8e417093.js";/* empty css                             */import{u as H}from"./goalStorage.8dbaf97b.js";import{u as B}from"./use-quasar.17b845fa.js";const G=M({name:"TaskDark",components:{NavigationBar:E,QCalendarTask:Q},data(){return{selectedDate:C(),selectedMonth:"",allMonths:F("long","en-US"),startDate:C(),endDate:C(),store:H(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:B()}},computed:{parsedTasks(){const e=k(this.startDate),t=k(this.endDate),l=[];for(let o=0;o<this.tasks.length;++o){const s=this.tasks[o];for(let n=0;n<s.logged.length;++n){const u=k(s.logged[n].date);if(p(u,e,t)){l.push(s);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e,console.log("weeee tasks:",this.tasks);const t=l=>{l.logged.forEach(o=>{o.date.slice(-2)})};this.tasks.forEach(l=>{t(l),l.children!==void 0&&l.children.forEach(o=>{t(o)})})},methods:{badgeStyles(e){return{color:e.isChild?"white":e.color!==void 0?e.color:"gold"}},getLogged(e,t,l=null){const o=[];if(t.length==0)return console.log("ERROR...Empty getLogged?!?",e,l),o;for(let s=0;s<t.length;++s)if(t[s].date===e){o.push({logged:t[s].logged});break}return o},getLoggedSummary(e){let t=0;const l=(o,s)=>e===s.date?o+s.logged:o;for(const o in this.tasks)t+=this.tasks[o].logged.reduce(l,0);return t.toFixed(2)},sum(e,t,l){const o=(s,n)=>{const u=k(n.date);return p(u,e,t)?s+n.logged:s};return l.logged.reduce(o,0)},getTasks(e,t,l){const o=[];for(let s=0;s<l.logged.length;++s){const n=k(l.logged[s].date);if(p(n,e,t)){o.push(l);break}}return o},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let l=0;const o=(s,n)=>{const u=k(n.date);return p(u,e,t)?s+n.logged:s};for(const s in this.tasks)l+=this.tasks[s].logged.reduce(o,0);return l.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let t=e.days[0].month;console.log("onChange",t,e),this.selectedMonth=this.allMonths[t-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),D=e=>(V("data-v-498bd3f3"),e=e(),L(),e),I={class:"subcontent"},P={class:"row justify-center"},R={style:{display:"flex","max-width":"800px",width:"100%"}},U={class:"header ellipsis",style:{"font-weight":"600"}},q={class:"issue ellipsis"},A=D(()=>d("div",{class:"key"},"Key",-1)),j=D(()=>d("div",{class:"logged"},"Logged",-1)),O={class:"key"},K={class:"logged"},z={key:0,class:"logged-time",style:{"font-weight":"800"}},J={key:1,class:"logged-time"},W={class:"summary ellipsis"},X={class:"title ellipsis"},Y={class:"total"},Z={class:"logged-time"},x=D(()=>d("br",null,null,-1)),ee={key:0,class:"column justify-center items-center"};function te(e,t,l,o,s,n){const u=w("navigation-bar"),S=w("q-calendar-task");return g(),h("div",I,[r(u,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),d("div",P,[d("div",R,[r(S,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=a=>e.footerTasks=a),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":i(({})=>[d("div",U,[d("div",q,c(e.getViewedMonth),1),A,j])]),task:i(({scope:a})=>[(g(!0),h(_,null,T(e.getTasks(a.start,a.end,a.task),y=>(g(),h("div",{key:y.key,class:"header ellipsis"},[d("div",{class:"issue ellipsis",style:$(e.badgeStyles(a.task))},c(a.task.title)+" ",5),d("div",O,c(a.task.key),1),d("div",K,c(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:i(({scope:a})=>[(g(!0),h(_,null,T(e.getLogged(a.timestamp.date,a.task.logged),y=>(g(),h(_,{key:y},[a.task.children!==void 0?(g(),h("div",z,c(y.logged),1)):(g(),h("div",J,c(y.logged),1))],64))),128))]),"footer-task":i(({scope:a})=>[d("div",W,[d("div",X,c(a.footer.title),1),d("div",Y,c(e.totals(a.start,a.end)),1)])]),"footer-day":i(({scope:a})=>[d("div",Z,c(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),x,e.tasks.length<=0?(g(),h("div",ee,[r(m,null,{default:i(()=>[f(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),r(v),r(m,null,{default:i(()=>[f(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),r(v),r(m,null,{default:i(()=>[f(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),r(v),r(m,null,{default:i(()=>[f(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),r(v),r(m,null,{default:i(()=>[f(" 5. Check out the summary of all goals here! ")]),_:1})])):N("",!0)])}var ne=b(G,[["render",te],["__scopeId","data-v-498bd3f3"]]);export{ne as default};
