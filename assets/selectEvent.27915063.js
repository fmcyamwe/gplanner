import{_ as f,E as i,O as A,H as l,G as d,bg as _,a1 as b,M as c,J as v,bh as u,an as p,F as B,I as C,N as m,a3 as x,a6 as S,a7 as g}from"./index.a1cffa07.js";import{b as V,Q as y}from"./QItem.27ffb624.js";import{Q as E}from"./QSelect.e0680041.js";import{Q}from"./QSpace.de21ddc0.js";import"./touch.70a9dd44.js";import"./goalStorage.7568199c.js";import"./utiFunc.5349c58b.js";const k={name:"selectEvent",props:{canBeScheduled:Array,toBalance:Number},data(){return{doForce:!1,toAddE:null,useBalance:!1,allEvts:this.canBeScheduled}},emits:["onPickEvent","doCancel"],computed:{allScheduled:{get(){return this.allEvts},set(e){this.allEvts=e}},toAdd:{get(){return this.toAddE},set(e){this.toAddE=e}}},methods:{onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance),this.doForce=!1,this.useBalance=!1,this.toAdd=null},filterFn(e,t,s){t(()=>{const r=e.toLowerCase();this.allScheduled=this.canBeScheduled.filter(a=>(a==null?void 0:a.title.toLowerCase().indexOf(r))>-1)})},setModel(e){this.toAdd=e},goalyColor(e){var t,s;return this.toAdd==null?"":e=="c"?"bg-"+((t=this.toAdd)==null?void 0:t.color):(s=this.toAdd)==null?void 0:s.color},labely(){var e;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":" Of: "+((e=this.toAdd)==null?void 0:e.pg)},canBalance(){var t,s,r,a;let e=this.toBalance+parseInt((t=this.toAdd)==null?void 0:t.duration)||((s=this.toAdd)==null?void 0:s.isAlternative);return console.log("canBalance",e),this.toAdd==null?!1:this.toBalance+parseInt((r=this.toAdd)==null?void 0:r.duration)||((a=this.toAdd)==null?void 0:a.isAlternative)}}},h=e=>(S("data-v-2f7e6b7e"),e=e(),g(),e),F={class:"q-pa-md"},I=h(()=>c("div",{class:"text-h3"},"Select event",-1)),q={class:"q-mx-md event-select"},N=h(()=>c("div",{class:"q-mx-md",style:{"text-align":"center"}}," Add ",-1));function w(e,t,s,r,a,o){return i(),A("div",F,[l(x,null,{default:d(()=>[l(_,null,{default:d(()=>[I]),_:1}),l(b),c("div",q,[l(E,{modelValue:o.toAdd,"onUpdate:modelValue":t[0]||(t[0]=n=>o.toAdd=n),options:o.allScheduled,class:"q-gutter-md q-px-md","option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:o.labely(),"options-selected-class":o.goalyColor("c"),"label-color":o.goalyColor("l"),onFilter:o.filterFn,onInputValue:o.setModel,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu"},{"no-option":d(()=>[l(V,null,{default:d(()=>[l(y,{class:"text-grey"},{default:d(()=>[v(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","label","options-selected-class","label-color","onFilter","onInputValue"])]),l(u,{align:"center",class:"q-px-xl"},{default:d(()=>[l(p,{dense:"",modelValue:a.doForce,"onUpdate:modelValue":t[1]||(t[1]=n=>a.doForce=n),label:"Force",color:"teal"},null,8,["modelValue"]),l(Q),o.canBalance?(i(),B(p,{key:0,dense:"",modelValue:a.useBalance,"onUpdate:modelValue":t[2]||(t[2]=n=>a.useBalance=n),label:"Use Balance",color:"brown"},null,8,["modelValue"])):C("",!0)]),_:1}),l(u,{align:"center"},{default:d(()=>[l(m,{flat:"",label:"Cancel",color:"primary",onClick:t[3]||(t[3]=n=>e.$emit("doCancel"))}),l(m,{elevated:"",color:"primary",onClick:o.onAddClicked},{default:d(()=>[N]),_:1},8,["onClick"])]),_:1})]),_:1})])}var J=f(k,[["render",w],["__scopeId","data-v-2f7e6b7e"]]);export{J as default};
