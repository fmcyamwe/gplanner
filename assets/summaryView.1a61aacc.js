import{_ as M,d as G,E as D,F as h,M as g,I as d,K as n,H as i,am as m,P as f,V as b,S as c,O as w,N as S,J as v,R as N,U as $,X as V,Y as x,W as Q}from"./index.c4a8454b.js";import{N as E,P as L,t as T,S as q,c as k,i as p,Q as F}from"./NavigationBar.e167b64d.js";/* empty css                             */import{u as H}from"./goalStorage.336a1723.js";import{u as I}from"./use-quasar.94e41af8.js";const P=G({name:"TaskDark",components:{NavigationBar:E,QCalendarTask:L},data(){return{selectedDate:T(),selectedMonth:"",allMonths:q("long","en-US"),startDate:T(),endDate:T(),store:H(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:I(),treeGoals:[],expanded:[]}},computed:{parsedTasks(){const e=k(this.startDate),t=k(this.endDate),l=[];for(let o=0;o<this.tasks.length;++o){const a=this.tasks[o];for(let r=0;r<a.logged.length;++r){const u=k(a.logged[r].date);if(p(u,e,t)){l.push(a);break}}}return l},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e,console.log("weeee tasks:",this.tasks);const t=l=>{l.logged.forEach(o=>{o.date.slice(-2)})};this.tasks.forEach(l=>{t(l),l.children!==void 0&&l.children.forEach(o=>{t(o)})}),this.constructTree()},methods:{getLogged(e,t,l=null){const o=[];if(t.length==0)return console.log("ERROR...Empty getLogged?!?",e,l),o;for(let a=0;a<t.length;++a)if(t[a].date===e){o.push({logged:t[a].logged});break}return o},classyColor(e){return`row items-center ${e.isChildren?"text-":"text-white bg-"}${e.color} `},getLoggedSummary(e){let t=0;const l=(o,a)=>e===a.date?o+a.logged:o;for(const o in this.tasks)t+=this.tasks[o].logged.reduce(l,0);return t.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree(),console.log("constructTree",this.treeGoals)},sum(e,t,l){const o=(r,u)=>{const C=k(u.date);return p(C,e,t)?r+u.logged:r};return l.logged.reduce(o,0).toFixed(2)},getTasks(e,t,l){const o=[];for(let a=0;a<l.logged.length;++a){const r=k(l.logged[a].date);if(p(r,e,t)){o.push(l);break}}return o},badgeStyles(e){return{color:e.isChild?"white":e.color!==void 0?e.color:"gold"}},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let l=0;const o=(a,r)=>{const u=k(r.date);return p(u,e,t)?a+r.logged:a};for(const a in this.tasks)l+=this.tasks[a].logged.reduce(o,0);return l.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let t=e.days[0].month;console.log("onChange",t,e),this.selectedMonth=this.allMonths[t-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),_=e=>(V("data-v-70fb2b10"),e=e(),x(),e),U={class:"subcontent"},B={class:"row justify-center"},R={style:{display:"flex","max-width":"800px",width:"100%"}},j={class:"header ellipsis",style:{"font-weight":"600"}},z={class:"issue ellipsis"},A=_(()=>n("div",{class:"key"},"Key",-1)),O=_(()=>n("div",{class:"logged"},"Logged",-1)),K={class:"key"},J={class:"logged"},W={key:0,class:"logged-time",style:{"font-weight":"800"}},X={key:1,class:"logged-time"},Y={class:"summary ellipsis"},Z={class:"title ellipsis"},ee={class:"total"},se={class:"logged-time"},te=_(()=>n("br",null,null,-1)),oe={key:0,class:"column justify-center items-center"},ae={key:1,class:"q-pa-xl bg-grey-12",style:{"max-width":"400px"}},le=_(()=>n("div",{class:"row justify-center"}," Goals & Goal Events ",-1)),ne=_(()=>n("br",null,null,-1)),de={class:"q-mr-sm text-weight-bold",size:"28px"},re={key:0},ie={class:"text-weight-bold"},ce={key:1,class:"text-weight-light text-black"};function he(e,t,l,o,a,r){const u=D("navigation-bar"),C=D("q-calendar-task");return h(),g("div",U,[d(u,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),n("div",B,[n("div",R,[d(C,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedDate=s),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=s=>e.parsedTasks=s),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=s=>e.footerTasks=s),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":i(({})=>[n("div",j,[n("div",z,c(e.getViewedMonth),1),A,O])]),task:i(({scope:s})=>[(h(!0),g(w,null,S(e.getTasks(s.start,s.end,s.task),y=>(h(),g("div",{key:y.key,class:"header ellipsis"},[n("div",{class:"issue ellipsis",style:Q(e.badgeStyles(s.task))},c(s.task.title)+" ",5),n("div",K,c(s.task.key),1),n("div",J,c(e.sum(s.start,s.end,s.task)),1)]))),128))]),day:i(({scope:s})=>[(h(!0),g(w,null,S(e.getLogged(s.timestamp.date,s.task.logged),y=>(h(),g(w,{key:y},[s.task.children!==void 0?(h(),g("div",W,c(y.logged),1)):(h(),g("div",X,c(y.logged),1))],64))),128))]),"footer-task":i(({scope:s})=>[n("div",Y,[n("div",Z,c(s.footer.title),1),n("div",ee,c(e.totals(s.start,s.end)),1)])]),"footer-day":i(({scope:s})=>[n("div",se,c(e.getLoggedSummary(s.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),te,e.tasks.length<=0?(h(),g("div",oe,[d(m,null,{default:i(()=>[v(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),d(f),d(m,null,{default:i(()=>[v(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),d(f),d(m,null,{default:i(()=>[v(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),d(f),d(m,null,{default:i(()=>[v(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),d(f),d(m,null,{default:i(()=>[v(" 5. Check out the summary of all goals here! ")]),_:1})])):b("",!0),e.treeGoals.length>0?(h(),g("div",ae,[le,d(f),ne,d(F,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":t[3]||(t[3]=s=>e.expanded=s),"no-connectors":"",dense:""},{"default-header":i(s=>[n("div",{class:$(e.classyColor(s.node))},[d(N,{name:s.node.icon||"arrow",size:"28px",class:"q-mr-sm"},null,8,["name"]),n("div",de,c(s.node.label),1)],2)]),"default-body":i(s=>[s.node.isChildren?(h(),g("div",re,[n("span",ie," >> "+c(s.node.details),1)])):(h(),g("span",ce,c(s.node.details),1))]),_:1},8,["nodes","expanded"])])):b("",!0)])}var fe=M(P,[["render",he],["__scopeId","data-v-70fb2b10"]]);export{fe as default};
