import{j as ca,c as M,h as d,k as xa,X as Ia,Y as Za,r as c,Z as Ja,$ as pa,w as le,b as At,a0 as en,Q as Ze,g as Ft,a1 as tn,a2 as an,a3 as nn,a4 as ln,a5 as rn,d as Ht,a as $t,o as Gt,f as Wt,T as Qt,n as Ut,a6 as un,a7 as dn,_ as Ea,F as Ee,M as Ke,J as Ot,P as Tt,I as J,H as De,a8 as Rt,a9 as Pa,aa as on,K as $e,ab as St,ac as Fa,U as Va,V as Na,E as Pt,ad as Ha,R as kt,S as da,G as Vt,ae as ya,af as _a,ag as Ra,ah as Oa,N as ba,O as sn}from"./index.5c6c43eb.js";import{Q as Ka,a as Da,b as $a,c as cn,d as fn,e as vn,f as hn,g as mn,h as gn,i as Aa}from"./viewAllGoals.4378f580.js";import{c as ka,b as yn,d as Ga,e as Qa,f as Sa,v as Xe,h as Ct,j as ht,p as me,k as oa,l as We,u as wa,m as Et,R as Dt,n as Mt,o as Lt,q as Bt,r as zt,s as Xt,w as ke,t as lt,x as Yt,y as jt,z as Zt,A as rt,B as Jt,C as pt,D as ea,E as be,F as ta,G as aa,H as ut,I as fa,J as va,K as oe,L as na,M as la,O as _n,P as bn,S as wn,Q as Dn,N as kn,T as Nt,U as Wa,i as sa}from"./NavigationBar.f98cdf58.js";import{u as Sn}from"./goalStorage.1bc4feba.js";import{u as Cn}from"./use-quasar.101cf9c6.js";var En=ca({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const a=M(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${o.length>0?" "+o:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>d("div",{class:a.value},xa(t.default))}});const qn=Object.keys(Ia),Tn=e=>qn.reduce((t,a)=>{const o=e[a];return o!==void 0&&(t[a]=o),t},{});var Fn=ca({name:"QBtnDropdown",props:{...Ia,...Za,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:o}=Ft(),i=c(e.modelValue),f=c(null),m=Ja(),v=M(()=>{const w={"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":m,"aria-label":e.toggleAriaLabel||o.$q.lang.label[i.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(w["aria-disabled"]="true"),w}),R=M(()=>"q-btn-dropdown__arrow"+(i.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),O=M(()=>pa(e)),L=M(()=>Tn(e));le(()=>e.modelValue,w=>{f.value!==null&&f.value[w?"show":"hide"]()}),le(()=>e.split,C);function k(w){i.value=!0,a("beforeShow",w)}function S(w){a("show",w),a("update:modelValue",!0)}function P(w){i.value=!1,a("beforeHide",w)}function G(w){a("hide",w),a("update:modelValue",!1)}function K(w){a("click",w)}function A(w){tn(w),C(),a("click",w)}function Q(w){f.value!==null&&f.value.toggle(w)}function q(w){f.value!==null&&f.value.show(w)}function C(w){f.value!==null&&f.value.hide(w)}return Object.assign(o,{show:q,hide:C,toggle:Q}),At(()=>{e.modelValue===!0&&q()}),()=>{const w=[d(en,{class:R.value,name:e.dropdownIcon||o.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&w.push(d(Ka,{ref:f,id:m,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:k,onShow:S,onBeforeHide:P,onHide:G},t.default)),e.split===!1?d(Ze,{class:"q-btn-dropdown q-btn-dropdown--simple",...L.value,...v.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:K},{default:()=>xa(t.label,[]).concat(w),loading:t.loading}):d(En,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...O.value,glossy:e.glossy,stretch:e.stretch},()=>[d(Ze,{class:"q-btn-dropdown--current",...L.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:A},{default:t.label,loading:t.loading}),d(Ze,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...v.value,...O.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>w)])}}});function Ma(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Hn=an({name:"close-popup",beforeMount(e,{value:t}){const a={depth:Ma(t),handler(o){a.depth!==0&&setTimeout(()=>{const i=nn(e);i!==void 0&&ln(i,o,a.depth)})},handlerKey(o){rn(o,13)===!0&&a.handler(o)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:t,oldValue:a}){t!==a&&(e.__qclosepopup.depth=Ma(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function La(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function Rn(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function On(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function An(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function Ua(e,t,a=0){const o=arguments[3]===void 0?performance.now():arguments[3],i=On(e);if(a<=0){i!==t&&La(e,t);return}requestAnimationFrame(f=>{const m=f-o,v=i+(t-i)/Math.max(m,a)*m;La(e,v),v!==t&&Ua(e,t,a-m,f)})}function za(e,t,a=0){const o=arguments[3]===void 0?performance.now():arguments[3],i=An(e);if(a<=0){i!==t&&Rn(e,t);return}requestAnimationFrame(f=>{const m=f-o,v=i+(t-i)/Math.max(m,a)*m;setHorizontalScroll(e,v),v!==t&&za(e,t,a-m,f)})}const qa={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},shortIntervalLabel:Boolean,intervalHeight:{type:[Number,String],default:40,validator:Xe},intervalMinutes:{type:[Number,String],default:60,validator:Xe},intervalStart:{type:[Number,String],default:0,validator:Xe},intervalCount:{type:[Number,String],default:24,validator:Xe},intervalStyle:{type:Function,default:null},intervalClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},showIntervalLabel:{type:Function,default:null},hour24Format:Boolean,timeClicksClamped:Boolean,dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)}},Xa={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},modelResources:{type:Array},resourceKey:{type:[String,Number],default:"id"},resourceLabel:{type:[String,Number],default:"label"},resourceHeight:{type:[Number,String],default:0,validator:Xe},resourceMinHeight:{type:[Number,String],default:70,validator:Xe},resourceStyle:{type:Function,default:null},resourceClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)}},Wn={view:{type:String,validator:e=>["day","week","month","month-interval"].includes(e),default:"day"},leftColumnOptions:{type:Array},rightColumnOptions:{type:Array},columnOptionsId:{type:String},columnOptionsLabel:{type:String},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},dateHeader:{type:String,default:"stacked",validator:e=>["stacked","inline","inverted"].includes(e)},dayHeight:{type:[Number,String],default:0,validator:Xe},dayMinHeight:{type:[Number,String],default:40,validator:Xe}},Ya={modelResources:{type:Array},resourceKey:{type:[String,Number],default:"id"},resourceLabel:{type:[String,Number],default:"label"},resourceHeight:{type:[Number,String],default:0,validator:Xe},resourceMinHeight:{type:[Number,String],default:70,validator:Xe},resourceStyle:{type:Function,default:null},resourceClass:{type:Function,default:null},cellWidth:{type:[Number,String],default:100},intervalHeaderHeight:{type:[Number,String],default:20,validator:Xe},noSticky:Boolean};function ha(e,{weekdaySkips:t,times:a,scrollArea:o,parsedStart:i,parsedEnd:f,maxDays:m,size:v,headerColumnRef:R}){const O=M(()=>parseInt(e.intervalStart,10)),L=M(()=>parseInt(e.intervalMinutes,10)),k=M(()=>parseInt(e.intervalCount,10)),S=M(()=>parseFloat(e.intervalHeight)),P=M(()=>{let g=0;return e.cellWidth?g=e.cellWidth:v.width>0&&R.value&&(g=R.value.offsetWidth/(e.columnCount>1?e.columnCount:m.value)),g}),G=M(()=>O.value*L.value),K=M(()=>k.value*S.value),A=M(()=>k.value*P.value),Q=M(()=>Ye(i.value)),q=M(()=>Oe(f.value)),C=M(()=>ka(i.value,f.value,a.today,t.value,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,m.value)),w=M(()=>C.value.map(g=>yn(g,O.value,L.value,k.value,a.now)));function Ye(g){return Ga(g,e.weekdays,a.today)}function Oe(g){return Qa(g,e.weekdays,a.today)}function Se(g,U){return g&&g.length>0&&g.includes(Ct(U))}function se(g,U){const V={firstDay:!1,betweenDays:!1,lastDay:!1};if(g&&g.length===2){const p=ht(U),re=ht(me(g[0])),ie=ht(me(g[1]));V.firstDay=re===p,V.lastDay=ie===p,V.betweenDays=re<p&&ie>p}return V}function x(g,U=[],V=[]){const p=Se(U,g),{firstDay:re,lastDay:ie,betweenDays:j}=se(V,g);return{"q-selected":p,"q-range-first":re===!0,"q-range":j===!0,"q-range-last":ie===!0,"q-disabled-interval disabled":g.disabled===!0}}function z(g,U=[],V=[]){return[]}const ge=M(()=>{const g={timeZone:"UTC",hour12:!e.hour24Format,hour:"2-digit",minute:"2-digit"},U={timeZone:"UTC",hour12:!e.hour24Format,hour:"numeric",minute:"2-digit"},V={timeZone:"UTC",hour12:!e.hour24Format,hour:"numeric"};return Sa(e.locale,(p,re)=>re?p.minute===0?V:U:g)}),Ge=M(()=>{const g={timeZone:"UTC",dateStyle:"full",timeStyle:"short"};return Sa(e.locale,U=>g)});function Ie(g){const U=w.value[0][0];return!(U.hour===g.hour&&U.minute===g.minute)&&g.minute===0}function Me(g){}function et(g){}function st(g,U,V=!1,p=void 0){let re=oa(U);const ie=g.currentTarget.getBoundingClientRect(),j=g,ye=g,Z=j.changedTouches||j.touches,xe=((Z&&Z[0]?Z[0].clientY:ye.clientY)-ie.top)/S.value,Ce=Math.floor((V?Math.floor(xe):xe)*L.value);return Ce!==0&&(re=We(re,{minute:Ce})),p&&wa(re,p,!0),re}function at(g,U,V=!1,p=void 0){let re=oa(U);const ie=g.currentTarget.getBoundingClientRect(),j=g,ye=g,Z=j.changedTouches||j.touches,xe=((Z&&Z[0]?Z[0].clientY:ye.clientY)-ie.top)/S.value,Ce=Math.floor((V?Math.floor(xe):xe)*L.value);return Ce!==0&&(re=We(re,{minute:Ce})),p&&wa(re,p,!0),re}function je(g,U,V=!1,p=void 0){let re=oa(U);const ie=g.currentTarget.getBoundingClientRect(),j=g,ye=g,Z=j.changedTouches||j.touches,xe=((Z&&Z[0]?Z[0].clientX:ye.clientX)-ie.left)/P.value,Ce=Math.floor((V?Math.floor(xe):xe)*L.value);return Ce!==0&&(re=We(re,{minute:Ce})),p&&wa(re,p,!0),re}function Je(g,U){const V={timestamp:g};return V.timeStartPos=ne,V.timeDurationHeight=Be,U!==void 0&&(V.columnIndex=U),V}function Le(g,U){const V={timestamp:oa(g)};return V.timeStartPosX=te,V.timeDurationWidth=_e,U!==void 0&&(V.index=U),V}function qe(g,U=0){const V=ne(g);return V===!1||!o.value?!1:(Ua(o.value,V,U),!0)}function Pe(g,U=0){const V=te(g);return V===!1||!o.value?!1:(za(o.value,V,U),!0)}function Be(g){return g/L.value*S.value}function _e(g){return g/L.value*P.value}function it(g){return parseInt(g,10)*L.value/S.value}function he(g){return parseInt(g,10)*L.value/P.value}function ne(g,U=!0){const V=Et(g);if(V===!1)return!1;const p=G.value,re=k.value*L.value;let j=(V-p)/re*K.value;return U&&(j<0&&(j=0),j>K.value&&(j=K.value)),j}function te(g,U=!0){const V=Et(g);if(V===!1)return!1;const p=G.value,re=k.value*L.value;let j=(V-p)/re*A.value;return U&&(j<0&&(j=0),j>A.value&&(j=A.value)),j}return{parsedIntervalStart:O,parsedIntervalMinutes:L,parsedIntervalCount:k,parsedIntervalHeight:S,parsedCellWidth:P,parsedStartMinute:G,bodyHeight:K,bodyWidth:A,parsedWeekStart:Q,parsedWeekEnd:q,days:C,intervals:w,intervalFormatter:ge,ariaDateTimeFormatter:Ge,arrayHasDateTime:Se,checkIntervals:se,getIntervalClasses:x,getResourceClasses:z,showIntervalLabelDefault:Ie,showResourceLabelDefault:Me,styleDefault:et,getTimestampAtEventInterval:st,getTimestampAtEvent:at,getTimestampAtEventX:je,getScopeForSlot:Je,getScopeForSlotX:Le,scrollToTime:qe,scrollToTimeX:Pe,timeDurationHeight:Be,timeDurationWidth:_e,heightToMinutes:it,widthToMinutes:he,timeStartPos:ne,timeStartPosX:te}}const ma={columnCount:{type:[Number,String],default:0,validator:Xe},columnIndexStart:{type:[Number,String],default:0,validator:Xe}},ra={maxDays:{type:Number,default:1}},ua={cellWidth:[Number,String]};function ga(e){return{isSticky:M(()=>e.cellWidth!==void 0)}}var Mn=Ht({name:"QCalendarAgenda",directives:[Dt],props:{...Mt,...Wn,...ma,...ra,...Lt,...ua,...Bt},emits:["update:model-value",...zt,...Xt,...ke("-date"),...ke("-head-day"),...ke("-time")],setup(e,{slots:t,emit:a,expose:o}){const i=c(null),f=c(null),m=c(null),v=c(null),R=c(null),O=c({}),L=c({}),k=c({}),S=c("next"),P=c(lt()),G=c("0000-00-00"),K=c(0),A=c(e.modelValue),Q=$t({width:0,height:0}),q=c(!1),C=c(null),w=c(null);le(()=>e.view,()=>{K.value=0});const Ye=M(()=>e.view==="month"?"month-interval":e.view),Oe=Ft();if(Oe===null)throw new Error("current instance is null");const{emitListeners:Se}=Yt(Oe),{isSticky:se}=ga(e);le(se,r=>{});const{times:x,setCurrent:z,updateCurrent:ge}=jt(e);ge(),z();const{weekdaySkips:Ge,parsedStart:Ie,parsedEnd:Me,dayFormatter:et,weekdayFormatter:st,ariaDateFormatter:at,dayStyleDefault:je,getRelativeClasses:Je}=Zt(e,{startDate:P,endDate:G,times:x}),Le=M(()=>rt(e.modelValue,x.now)||Ie.value||x.today);R.value=Le.value,v.value=Le.value.date;const{renderValues:qe}=Jt(e,{parsedView:Ye,parsedValue:Le,times:x}),{rootRef:Pe,scrollWidth:Be,__initCalendar:_e,__renderCalendar:it}=pt(e,Ae,{scrollArea:i,pane:f}),{days:he,parsedCellWidth:ne,getScopeForSlot:te}=ha(e,{weekdaySkips:Ge,times:x,scrollArea:i,parsedStart:Ie,parsedEnd:Me,maxDays:K,size:Q,headerColumnRef:m}),{move:g}=ta(e,{parsedView:Ye,parsedValue:Le,weekdaySkips:Ge,direction:S,maxDays:K,times:x,emittedValue:A,emit:a}),{getDefaultMouseEventHandlers:U}=na(a,Se),{checkChange:V}=aa(a,{days:he,lastStart:C,lastEnd:w}),{isKeyCode:p}=la(),{tryFocus:re}=ea(e,{rootRef:Pe,focusRef:v,focusValue:R,datesRef:O,days:he,parsedView:Ye,parsedValue:Le,emittedValue:A,weekdaySkips:Ge,direction:S,times:x}),ie=M(()=>he.value.length+(j.value===!0?e.leftColumnOptions.length:0)+(ye.value===!0?e.rightColumnOptions.length:0)+he.value.length===1&&parseInt(e.columnCount,10)>0?parseInt(e.columnCount,10):0),j=M(()=>e.leftColumnOptions!==void 0&&Array.isArray(e.leftColumnOptions)),ye=M(()=>e.rightColumnOptions!==void 0&&Array.isArray(e.rightColumnOptions)),Z=M(()=>{if(Pe.value){const r=Q.width||Pe.value.getBoundingClientRect().width;if(r&&ie.value)return(r-Be.value)/ie.value+"px"}return 100/ie.value+"%"});le([he],V,{deep:!0,immediate:!0}),le(()=>e.modelValue,(r,y)=>{if(A.value!==r){if(e.animated===!0){const l=be(me(r)),h=be(me(y));S.value=l>=h?"next":"prev"}A.value=r}v.value=r}),le(A,(r,y)=>{if(A.value!==e.modelValue){if(e.animated===!0){const l=be(me(r)),h=be(me(y));S.value=l>=h?"next":"prev"}a("update:model-value",r)}}),le(v,r=>{r&&(R.value=rt(r))}),le(R,r=>{O.value[v.value]?O.value[v.value].focus():re()}),le(()=>e.maxDays,r=>{K.value=r}),Gt(()=>{O.value={}}),At(()=>{_e()});function Qe(){A.value=lt()}function xe(r=1){g(r)}function Ce(r=1){g(-r)}function nt({width:r,height:y}){Q.width=r,Q.height=y}function Ve(r){return r.date===A.value}function Te(r,y){const l=t["head-column"],h={column:r,index:y,days:he.value},b=se.value===!0?e.cellWidth:Z.value,s=e.focusable===!0&&e.focusType.includes("weekday"),E=e.columnOptionsId!==void 0?r[e.columnOptionsId]:void 0,$={maxWidth:b,width:b};return d("div",{key:E,tabindex:s===!0?0:-1,class:{"q-calendar-agenda__head--day":!0,"q-column-day":!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:$,onDragenter:n=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(n,"head-column",h)===!0?q.value=E:q.value="")},onDragover:n=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(n,"head-column",h)===!0?q.value=E:q.value="")},onDragleave:n=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(n,"head-column",h)===!0?q.value=E:q.value="")},onDrop:n=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(n,"head-column",h)===!0?q.value=E:q.value="")},...U("-head-column",(n,_)=>({scope:{column:r,index:y},event:n}))},[e.noDefaultHeaderText!==!0&&_t(r),l&&l(h),ut()])}function _t(r){const y=t["head-column-label"],l={column:r},h=e.columnOptionsLabel!==void 0?r[e.columnOptionsLabel]:r.label,b=d("div",{class:{"q-calendar-agenda__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,ellipsis:!0},style:{alignSelf:"center"}},[y&&y({scope:l}),!y&&d("span",{class:"ellipsis"},h)]);return e.dateHeader==="stacked"?b:d("div",{class:"q-calendar__header--inline",style:{height:"100%"}},[b])}function Ue(){return d("div",{roll:"presentation",class:{"q-calendar-agenda__head":!0,"q-calendar__sticky":se.value===!0},style:{marginRight:Be.value+"px"}},[mt()])}function mt(){return d("div",{ref:m,class:{"q-calendar-agenda__head--days__column":!0}},[ct(),dt()])}function ct(){return d("div",{class:{"q-calendar-agenda__head--days__weekdays":!0}},[...ft()])}function dt(){const r=t["head-days-events"];return Ut(()=>{if(k.value&&e.columnCount===0&&window)try{const y=window.getComputedStyle(k.value);L.value.parentElement.style.height=y.height,L.value.style.height=y.height}catch{}}),d("div",{class:{"q-calendar-agenda__head--days__event":!0}},[r&&d("div",{ref:L,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[r({scope:{days:he.value,ref:k}})]),...gt()])}function ft(){return he.value.length===1&&parseInt(e.columnCount,10)>0?[j.value===!0&&e.leftColumnOptions.map((r,y)=>Te(r,y)),Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>yt(he.value[0],r)),ye.value===!0&&e.rightColumnOptions.map((r,y)=>Te(r,y))]:[j.value===!0&&e.leftColumnOptions.map((r,y)=>Te(r,y)),he.value.map(r=>yt(r)),ye.value===!0&&e.rightColumnOptions.map((r,y)=>Te(r,y))]}function gt(){return he.value.length===1&&parseInt(e.columnCount,10)>0?[Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>ot(he.value[0],r))]:he.value.map(r=>ot(r))}function yt(r,y){const l=t["head-day"],h=t["head-date"],b=e.noActiveDate!==!0&&Ve(r),s=te(r,y);s.activeDate=b,s.droppable=q.value===r.date,s.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1;const E=se.value===!0?e.cellWidth:Z.value,$=e.weekdayStyle||je,n={width:E,maxWidth:E,...$({scope:s})};se.value===!0&&(n.minWidth=E);const _=typeof e.weekdayClass=="function"?e.weekdayClass({scope:s}):{},T=e.focusable===!0&&e.focusType.includes("weekday"),H={key:r.date+(y!==void 0?"-"+y:""),ref:I=>{O.value[r.date]=I},tabindex:T===!0?0:-1,class:{"q-calendar-agenda__head--day":!0,..._,...Je(r),"q-active-date":b,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":T===!0},style:n,onDragenter:I=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(I,"head-day",s)===!0?q.value=r.date:q.value="")},onDragover:I=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(I,"head-day",s)===!0?q.value=r.date:q.value="")},onDragleave:I=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(I,"head-day",s)===!0?q.value=r.date:q.value="")},onDrop:I=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(I,"head-day",s)===!0?q.value=r.date:q.value="")},onFocus:I=>{T===!0&&(v.value=r.date)},...U("-head-day",I=>({scope:s,event:I}))};return d("div",H,[l!==void 0&&l({scope:s}),l===void 0&&bt(r),l===void 0&&h&&h({scope:s}),ut()])}function bt(r){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Fe(r)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Fe(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Fe(r)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&ze(r),e.noDefaultHeaderBtn!==!0&&Fe(r)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Fe(r),e.noDefaultHeaderText!==!0&&ze(r)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Fe(r),e.noDefaultHeaderText!==!0&&ze(r)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&Fe(r),e.noDefaultHeaderText!==!0&&ze(r)])}function ot(r,y){const l=t["head-day-event"],h=e.noActiveDate!==!0&&Ve(r),b=te(r,y);b.activeDate=h,b.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1;const s=se.value===!0?e.cellWidth:Z.value,E={width:s,maxWidth:s};return se.value===!0&&(E.minWidth=s),d("div",{key:"event-"+r.date+(y!==void 0?"-"+y:""),class:{"q-calendar-agenda__head--day__event":!0,...Je(r),"q-active-date":h},style:E},[l&&l({scope:b})])}function ze(r){const y=t["head-weekday-label"],l=te(r);l.shortWeekdayLabel=e.shortWeekdayLabel;const h={class:{"q-calendar-agenda__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return d("div",h,y&&y({scope:l})||vt(r,e.shortWeekdayLabel))}function vt(r,y){const l=st.value(r,y||e.weekdayBreakpoints[0]>0&&ne.value<=e.weekdayBreakpoints[0]);return d("span",{class:"q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&ne.value<=e.weekdayBreakpoints[1]?fa(l,e.minWeekdayLabel):l)}function Fe(r){const y={class:{"q-calendar-agenda__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return d("div",y,wt(r))}function wt(r){const y=e.noActiveDate!==!0&&Ve(r),l=et.value(r,!1),h=t["head-day-label"],b=t["head-day-button"],s={dayLabel:l,timestamp:r,activeDate:y,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(r.weekday):!1},E={class:{"q-calendar-agenda__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":r.current===!0,"q-calendar__focusable":!0},disabled:r.disabled,onKeydown:$=>{r.disabled!==!0&&p($,[13,32])&&($.stopPropagation(),$.preventDefault())},onKeyup:$=>{r.disabled!==!0&&p($,[13,32])&&(A.value=r.date,Se.value.onClickDate!==void 0&&a("click-date",{scope:s}))},...U("-date",($,n)=>((n==="click-date"||n==="contextmenu-date")&&(A.value=r.date,n==="click-date"&&$.preventDefault()),{scope:s,event:$}))};return e.noAria!==!0&&(E.ariaLabel=at.value(r)),b?b({scope:s}):va(e,E,h?h({scope:s}):l)}function pe(){return d("div",{class:"q-calendar-agenda__body"},[D()])}function D(){return se.value===!0?d("div",{ref:i,class:{"q-calendar-agenda__scroll-area":!0,"q-calendar__scroll":!0}},[ae()]):e.noScroll===!0?ee():d("div",{ref:i,class:{"q-calendar-agenda__scroll-area":!0,"q-calendar__scroll":!0}},[ee()])}function ee(){return d("div",{ref:f,class:"q-calendar-agenda__pane"},[ae()])}function ae(){const r=t["day-container"];return d("div",{class:"q-calendar-agenda__day-container"},[se.value===!0&&e.noHeader!==!0&&Ue(),d("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},[...ue()]),r&&r({scope:{days:he.value}})])}function ue(){return he.value.length===1&&parseInt(e.columnCount,10)>0?[j.value===!0&&e.leftColumnOptions.map((r,y)=>fe(r,y)),Array.apply(null,new Array(parseInt(e.columnCount,10))).map((r,y)=>y+parseInt(e.columnIndexStart,10)).map(r=>ce(he.value[0],0,r)),ye.value===!0&&e.rightColumnOptions.map((r,y)=>fe(r,y))]:[j.value===!0&&e.leftColumnOptions.map((r,y)=>fe(r,y)),he.value.map((r,y)=>ce(r)),ye.value===!0&&e.rightColumnOptions.map((r,y)=>fe(r,y))]}function fe(r,y){const l=t.column,h={column:r,days:he.value,index:y},b=se.value===!0?e.cellWidth:Z.value,s=e.focusable===!0&&e.focusType.includes("day"),E=e.columnOptionsId!==void 0?r[e.columnOptionsId]:void 0;return d("div",{key:E,tabindex:s===!0?0:-1,class:{"q-calendar-agenda__day":!0,"q-column-day":!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:{maxWidth:b,width:b},onDragenter:$=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc($,"column",h)===!0?q.value=E:q.value="")},onDragover:$=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc($,"column",h)===!0?q.value=E:q.value="")},onDragleave:$=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc($,"column",h)===!0?q.value=E:q.value="")},onDrop:$=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc($,"column",h)===!0?q.value=E:q.value="")},...U("-column",($,n)=>({scope:h,event:$}))},[l&&l({scope:h})])}function ce(r,y,l){const h=t.day,b=te(r,l),s=se.value===!0?e.cellWidth:Z.value,E={width:s,maxWidth:s};return se.value===!0&&(E.minWidth=s),E.height=parseInt(e.dayHeight,10)>0?oe(parseInt(e.dayHeight,10)):"auto",parseInt(e.dayMinHeight,10)>0&&(E.minHeight=oe(parseInt(e.dayMinHeight,10))),d("div",{key:r.date+(l!==void 0?":"+l:""),class:{"q-calendar-agenda__day":!0,...Je(r)},style:E},[h&&h({scope:b})])}function Ae(){const{start:r,end:y,maxDays:l}=qe.value;(P.value!==r.date||G.value!==y.date||K.value!==l)&&(P.value=r.date,G.value=y.date,K.value=l);const h=Q.width>0,b=Wt(d("div",{class:"q-calendar-agenda",key:P.value},[h===!0&&se.value!==!0&&e.noHeader!==!0&&Ue(),h===!0&&pe()]),[[Dt,nt]]);if(e.animated===!0){const s="q-calendar--"+(S.value==="prev"?e.transitionPrev:e.transitionNext);return d(Qt,{name:s,appear:!0},()=>b)}return b}return o({prev:Ce,next:xe,move:g,moveToToday:Qe,updateCurrent:ge}),()=>it()}}),Ca=Ht({name:"QCalendarDay",directives:[Dt],props:{...Mt,...qa,...ma,...ra,...Lt,...ua,...Bt},emits:["update:model-value",...zt,...Xt,...ke("-date"),...ke("-interval"),...ke("-head-intervals"),...ke("-head-day"),...ke("-time")],setup(e,{slots:t,emit:a,expose:o}){const i=c(null),f=c(null),m=c(null),v=c(null),R=c(null),O=c({}),L=c({}),k=c({}),S=c("next"),P=c(e.modelValue||lt()),G=c("0000-00-00"),K=c(0),A=c(e.modelValue),Q=$t({width:0,height:0}),q=c(!1),C=c(!1),w=c(null),Ye=c(null);le(()=>e.view,()=>{K.value=0});const Oe=M(()=>e.view==="month"?"month-interval":e.view),Se=Ft();if(Se===null)throw new Error("current instance is null");const{emitListeners:se}=Yt(Se),{isSticky:x}=ga(e),{times:z,setCurrent:ge,updateCurrent:Ge}=jt(e);Ge(),ge();const{weekdaySkips:Ie,parsedStart:Me,parsedEnd:et,dayFormatter:st,weekdayFormatter:at,ariaDateFormatter:je,dayStyleDefault:Je,getRelativeClasses:Le}=Zt(e,{startDate:P,endDate:G,times:z}),qe=M(()=>rt(e.modelValue,z.now)||Me.value||z.today);R.value=qe.value,v.value=qe.value.date;const{renderValues:Pe}=Jt(e,{parsedView:Oe,parsedValue:qe,times:z}),{rootRef:Be,scrollWidth:_e,__initCalendar:it,__renderCalendar:he}=pt(e,tt,{scrollArea:i,pane:f}),{days:ne,intervals:te,intervalFormatter:g,ariaDateTimeFormatter:U,parsedCellWidth:V,getIntervalClasses:p,showIntervalLabelDefault:re,styleDefault:ie,getTimestampAtEventInterval:j,getTimestampAtEvent:ye,getScopeForSlot:Z,scrollToTime:Qe,heightToMinutes:xe,timeDurationHeight:Ce,timeStartPos:nt}=ha(e,{weekdaySkips:Ie,times:z,scrollArea:i,parsedStart:Me,parsedEnd:et,maxDays:K,size:Q,headerColumnRef:m}),{move:Ve}=ta(e,{parsedView:Oe,parsedValue:qe,weekdaySkips:Ie,direction:S,maxDays:K,times:z,emittedValue:A,emit:a}),{getDefaultMouseEventHandlers:Te}=na(a,se),{checkChange:_t}=aa(a,{days:ne,lastStart:w,lastEnd:Ye}),{isKeyCode:Ue}=la(),{tryFocus:mt}=ea(e,{rootRef:Be,focusRef:v,focusValue:R,datesRef:O,days:ne,parsedView:Oe,parsedValue:qe,emittedValue:A,weekdaySkips:Ie,direction:S,times:z}),ct=M(()=>Oe.value==="day"&&parseInt(e.columnCount,10)>1?parseInt(e.columnCount,10):Oe.value==="day"&&e.maxDays&&e.maxDays>1?e.maxDays:ne.value.length),dt=M(()=>Be.value?parseInt(getComputedStyle(Be.value).getPropertyValue("--calendar-intervals-width"),10):0),ft=M(()=>{if(Be.value){const u=Q.width||Be.value.getBoundingClientRect().width;if(u&&dt.value&&ct.value)return(u-_e.value-dt.value)/ct.value+"px"}return 100/ct.value+"%"});le([ne],_t,{deep:!0,immediate:!0}),le(()=>e.modelValue,(u,F)=>{if(A.value!==e.modelValue){if(e.animated===!0){const B=be(me(u)),N=be(me(F));S.value=B>=N?"next":"prev"}A.value=u}v.value=u}),le(A,(u,F)=>{if(A.value!==e.modelValue){if(e.animated===!0){const B=be(me(u)),N=be(me(F));S.value=B>=N?"next":"prev"}a("update:model-value",u)}}),le(v,u=>{u&&(R.value=rt(u))}),le(R,u=>{O.value[v.value]?O.value[v.value].focus():mt()}),le(()=>e.maxDays,u=>{K.value=u}),Gt(()=>{O.value={},L.value={},k.value={}}),At(()=>{it()});function gt(){A.value=lt()}function yt(u=1){Ve(u)}function bt(u=1){Ve(-u)}function ot({width:u,height:F}){Q.width=u,Q.height=F}function ze(u){return u.date===A.value}function vt(){return d("div",{roll:"presentation",class:{"q-calendar-day__head":!0,"q-calendar__sticky":x.value===!0},style:{marginRight:_e.value+"px"}},[Fe(),wt()])}function Fe(){const u=t["head-intervals"],F={timestamps:ne.value,days:ne.value,date:e.modelValue};return d("div",{class:{"q-calendar-day__head--intervals":!0,"q-calendar__sticky":x.value===!0},...Te("-head-intervals",B=>({scope:F,event:B}))},[u&&u({scope:F})])}function wt(){return d("div",{ref:m,class:{"q-calendar-day__head--days__column":!0}},[pe(),D()])}function pe(){return d("div",{class:{"q-calendar-day__head--days__weekdays":!0}},[...ee()])}function D(){const u=t["head-days-events"];return Ut(()=>{if(k.value&&parseInt(e.columnCount,10)===0&&window)try{const F=window.getComputedStyle(k.value);L.value.parentElement.style.height=F.height,L.value.style.height=F.height}catch{}}),d("div",{class:{"q-calendar-day__head--days__event":!0}},[u&&d("div",{ref:L,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[u({scope:{days:ne.value,ref:k}})]),...ae()])}function ee(){return ne.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,F)=>F+parseInt(e.columnIndexStart,10)).map(u=>ue(ne.value[0],u)):ne.value.map(u=>ue(u))}function ae(){return ne.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,F)=>F+parseInt(e.columnIndexStart,10)).map(u=>ce(ne.value[0],u)):ne.value.map(u=>ce(u))}function ue(u,F){const B=t["head-day"],N=t["head-date"],X=e.noActiveDate!==!0&&ze(u),Y=Z(u,F);Y.activeDate=X,Y.droppable=q.value===u.date,Y.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const He=x.value===!0?e.cellWidth:ft.value,ve=e.weekdayStyle||Je,qt={width:He,maxWidth:He,minWidth:He,...ve({scope:Y})};x.value===!0&&(qt.minWidth=He);const ia=typeof e.weekdayClass=="function"?e.weekdayClass({scope:Y}):{},xt=e.focusable===!0&&e.focusType.includes("weekday"),Re=u.date+(F!==void 0?"-"+F:""),It={key:Re,ref:Ne=>{O.value[Re]=Ne},tabindex:xt===!0?0:-1,class:{"q-calendar-day__head--day":!0,...ia,...Le(u),"q-active-date":X,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":xt===!0},style:qt,onFocus:Ne=>{xt===!0&&(v.value=Re)},onKeydown:Ne=>{u.disabled!==!0&&Ue(Ne,[13,32])&&(Ne.stopPropagation(),Ne.preventDefault())},onKeyup:Ne=>{u.disabled!==!0&&Ue(Ne,[13,32])&&(A.value=u.date)},...Te("-head-day",Ne=>({scope:Y,event:Ne})),onDragenter:Ne=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(Ne,"head-day",Y)===!0?q.value=u.date:q.value="")},onDragover:Ne=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(Ne,"head-day",Y)===!0?q.value=u.date:q.value="")},onDragleave:Ne=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(Ne,"head-day",Y)===!0?q.value=u.date:q.value="")},onDrop:Ne=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(Ne,"head-day",Y)===!0?q.value=u.date:q.value="")}};return d("div",It,[B!==void 0&&B({scope:Y}),B===void 0&&h(u,F),B===void 0&&fe(u),B===void 0&&N&&N({scope:Y}),B===void 0&&b(u,F),ut()])}function fe(u){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&Ae(u),e.noDefaultHeaderBtn!==!0&&y(u)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ae(u),e.noDefaultHeaderBtn!==!0&&y(u)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ae(u),e.noDefaultHeaderBtn!==!0&&y(u)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Ae(u),e.noDefaultHeaderBtn!==!0&&y(u)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Ae(u)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Ae(u)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&y(u),e.noDefaultHeaderText!==!0&&Ae(u)])}function ce(u,F){const B=t["head-day-event"],N=e.noActiveDate!==!0&&ze(u),X=Z(u,F);X.activeDate=N,X.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const Y=x.value===!0?oe(V.value):ft.value,He={width:Y,maxWidth:Y,minWidth:Y};return x.value===!0&&(He.minWidth=Y),d("div",{key:"event-"+u.date+(F!==void 0?"-"+F:""),class:{"q-calendar-day__head--day__event":!0,...Le(u),"q-active-date":N},style:He},[B&&B({scope:X})])}function Ae(u){const F=t["head-weekday-label"],B=e.shortWeekdayLabel===!0,N=Z(u);N.shortWeekdayLabel=e.shortWeekdayLabel,N.disabled=e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1;const X={class:{"q-calendar-day__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return d("div",X,F&&F({scope:N})||r(u,B))}function r(u,F){const B=at.value(u,F||e.weekdayBreakpoints[0]>0&&V.value<=e.weekdayBreakpoints[0]);return d("span",{class:"q-calendar-day__head--weekday-label q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&V.value<=e.weekdayBreakpoints[1]?fa(B,e.minWeekdayLabel):B)}function y(u){const F={class:{"q-calendar-day__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return d("div",F,l(u))}function l(u){const F=e.noActiveDate!==!0&&ze(u),B=st.value(u,!1),N=t["head-day-label"],X=t["head-day-button"],Y={dayLabel:B,timestamp:u,activeDate:F,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(u.weekday):!1},He={class:{"q-calendar-day__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":u.current===!0,"q-calendar__focusable":!0},disabled:u.disabled,onKeydown:ve=>{u.disabled!==!0&&Ue(ve,[13,32])&&(ve.stopPropagation(),ve.preventDefault())},onKeyup:ve=>{u.disabled!==!0&&Ue(ve,[13,32])&&(A.value=u.date,se.value.onClickDate!==void 0&&a("click-date",{scope:Y}))},...Te("-date",(ve,qt)=>((qt==="click-date"||qt==="contextmenu-date")&&(A.value=u.date,qt==="click-date"&&ve.preventDefault()),{scope:Y,event:ve}))};return e.noAria!==!0&&(He.ariaLabel=je.value(u)),X?X({scope:Y}):va(e,He,N?N({scope:Y}):B)}function h(u,F){const B=t["column-header-before"];if(B)return d("div",{class:"q-calendar-day__column-header--before"},[B({scope:{timestamp:u,columnIndex:F}})])}function b(u,F){const B=t["column-header-after"];if(B)return d("div",{class:"q-calendar-day__column-header--after"},[B({scope:{timestamp:u,columnIndex:F}})])}function s(){return d("div",{class:"q-calendar-day__body"},[E()])}function E(){return x.value===!0?d("div",{ref:i,class:{"q-calendar-day__scroll-area":!0,"q-calendar__scroll":!0}},[x.value!==!0&&W(),n()]):e.noScroll===!0?$():d("div",{ref:i,class:{"q-calendar-day__scroll-area":!0,"q-calendar__scroll":!0}},[$()])}function $(){return d("div",{ref:f,class:"q-calendar-day__pane"},[W(),n()])}function n(){const u=t["day-container"];return d("div",{class:"q-calendar-day__day-container"},[x.value===!0&&e.noHeader!==!0&&vt(),d("div",{style:{display:"flex",flexDirection:"row"}},[x.value===!0&&W(),..._()]),u&&u({scope:{days:ne.value}})])}function _(){return ne.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((u,F)=>F+parseInt(e.columnIndexStart,10)).map(u=>T(ne.value[0],0,u)):ne.value.map((u,F)=>T(u,F))}function T(u,F,B){const N=t["day-body"],X=Z(u,B),Y=x.value===!0?e.cellWidth:ft.value,He={width:Y,maxWidth:Y,minWidth:Y};return x.value===!0&&(He.minWidth=Y),d("div",{key:u.date+(B!==void 0?":"+B:""),class:{"q-calendar-day__day":!0,...Le(u)},style:He},[...H(F,B),N&&N({scope:X})])}function H(u,F){return te.value[u].map(B=>I(B,F))}function I(u,F){const B=oe(e.intervalHeight),N=e.intervalStyle||ie,X=t["day-interval"],Y=Z(u,F);Y.droppable=C.value===ht(u);const He=typeof e.intervalClass=="function"?e.intervalClass({scope:Y}):{},ve=e.focusable===!0&&e.focusType.includes("interval"),ia={key:Ct(u),tabindex:ve===!0?0:-1,class:{"q-calendar-day__day-interval":u.minute===0,"q-calendar-day__day-interval--section":u.minute!==0,...He,...p(u,e.selectedDates,e.selectedStartEndDates),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":ve===!0},style:{height:B,...N({scope:Y})},onDragenter:Re=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(Re,"interval",Y)===!0?C.value=ht(u):C.value="")},onDragover:Re=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(Re,"interval",Y)===!0?C.value=ht(u):C.value="")},onDragleave:Re=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(Re,"interval",Y)===!0?C.value=ht(u):C.value="")},onDrop:Re=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(Re,"interval",Y)===!0?C.value=ht(u):C.value="")},onKeydown:Re=>{Ue(Re,[13,32])&&(Re.stopPropagation(),Re.preventDefault())},onKeyup:Re=>{if(Ue(Re,[13,32])){const It=Z(u,F);A.value=It.timestamp.date,se.value.onClickTime!==void 0&&a("click-time",{scope:It,event:Re})}},...Te("-time",Re=>({scope:Z(j(Re,u,e.timeClicksClamped,z.now),F),event:Re}))};e.noAria!==!0&&(ia.ariaLabel=U.value(u));const xt=X?X({scope:Y}):void 0;return d("div",ia,[xt,ut()])}function W(){const u={ariaHidden:"true",class:{"q-calendar-day__intervals-column":!0,"q-calendar__ellipsis":!0,"q-calendar__sticky":x.value===!0},...Te("-interval",F=>({scope:{timestamp:ye(F,Me.value,e.timeClicksClamped,z.now)},event:F}))};return d("div",u,we())}function we(){return te.value[0].map(u=>de(u))}function de(u){const F=t["interval-label"],B=oe(e.intervalHeight),N=e.shortIntervalLabel,He=(e.showIntervalLabel||re)(u)?g.value(u,N):void 0;return d("div",{key:u.time,class:{"q-calendar-day__interval":u.minute===0,"q-calendar-day__interval--section":u.minute!==0},style:{height:B}},[d("div",{class:"q-calendar-day__interval--text q-calendar__overflow-wrap"},[F?F({scope:{timestamp:u,label:He}}):He])])}function tt(){const{start:u,end:F,maxDays:B}=Pe.value;(P.value!==u.date||G.value!==F.date||K.value!==B)&&(P.value=u.date,G.value=F.date,K.value=B);const N=Q.width>0,X=Wt(d("div",{key:P.value,class:"q-calendar-day"},[N===!0&&x.value!==!0&&e.noHeader!==!0&&vt(),N&&s()]),[[Dt,ot]]);if(e.animated===!0){const Y="q-calendar--"+(S.value==="prev"?e.transitionPrev:e.transitionNext);return d(Qt,{name:Y,appear:!0},()=>X)}return X}return o({prev:bt,next:yt,move:Ve,moveToToday:gt,updateCurrent:Ge,timeStartPos:nt,timeDurationHeight:Ce,heightToMinutes:xe,scrollToTime:Qe}),()=>he()}});const ja={dayHeight:{type:[Number,String],default:0,validator:Xe},dayMinHeight:{type:[Number,String],default:0,validator:Xe},dayStyle:{type:Function,default:null},dayClass:{type:Function,default:null},weekdayStyle:{type:Function,default:null},weekdayClass:{type:Function,default:null},dayPadding:String,minWeeks:{type:[Number,String],validator:Xe,default:1},shortMonthLabel:Boolean,showWorkWeeks:Boolean,showMonthLabel:{type:Boolean,default:!0},showDayOfYearLabel:Boolean,enableOutsideDays:Boolean,noOutsideDays:Boolean,hover:Boolean,miniMode:{type:[Boolean,String],validator:e=>[!0,!1,"auto"].includes(e)},breakpoint:{type:[Number,String],default:"md",validator:e=>["xs","sm","md","lg","xl"].includes(e)||Xe(e)},monthLabelSize:{type:String,default:"sm",validator:e=>["xxs","xs","sm","md","lg","xl","xxl"].includes(e)||!!e&&e.length>0}};function Ln(e,t,{weekdaySkips:a,times:o,parsedStart:i,parsedEnd:f,size:m,headerColumnRef:v}){const R=M(()=>parseInt(e.minWeeks,10)),O=M(()=>R.value*e.weekdays.length),L=M(()=>w(Oe(i.value))),k=M(()=>Ye(Se(f.value))),S=M(()=>{let x=0;return e.cellWidth?x=e.cellWidth:m.width>0&&v.value&&(x=v.value.offsetWidth/e.weekdays.length),x}),P=M(()=>ka(L.value,k.value,o.today,a.value,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,Number.MAX_SAFE_INTEGER,O.value)),G=M(()=>{const x=o.today,z=w(x),ge=Ye(x);return ka(z,ge,x,a,e.disabledBefore,e.disabledAfter,e.disabledWeekdays,e.disabledDays,e.weekdays.length,e.weekdays.length)}),K=M(()=>{const x={timeZone:"UTC",month:"long"},z={timeZone:"UTC",month:"short"};return Sa(e.locale,(ge,Ge)=>Ge?z:x)}),A=M(()=>{switch(e.breakpoint){case"xs":return 300;case"sm":return 350;case"md":return 400;case"lg":return 450;case"xl":return 500;default:return parseInt(e.breakpoint,10)}}),Q=M(()=>{switch(e.monthLabelSize){case"xxs":return".4em";case"xs":return".6em";case"sm":return".8em";case"md":return"1.0em";case"lg":return"1.2em";case"xl":return"1.4em";case"xxl":return"1.6em";default:return e.monthLabelSize}});let q=!0;const C=M(()=>{const x=e.miniMode===!0||e.miniMode==="auto"&&e.breakpoint!==void 0&&m.width<A.value;return q===!0&&(q=!1,t("mini-mode",x)),x});le(C,x=>{t("mini-mode",x)});function w(x){return Ga(x,e.weekdays,o.today)}function Ye(x){return Qa(x,e.weekdays,o.today)}function Oe(x){return _n(x)}function Se(x){return bn(x)}function se(x){const z=be(x);return z<be(i.value)||z>be(f.value)}return{parsedCellWidth:S,parsedMinWeeks:R,parsedMinDays:O,parsedMonthStart:L,parsedMonthEnd:k,parsedBreakpoint:A,parsedMonthLabelSize:Q,days:P,todayWeek:G,isMiniMode:C,monthFormatter:K,isOutside:se}}var Bn=Ht({name:"QCalendarMonth",directives:[Dt],props:{...Mt,...ja,...Lt,...ua,...Bt},emits:["update:model-value",...zt,...Xt,"mini-mode",...ke("-date"),...ke("-day"),...ke("-head-workweek"),...ke("-head-day"),...ke("-workweek")],setup(e,{slots:t,emit:a,expose:o}){const i=c(null),f=c(null),m=c(null),v=c(null),R=c(null),O=c({}),L=c([]),k=c([]),S=c("next"),P=c(e.modelValue||lt()),G=c("0000-00-00"),K=c(0),A=c(e.modelValue),Q=$t({width:0,height:0}),q=c(!1),C=c(!1),w=c(null),Ye=c(null),Oe=M(()=>"month"),Se=Ft();if(Se===null)throw new Error("current instance is null");const{emitListeners:se}=Yt(Se),{isSticky:x}=ga(e);le(x,l=>{});const{times:z,setCurrent:ge,updateCurrent:Ge}=jt(e);Ge(),ge();const{weekdaySkips:Ie,parsedStart:Me,parsedEnd:et,dayFormatter:st,weekdayFormatter:at,ariaDateFormatter:je,dayStyleDefault:Je,getRelativeClasses:Le}=Zt(e,{startDate:P,endDate:G,times:z}),qe=M(()=>rt(e.modelValue,z.now)||Me.value||z.today);R.value=qe.value,v.value=qe.value.date;const Pe=M(()=>{const l={};return e.dayPadding!==void 0&&(l.padding=e.dayPadding),l.minWidth=nt.value,l.maxWidth=nt.value,l.width=nt.value,l}),{renderValues:Be}=Jt(e,{parsedView:Oe,times:z,parsedValue:qe}),{rootRef:_e,__initCalendar:it,__renderCalendar:he}=pt(e,y,{scrollArea:i,pane:f}),{days:ne,todayWeek:te,isMiniMode:g,parsedCellWidth:U,parsedMonthLabelSize:V,isOutside:p,monthFormatter:re}=Ln(e,a,{weekdaySkips:Ie,times:z,parsedStart:Me,parsedEnd:et,size:Q,headerColumnRef:m}),{move:ie}=ta(e,{parsedView:Oe,parsedValue:qe,weekdaySkips:Ie,direction:S,maxDays:K,times:z,emittedValue:A,emit:a}),{getDefaultMouseEventHandlers:j}=na(a,se),{checkChange:ye}=aa(a,{days:ne,lastStart:w,lastEnd:Ye}),{isKeyCode:Z}=la(),{tryFocus:Qe}=ea(e,{rootRef:_e,focusRef:v,focusValue:R,datesRef:O,days:ne,parsedView:Oe,parsedValue:qe,emittedValue:A,weekdaySkips:Ie,direction:S,times:z}),xe=M(()=>_e.value&&e.showWorkWeeks===!0?parseInt(getComputedStyle(_e.value).getPropertyValue(g.value===!0?"--calendar-mini-work-week-width":"--calendar-work-week-width"),10):0),Ce=M(()=>e.weekdays.length),nt=M(()=>{if(_e.value){const l=Q.width||_e.value.getBoundingClientRect().width;if(l&&Ce.value)return(l-xe.value)/Ce.value+"px"}return 100/Ce.value+"%"}),Ve=M(()=>e.focusable===!0&&e.focusType.includes("day")&&g.value!==!0),Te=M(()=>e.focusable===!0&&e.focusType.includes("date")&&Ve.value!==!0);le([ne],ye,{deep:!0,immediate:!0}),le(()=>e.modelValue,(l,h)=>{if(A.value!==l){if(e.animated===!0){const b=be(me(l)),s=be(me(h));S.value=b>=s?"next":"prev"}A.value=l}v.value=l}),le(A,(l,h)=>{if(A.value!==e.modelValue){if(e.animated===!0){const b=be(me(l)),s=be(me(h));S.value=b>=s?"next":"prev"}a("update:model-value",l)}}),le(v,l=>{l&&(R.value=rt(l),A.value!==l&&(A.value=l))}),le(R,l=>{O.value[v.value]?O.value[v.value].focus():Qe()}),Gt(()=>{O.value={},L.value=[],k.value=[],Ut(()=>{gt()})}),At(()=>{it(),gt()});function _t(){A.value=lt()}function Ue(l=1){ie(l)}function mt(l=1){ie(-l)}function ct({width:l,height:h}){Q.width=l,Q.height=h}function dt(l){return l.date===A.value}function ft(l){for(let h=0;h<l.length;++h)if(l[h].current===!0)return{timestamp:l[h]};return{timestamp:!1}}function gt(){if(!(g.value===!0||e.dayHeight!==0||t.week===void 0)&&window)for(const h in L.value){const b=L.value[h];if(b===void 0)continue;const s=k.value[h];if(s===void 0)continue;const E=window.getComputedStyle(b),$=parseFloat(E.marginTop,10)+parseFloat(E.marginBottom,10);b.clientHeight+$>s.clientHeight&&(s.style.height=b.clientHeight+$+"px")}}function yt(){return d("div",{class:"q-calendar-month__body"},[...D()])}function bt(){return d("div",{role:"presentation",class:"q-calendar-month__head"},[e.showWorkWeeks===!0&&ze(),d("div",{class:"q-calendar-month__head--wrapper"},[ot()])])}function ot(){return d("div",{ref:m,class:{"q-calendar-month__head--weekdays":!0}},[...vt()])}function ze(){const l=t["head-workweek"],h={start:Me.value,end:et.value,miniMode:g.value};return d("div",{class:"q-calendar-month__head--workweek",...j("-head-workweek",b=>({scope:h,event:b}))},l?l({scope:h}):"#")}function vt(){return te.value.map((l,h)=>Fe(l,h))}function Fe(l,h){const b=t["head-day"],s=ne.value.filter(de=>de.weekday===l.weekday),E=s[0].weekday,n={activeDate:e.noActiveDate!==!0&&dt(l),weekday:E,timestamp:l,days:s,index:h,miniMode:g.value,droppable:q.value===l.weekday,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},_=typeof e.weekdayClass=="function"?e.weekdayClass({scope:n}):{},T=e.focusable===!0&&e.focusType.includes("weekday"),H=nt.value,I=e.weekdayStyle||Je,W={width:H,maxWidth:H,minWidth:H,...I({scope:n})},we={key:l.date+(h!==void 0?"-"+h:""),tabindex:T===!0?0:-1,class:{"q-calendar-month__head--weekday":!0,..._,"q-disabled-day disabled":n.disabled===!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0,"q-calendar__focusable":T===!0},style:W,onDragenter:de=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(de,"head-day",n)===!0?q.value=l.weekday:q.value="")},onDragover:de=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(de,"head-day",n)===!0?q.value=l.weekday:q.value="")},onDragleave:de=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(de,"head-day",n)===!0?q.value=l.weekday:q.value="")},onDrop:de=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(de,"head-day",n)===!0?q.value=l.weekday:q.value="")},onFocus:de=>{T===!0&&(v.value=l.date)},...j("-head-day",de=>({scope:n,event:de}))};return e.noAria!==!0&&(we.ariaLabel=at.value(l,!1)),d("div",we,[b===void 0&&pe(l,e.shortWeekdayLabel||g.value),b!==void 0&&b({scope:n}),wt(l,h),T===!0&&ut()])}function wt(l,h){const b=t["head-day-event"],s=e.noActiveDate!==!0&&dt(l),E=ne.value.filter(I=>I.weekday===l.weekday),n={weekday:E[0].weekday,timestamp:l,days:E,index:h,miniMode:g.value,activeDate:s,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},_=nt.value,T=e.weekdayStyle||Je,H={width:_,maxWidth:_,minWidth:_,...T({scope:n})};return d("div",{key:"event-"+l.date+(h!==void 0?"-"+h:""),class:{"q-calendar-month__head--event":!0},style:H},[b!==void 0&&b({scope:n})])}function pe(l,h){const b=at.value(l,h||e.weekdayBreakpoints[0]>0&&U.value<=e.weekdayBreakpoints[0]);return d("span",{class:"q-calendar__ellipsis"},g.value===!0&&e.shortWeekdayLabel===!0||e.weekdayBreakpoints[1]>0&&U.value<=e.weekdayBreakpoints[1]?fa(b,e.minWeekdayLabel):b)}function D(){const l=e.weekdays.length,h=[];for(let b=0;b<ne.value.length;b+=l)h.push(ee(ne.value.slice(b,b+l),b/l));return h}function ee(l,h){const b=t.week,s=e.weekdays,E={week:l,weekdays:s,miniMode:g.value},$={};$.height=e.dayHeight>0&&g.value!==!0?oe(parseInt(e.dayHeight,10)):"auto",e.dayMinHeight>0&&g.value!==!0&&($.minHeight=oe(parseInt(e.dayMinHeight,10)));const n=parseInt(e.dayHeight,10)===0&&parseInt(e.dayMinHeight,10)===0;return d("div",{key:l[0].date,ref:_=>{k.value[h]=_},class:{"q-calendar-month__week--wrapper":!0,"q-calendar-month__week--auto-height":n},style:$},[e.showWorkWeeks===!0?ae(l):void 0,d("div",{class:"q-calendar-month__week"},[d("div",{class:"q-calendar-month__week--days"},l.map((_,T)=>ue(_))),g.value!==!0&&b!==void 0?d("div",{ref:_=>{L.value[h]=_},class:"q-calendar-month__week--events"},b({scope:E})):void 0])])}function ae(l){const h=t.workweek,b=l.length>2?l[2]:l[0],{timestamp:s}=ft(l),E=Number(b.workweek).toLocaleString(e.locale),$={workweekLabel:E,week:l,miniMode:g.value};return d("div",{key:b.workweek,class:{"q-calendar-month__workweek":!0,...Le(s!==!1?s:b,!1)},...j("-workweek",n=>({scope:$,event:n}))},h?h({scope:$}):E)}function ue(l){const h=t.day,b=e.dayStyle||Je,s=p(l),E=e.noActiveDate!==!0&&qe.value.date===l.date,$=s===!1&&e.showMonthLabel===!0&&ne.value.find(W=>W.month===l.month).day===l.day,n={outside:s,timestamp:l,miniMode:g.value,activeDate:E,hasMonth:$,droppable:C.value===l.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},_=Object.assign({...Pe.value},b({scope:n})),T=typeof e.dayClass=="function"?e.dayClass({scope:n}):{},H={key:l.date,ref:W=>{Ve.value===!0&&(O.value[l.date]=W)},tabindex:Ve.value===!0?0:-1,class:{"q-calendar-month__day":!0,...T,...Le(l,s,e.selectedDates,e.selectedStartEndDates,e.hover),"q-active-date":E===!0,disabled:e.enableOutsideDays!==!0&&s===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":Ve.value===!0},style:_,onFocus:W=>{Ve.value===!0&&(v.value=l.date)},onKeydown:W=>{s!==!0&&l.disabled!==!0&&Z(W,[13,32])&&(W.stopPropagation(),W.preventDefault())},onKeyup:W=>{s!==!0&&l.disabled!==!0&&Z(W,[13,32])&&(W.stopPropagation(),W.preventDefault(),se.value.onClickDay!==void 0&&g.value!==!0&&a("click-day",{scope:n,event:W}))},...j("-day",W=>({scope:n,event:W}))};return s!==!0&&Object.assign(H,{onDragenter:W=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(W,"day",n)===!0?C.value=l.date:C.value="")},onDragover:W=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(W,"day",n)===!0?C.value=l.date:C.value="")},onDragleave:W=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(W,"day",n)===!0?C.value=l.date:C.value="")},onDrop:W=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(W,"day",n)===!0?C.value=l.date:C.value="")}}),e.noAria!==!0&&(H.ariaLabel=je.value(l)),d("div",H,[fe(l,s,$),d("div",{class:{"q-calendar-month__day--content":!0}},h?h({scope:n}):void 0),Ve.value===!0&&ut()])}function fe(l,h,b){let s,E;const $=[ce(l,h)];g.value!==!0&&b===!0&&Q.width>340&&(E=r(l,h)),g.value!==!0&&e.showDayOfYearLabel===!0&&E===void 0&&Q.width>300&&(s=Ae(l,h)),e.dateAlign==="left"?(s!==void 0&&$.push(s),E!==void 0&&$.push(E)):e.dateAlign==="right"?(s!==void 0&&$.unshift(s),E!==void 0&&$.unshift(E)):(s=void 0,E=void 0);const n={class:{"q-calendar-month__day--label__wrapper":!0,"q-calendar__ellipsis":!0,["q-calendar__"+e.dateAlign]:s===void 0&&E===void 0,"q-calendar__justify":s!==void 0||E!==void 0}};return d("div",n,$)}function ce(l,h){if(h===!0&&e.noOutsideDays===!0)return;const b=st.value(l,!1),s=t["head-day-label"],E=t["head-day-button"],$=e.selectedDates&&e.selectedDates.length>0&&e.selectedDates.includes(l.date),n=e.noActiveDate!==!0&&dt(l),_={dayLabel:b,timestamp:l,outside:h,activeDate:n,selectedDate:$,miniMode:g.value,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(l.weekday):!1},T={key:l.date,ref:H=>{Te.value===!0&&(O.value[l.date]=H)},tabindex:Te.value===!0?0:-1,class:{"q-calendar-month__day--label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":l.current===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":Te.value===!0},disabled:l.disabled===!0||e.enableOutsideDays!==!0&&h===!0,onFocus:H=>{Te.value===!0&&(v.value=l.date)},onKeydown:H=>{h!==!0&&l.disabled!==!0&&Z(H,[13,32])&&(H.stopPropagation(),H.preventDefault())},onKeyup:H=>{Te.value===!0&&h!==!0&&l.disabled!==!0&&Z(H,[13,32])&&(H.stopPropagation(),H.preventDefault(),A.value=l.date,se.value.onClickDate!==void 0&&a("click-date",{scope:_,event:H}))},...j("-date",(H,I)=>(H.stopPropagation(),(I==="click-date"||I==="contextmenu-date")&&(A.value=l.date),{scope:_,event:H}))};return e.noAria!==!0&&(T.ariaLabel=je.value(l)),[E?E({scope:_}):va(e,T,s?s({scope:_}):b),Te.value===!0&&ut()]}function Ae(l,h){if(h===!0&&e.noOutsideDays===!0)return;const b=t["day-of-year"];return d("span",{class:{"q-calendar-month__day--day-of-year":!0,"q-calendar__ellipsis":!0}},b?b({scope:{timestamp:l}}):l.doy)}function r(l,h){if(h===!0&&e.noOutsideDays===!0)return;const b=t["month-label"],s=re.value(l,e.shortMonthLabel||Q.width<500),E={monthLabel:s,timestamp:l,miniMode:g.value},$={};return g.value!==!0&&V.value!==void 0&&($.fontSize=V.value),d("span",{class:"q-calendar-month__day--month q-calendar__ellipsis",style:$},[b?b({scope:E}):g.value!==!0?s:void 0])}function y(){const{start:l,end:h}=Be.value;P.value=l.date,G.value=h.date;const b=Q.width>0,s=Wt(d("div",{class:{"q-calendar-mini":g.value===!0,"q-calendar-month":!0},key:P.value},[b===!0&&e.noHeader!==!0&&bt(),b===!0&&yt()]),[[Dt,ct]]);if(e.animated===!0){const E="q-calendar--"+(S.value==="prev"?e.transitionPrev:e.transitionNext);return d(Qt,{name:E,appear:!0},()=>s)}return s}return o({prev:mt,next:Ue,move:ie,moveToToday:_t,updateCurrent:Ge}),()=>he()}}),xn=Ht({name:"QCalendarResource",props:{...Mt,...Ya,...qa,...ma,...ra,...Lt,...Bt},emits:["update:model-value","update:model-resources","resource-expanded",...zt,...Xt,...ke("-date"),...ke("-interval"),...ke("-head-day"),...ke("-time"),...ke("-head-resources"),...ke("-resource")],setup(e,{slots:t,emit:a,expose:o}){const i=c(null),f=c(null),m=c(null),v=c(null),R=c(null),O=c(null),L=c({}),k=c({}),S=c("next"),P=c(lt()),G=c("0000-00-00"),K=c(0),A=c(e.modelValue),Q=$t({width:0,height:0}),q=c(!1),C=c(!1),w=c(!1),Ye=c(null),Oe=c(null);le(()=>e.view,()=>{K.value=0});const Se=M(()=>e.view==="month"?"month-interval":e.view),se=M(()=>parseInt(e.cellWidth,10)),x=Ft();if(x===null)throw new Error("current instance is null");const{emitListeners:z}=Yt(x),{times:ge,setCurrent:Ge,updateCurrent:Ie}=jt(e);Ie(),Ge();const{weekdaySkips:Me,parsedStart:et,parsedEnd:st,dayStyleDefault:at}=Zt(e,{startDate:P,endDate:G,times:ge}),je=M(()=>rt(e.modelValue,ge.now)||et.value||ge.today);O.value=je.value,R.value=je.value.date;const{renderValues:Je}=Jt(e,{parsedView:Se,times:ge,parsedValue:je}),{rootRef:Le,__initCalendar:qe,__renderCalendar:Pe}=pt(e,pe,{scrollArea:i,pane:f}),{days:Be,intervals:_e,intervalFormatter:it,styleDefault:he,scrollToTimeX:ne,timeDurationWidth:te,timeStartPosX:g,widthToMinutes:U}=ha(e,{weekdaySkips:Me,times:ge,scrollArea:i,parsedStart:et,parsedEnd:st,maxDays:K,size:Q,headerColumnRef:v}),{move:V}=ta(e,{parsedView:Se,parsedValue:je,weekdaySkips:Me,direction:S,maxDays:K,times:ge,emittedValue:A,emit:a}),{getDefaultMouseEventHandlers:p}=na(a,z),{checkChange:re}=aa(a,{days:Be,lastStart:Ye,lastEnd:Oe}),{isKeyCode:ie}=la(),{tryFocus:j}=ea(e,{rootRef:Le,focusRef:R,focusValue:O,datesRef:L,days:Be,parsedView:Se,parsedValue:je,emittedValue:A,weekdaySkips:Me,direction:S,times:ge}),ye=M(()=>{const D=parseInt(e.resourceHeight,10);return D===0?"auto":D}),Z=M(()=>parseInt(e.resourceMinHeight,10)),Qe=M(()=>parseInt(e.intervalHeaderHeight,10));le([Be],re,{deep:!0,immediate:!0}),le(()=>e.modelValue,(D,ee)=>{if(A.value!==D){if(e.animated===!0){const ae=be(me(D)),ue=be(me(ee));S.value=ae>=ue?"next":"prev"}A.value=D}R.value=D}),le(A,(D,ee)=>{if(A.value!==e.modelValue){if(e.animated===!0){const ae=be(me(D)),ue=be(me(ee));S.value=ae>=ue?"next":"prev"}a("update:model-value",D)}}),le(R,D=>{D&&(O.value=rt(D))}),le(O,D=>{L.value[R.value]?L.value[R.value].focus():j()}),Gt(()=>{L.value={},k.value={}}),At(()=>{qe()});function xe(){A.value=lt()}function Ce(D=1){V(D)}function nt(D=1){V(-D)}function Ve({width:D,height:ee}){Q.width=D,Q.height=ee}function Te(D){return D.date===A.value}function _t(){const D={height:oe(Qe.value)};return d("div",{ref:m,roll:"presentation",class:{"q-calendar-resource__head":!0,"q-calendar__sticky":e.noSticky!==!0},style:D},[Ue(),mt()])}function Ue(){const D=t["head-resources"],ee=oe(Qe.value),ae={timestamps:_e,date:e.modelValue,resources:e.modelResources};return d("div",{class:{"q-calendar-resource__head--resources":!0,"q-calendar__sticky":e.noSticky!==!0},style:{height:ee},...p("-head-resources",ue=>({scope:ae,event:ue}))},[D&&D({scope:ae})])}function mt(){return d("div",{ref:v,class:{"q-calendar-resource__head--intervals":!0}},[_e.value.map(D=>D.map((ee,ae)=>ct(ee,ae)))])}function ct(D,ee){const ae=t["interval-label"],ue=e.noActiveDate!==!0&&Te(D),fe=oe(se.value),ce=oe(Qe.value),Ae=e.shortIntervalLabel,r=it.value(D,Ae),y={timestamp:D,index:ee,label:r};y.droppable=q.value===r;const l=e.intervalStyle||at,h={width:fe,maxWidth:fe,minWidth:fe,height:ce,...l({scope:y})},b=typeof e.intervalClass=="function"?e.intervalClass({scope:y}):{},s=e.focusable===!0&&e.focusType.includes("interval");return d("div",{key:r,tabindex:s===!0?0:-1,class:{"q-calendar-resource__head--interval":!0,...b,"q-active-date":ue,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":s===!0},style:h,onDragenter:E=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(E,"interval",y)===!0?q.value=r:q.value="")},onDragover:E=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(E,"interval",y)===!0?q.value=r:q.value="")},onDragleave:E=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(E,"interval",y)===!0?q.value=r:q.value="")},onDrop:E=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(E,"interval",y)===!0?q.value=r:q.value="")},onFocus:E=>{s===!0&&(R.value=r)},...p("-interval",E=>({scope:y,event:E}))},[ae?ae({scope:y}):r,ut()])}function dt(){return d("div",{class:"q-calendar-resource__body"},[ft()])}function ft(){return d("div",{ref:i,class:{"q-calendar-resource__scroll-area":!0,"q-calendar__scroll":!0}},[yt()])}function gt(){return d("div",{},"No resources have been defined")}function yt(){return d("div",{class:"q-calendar-resource__day--container"},[_t(),e.modelResources===void 0&&gt(),e.modelResources!==void 0&&bt()])}function bt(){return d("div",{class:"q-calendar-resource__resources--body"},ot())}function ot(D=void 0,ee=0,ae=!0){return D===void 0&&(D=e.modelResources),D.map((ue,fe)=>ze(ue,fe,ee,ue.children!==void 0?ue.expanded:ae))}function ze(D,ee,ae=0,ue=!0){const fe={};fe.height=ye.value==="auto"?ye.value:oe(ye.value),Z.value>0&&(fe.minHeight=oe(Z.value));const ce=d("div",{key:D[e.resourceKey]+"-"+ee,class:{"q-calendar-resource__resource--row":!0},style:fe},[vt(D,ee,ae,ue),Fe(D,ee)]);return D.children!==void 0?[ce,d("div",{class:{"q-calendar__child":!0,"q-calendar__child--expanded":ue===!0,"q-calendar__child--collapsed":ue!==!0}},[ot(D.children,ae+1,ue===!1?ue:D.expanded)])]:[ce]}function vt(D,ee,ae=0,ue=!0){const fe=t["resource-label"],ce={};ce.height=D.height!==void 0?oe(parseInt(D.height,10)):ye.value?oe(ye.value):"auto",Z.value>0&&(ce.minHeight=oe(Z.value));const Ae=e.resourceStyle||he,r=D[e.resourceLabel],y=e.focusable===!0&&e.focusType.includes("resource")&&ue===!0,l={resource:D,timestamps:_e,resourceIndex:ee,indentLevel:ae,label:r},h=D[e.resourceKey];l.droppable=C.value===h;const b=typeof e.resourceClass=="function"?e.resourceClass({scope:l}):{};return d("div",{key:D[e.resourceKey]+"-"+ee,ref:s=>{k.value[D[e.resourceKey]]=s},tabindex:y===!0?0:-1,class:{"q-calendar-resource__resource":ae===0,"q-calendar-resource__resource--section":ae!==0,...b,"q-calendar__sticky":e.noSticky!==!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":y===!0},style:{...ce,...Ae({scope:l})},onDragenter:s=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(s,"resource",l)===!0?C.value=h:C.value="")},onDragover:s=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(s,"resource",l)===!0?C.value=h:C.value="")},onDragleave:s=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(s,"resource",l)===!0?C.value=h:C.value="")},onDrop:s=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(s,"resource",l)===!0?C.value=h:C.value="")},onKeydown:s=>{ie(s,[13,32])&&(s.stopPropagation(),s.preventDefault())},onKeyup:s=>{ie(s,[13,32])&&z.value.onClickResource!==void 0&&a("click-resource",{scope:l,event:s})},...p("-resource",s=>({scope:l,event:s}))},[[d("div",{class:{"q-calendar__parent":D.children!==void 0,"q-calendar__parent--expanded":D.children!==void 0&&D.expanded===!0,"q-calendar__parent--collapsed":D.children!==void 0&&D.expanded!==!0},onClick:s=>{s.stopPropagation(),D.expanded=!D.expanded,a("resource-expanded",{expanded:D.expanded,scope:l})}}),d("div",{class:{"q-calendar-resource__resource--text":!0,"q-calendar__ellipsis":!0},style:{paddingLeft:10*ae+2+"px"}},[fe?fe({scope:l}):r]),ut()]])}function Fe(D,ee){const ae=t["resource-intervals"],ue={resource:D,timestamps:_e,resourceIndex:ee,timeStartPosX:g,timeDurationWidth:te};return d("div",{class:"q-calendar-resource__resource--intervals"},[_e.value.map(fe=>fe.map(ce=>wt(D,ce,ee))),ae&&ae({scope:ue})])}function wt(D,ee,ae){const ue=t["resource-interval"],fe=e.noActiveDate!==!0&&Te(ee),ce={activeDate:fe,resource:D,timestamp:ee,resourceIndex:ae},Ae=D[e.resourceKey],r=ee.time+"-"+Ae;ce.droppable=w.value===r;const y=e.focusable===!0&&e.focusType.includes("time"),l=e.intervalStyle||at,h=oe(se.value),b={width:h,maxWidth:h,minWidth:h,...l({scope:ce})};return b.height=D.height!==void 0?oe(parseInt(D.height,10)):ye.value>0?oe(ye.value):"auto",Z.value>0&&(b.minHeight=oe(Z.value)),d("div",{key:r,ref:s=>{L.value[D[e.resourceKey]]=s},tabindex:y===!0?0:-1,class:{"q-calendar-resource__resource--interval":!0,"q-active-date":fe,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":y===!0},style:b,onDragenter:s=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(s,"time",ce)===!0?w.value=r:w.value="")},onDragover:s=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(s,"time",ce)===!0?w.value=r:w.value="")},onDragleave:s=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(s,"time",ce)===!0?w.value=r:w.value="")},onDrop:s=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(s,"time",ce)===!0?w.value=r:w.value="")},onFocus:s=>{y===!0&&(R.value=r)},...p("-time",s=>({scope:ce,event:s}))},[ue&&ue({scope:ce}),ut()])}function pe(){const{start:D,end:ee,maxDays:ae}=Je.value;(P.value!==D.date||G.value!==ee.date||K.value!==ae)&&(P.value=D.date,G.value=ee.date,K.value=ae);const ue=Q.width>0,fe=Wt(d("div",{class:"q-calendar-resource",key:P.value},[ue===!0&&dt()]),[[Dt,Ve]]);if(e.animated===!0){const ce="q-calendar--"+(S.value==="prev"?e.transitionPrev:e.transitionNext);return d(Qt,{name:ce,appear:!0},()=>fe)}return fe}return o({prev:nt,next:Ce,move:V,moveToToday:xe,updateCurrent:Ie,timeStartPosX:g,timeDurationWidth:te,widthToMinutes:U,scrollToTimeX:ne}),()=>Pe()}}),In=Ht({name:"QCalendarScheduler",directives:[Dt],props:{...Mt,...Xa,...ma,...ra,...Lt,...ua,...Bt},emits:["update:model-value","update:model-resources","resource-expanded",...zt,...Xt,...ke("-date"),...ke("-day-resource"),...ke("-head-resources"),...ke("-head-day"),...ke("-resource")],setup(e,{slots:t,emit:a,expose:o}){const i=c(null),f=c(null),m=c(null),v=c(null),R=c(null),O=c({}),L=c({}),k=c({}),S=c({}),P=c("next"),G=c(e.modelValue||lt()),K=c("0000-00-00"),A=c(0),Q=c(e.modelValue),q=$t({width:0,height:0}),C=c(!1),w=c(!1),Ye=c(null),Oe=c(null);le(()=>e.view,()=>{A.value=0});const Se=M(()=>e.view==="month"?"month-interval":e.view),se=Ft();if(se===null)throw new Error("current instance is null");const{emitListeners:x}=Yt(se),{isSticky:z}=ga(e),{times:ge,setCurrent:Ge,updateCurrent:Ie}=jt(e);Ie(),Ge();const{weekdaySkips:Me,parsedStart:et,parsedEnd:st,dayFormatter:at,weekdayFormatter:je,ariaDateFormatter:Je,dayStyleDefault:Le,getRelativeClasses:qe}=Zt(e,{startDate:G,endDate:K,times:ge}),Pe=M(()=>rt(e.modelValue,ge.now)||et.value||ge.today);R.value=Pe.value,v.value=Pe.value.date;const{renderValues:Be}=Jt(e,{parsedView:Se,parsedValue:Pe,times:ge}),{rootRef:_e,scrollWidth:it,__initCalendar:he,__renderCalendar:ne}=pt(e,$,{scrollArea:i,pane:f}),{days:te,parsedCellWidth:g,styleDefault:U}=ha(e,{weekdaySkips:Me,times:ge,scrollArea:i,parsedStart:et,parsedEnd:st,maxDays:A,size:q,headerColumnRef:m}),{move:V}=ta(e,{parsedView:Se,parsedValue:Pe,weekdaySkips:Me,direction:P,maxDays:A,times:ge,emittedValue:Q,emit:a}),{getDefaultMouseEventHandlers:p}=na(a,x),{checkChange:re}=aa(a,{days:te,lastStart:Ye,lastEnd:Oe}),{isKeyCode:ie}=la(),{tryFocus:j}=ea(e,{rootRef:_e,focusRef:v,focusValue:R,datesRef:O,days:te,parsedView:Se,parsedValue:Pe,emittedValue:Q,weekdaySkips:Me,direction:P,times:ge}),ye=M(()=>Se.value==="day"&&parseInt(e.columnCount,10)>1?parseInt(e.columnCount,10):Se.value==="day"&&e.maxDays&&e.maxDays>1?e.maxDays:te.value.length),Z=M(()=>_e.value?parseInt(getComputedStyle(_e.value).getPropertyValue("--calendar-resources-width"),10):0),Qe=M(()=>{const n=parseInt(e.resourceHeight,10);return n===0?"auto":n}),xe=M(()=>parseInt(e.resourceMinHeight,10)),Ce=M(()=>{if(_e.value){const n=q.width||_e.value.getBoundingClientRect().width;if(n&&Z.value&&ye.value)return(n-it.value-Z.value)/ye.value+"px"}return 100/ye.value+"%"});le([te],re,{deep:!0,immediate:!0}),le(()=>e.modelValue,(n,_)=>{if(Q.value!==e.modelValue){if(e.animated===!0){const T=be(me(n)),H=be(me(_));P.value=T>=H?"next":"prev"}Q.value=n}v.value=n}),le(Q,(n,_)=>{if(Q.value!==e.modelValue){if(e.animated===!0){const T=be(me(n)),H=be(me(_));P.value=T>=H?"next":"prev"}a("update:model-value",n)}}),le(v,n=>{n&&(R.value=rt(n))}),le(R,n=>{O.value[v.value]?O.value[v.value].focus():j()}),le(()=>e.maxDays,n=>{A.value=n}),Gt(()=>{O.value={},k.value={},S.value={},L.value={}}),At(()=>{he()});function nt(){Q.value=lt()}function Ve(n=1){V(n)}function Te(n=1){V(-n)}function _t({width:n,height:_}){q.width=n,q.height=_}function Ue(n){return n.date===Q.value}function mt(){return d("div",{roll:"presentation",class:{"q-calendar-scheduler__head":!0,"q-calendar__sticky":z.value===!0},style:{marginRight:it.value+"px"}},[ct(),dt()])}function ct(){const n=t["head-resources"],_={days:te.value,timestamps:te.value,date:e.modelValue,resources:e.modelResources};return d("div",{class:{"q-calendar-scheduler__head--resources":!0,"q-calendar__sticky":z.value===!0},...p("-head-resources",T=>({scope:_,event:T}))},[n&&n({scope:_})])}function dt(){return d("div",{ref:m,class:{"q-calendar-scheduler__head--days__column":!0}},[ft(),gt()])}function ft(){return d("div",{class:{"q-calendar-scheduler__head--days__weekdays":!0}},[...yt()])}function gt(){const n=t["head-days-events"];return Ut(()=>{if(S.value&&parseInt(e.columnCount,10)===0&&window)try{const _=window.getComputedStyle(S.value);k.value.parentElement.style.height=_.height,k.value.style.height=_.height}catch{}}),d("div",{class:{"q-calendar-scheduler__head--days__event":!0}},[n&&d("div",{ref:k,style:{position:"absolute",left:0,top:0,right:0,overflow:"hidden",zIndex:1}},[n({scope:{timestamps:te.value,days:te.value,ref:S}})]),...bt()])}function yt(){return te.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((n,_)=>_+parseInt(e.columnIndexStart,10)).map(n=>ot(te.value[0],n)):te.value.map(n=>ot(n))}function bt(){return te.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((n,_)=>_+parseInt(e.columnIndexStart,10)).map(n=>vt(te.value[0],n)):te.value.map(n=>vt(n))}function ot(n,_){const T=t["head-day"],H=t["head-date"],I=e.noActiveDate!==!0&&Ue(n),W={timestamp:n,activeDate:I,droppable:C.value===n.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(n.weekday):!1};_!==void 0&&(W.columnIndex=_);const we=z.value===!0?oe(g.value):Ce.value,de=e.weekdayStyle||Le,tt={width:we,maxWidth:we,minWidth:we,...de({scope:W})};z.value===!0&&(tt.minWidth=we);const u=typeof e.weekdayClass=="function"?e.weekdayClass({scope:W}):{},F=e.focusable===!0&&e.focusType.includes("weekday"),B=n.date+(_!==void 0?"-"+_:""),N={key:B,ref:X=>{O.value[B]=X},tabindex:F===!0?0:-1,class:{"q-calendar-scheduler__head--day":!0,...u,...qe(n),"q-active-date":I,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":F===!0},style:tt,onFocus:X=>{F===!0&&(v.value=B)},onKeydown:X=>{n.disabled!==!0&&ie(X,[13,32])&&(X.stopPropagation(),X.preventDefault())},onKeyup:X=>{n.disabled!==!0&&ie(X,[13,32])&&(Q.value=n.date)},...p("-head-day",X=>({scope:W,event:X})),onDragenter:X=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(X,"head-day",W)===!0?C.value=n.date:C.value="")},onDragover:X=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(X,"head-day",W)===!0?C.value=n.date:C.value="")},onDragleave:X=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(X,"head-day",W)===!0?C.value=n.date:C.value="")},onDrop:X=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(X,"head-day",W)===!0?C.value=n.date:C.value="")}};return d("div",N,[T!==void 0&&T({scope:W}),T===void 0&&ee(n,_),T===void 0&&ze(n),T===void 0&&H&&H({scope:W}),T===void 0&&ae(n,_),ut()])}function ze(n){if(e.dateHeader==="stacked")return[e.noDefaultHeaderText!==!0&&Fe(n),e.noDefaultHeaderBtn!==!0&&pe(n)];if(e.dateHeader==="inline")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Fe(n),e.noDefaultHeaderBtn!==!0&&pe(n)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Fe(n),e.noDefaultHeaderBtn!==!0&&pe(n)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderText!==!0&&Fe(n),e.noDefaultHeaderBtn!==!0&&pe(n)]);if(e.dateHeader==="inverted")return e.weekdayAlign==="left"&&e.dateAlign==="right"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&pe(n),e.noDefaultHeaderText!==!0&&Fe(n)]):e.weekdayAlign==="right"&&e.dateAlign==="left"?d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&pe(n),e.noDefaultHeaderText!==!0&&Fe(n)]):d("div",{class:"q-calendar__header--inline"},[e.noDefaultHeaderBtn!==!0&&pe(n),e.noDefaultHeaderText!==!0&&Fe(n)])}function vt(n,_){const T=t["head-day-event"],H=e.noActiveDate!==!0&&Ue(n),I={timestamp:n,activeDate:H,droppable:C.value===n.date,disabled:e.disabledWeekdays?e.disabledWeekdays.includes(n.weekday):!1};_!==void 0&&(I.columnIndex=_);const W=z.value===!0?oe(g.value):Ce.value,we={width:W,maxWidth:W,minWidth:W};return z.value===!0&&(we.minWidth=W),d("div",{key:"event-"+n.date+(_!==void 0?"-"+_:""),class:{"q-calendar-scheduler__head--day__event":!0,...qe(n),"q-active-date":H},style:we},[T&&T({scope:I})])}function Fe(n){const _=t["head-weekday-label"],T=e.shortWeekdayLabel===!0,H={timestamp:n,shortWeekdayLabel:T},I={class:{"q-calendar-scheduler__head--weekday":!0,["q-calendar__"+e.weekdayAlign]:!0,"q-calendar__ellipsis":!0}};return d("div",I,_&&_({scope:H})||wt(n,T))}function wt(n,_){const T=je.value(n,_||e.weekdayBreakpoints[0]>0&&g.value<=e.weekdayBreakpoints[0]);return d("span",{class:"q-calendar-scheduler__head--weekday-label q-calendar__ellipsis"},e.weekdayBreakpoints[1]>0&&g.value<=e.weekdayBreakpoints[1]?fa(T,e.minWeekdayLabel):T)}function pe(n){const _={class:{"q-calendar-scheduler__head--date":!0,["q-calendar__"+e.dateAlign]:!0}};return d("div",_,D(n))}function D(n){const _=e.noActiveDate!==!0&&Ue(n),T=at.value(n,!1),H=t["head-day-label"],I=t["head-day-button"],W={dayLabel:T,timestamp:n,activeDate:_},we={class:{"q-calendar-scheduler__head--day__label":!0,"q-calendar__button":!0,"q-calendar__button--round":e.dateType==="round","q-calendar__button--rounded":e.dateType==="rounded","q-calendar__button--bordered":n.current===!0,"q-calendar__focusable":!0},disabled:n.disabled,onKeydown:de=>{n.disabled!==!0&&ie(de,[13,32])&&(de.stopPropagation(),de.preventDefault())},onKeyup:de=>{n.disabled!==!0&&ie(de,[13,32])&&(Q.value=n.date,x.value.onClickDate!==void 0&&a("click-date",{scope:W}))},...p("-date",(de,tt)=>((tt==="click-date"||tt==="contextmenu-date")&&(Q.value=n.date,tt==="click-date"&&de.preventDefault()),{scope:W,event:de}))};return e.noAria!==!0&&(we.ariaLabel=Je.value(n)),I?I({scope:W}):va(e,we,H?H({scope:W}):T)}function ee(n,_){const T=t["column-header-before"];if(T)return d("div",{class:"q-calendar-scheduler__column-header--before"},[T({scope:{timestamp:n,columnIndex:_}})])}function ae(n,_){const T=t["column-header-after"];if(T)return d("div",{class:"q-calendar-scheduler__column-header--after"},[T({scope:{timestamp:n,columnIndex:_}})])}function ue(){return d("div",{class:"q-calendar-scheduler__body"},[fe()])}function fe(){return z.value===!0?d("div",{ref:i,class:{"q-calendar-scheduler__scroll-area":!0,"q-calendar__scroll":!0}},[z.value!==!0&&h(),Ae()]):e.noScroll===!0?ce():d("div",{ref:i,class:{"q-calendar-scheduler__scroll-area":!0,"q-calendar__scroll":!0}},[ce()])}function ce(){return d("div",{ref:f,class:"q-calendar-scheduler__pane"},[Ae()])}function Ae(){return d("div",{class:"q-calendar-scheduler__day--container"},[z.value===!0&&e.noHeader!==!0&&mt(),r()])}function r(n=void 0,_=0,T=!0){return n===void 0&&(n=e.modelResources),n.map((H,I)=>y(H,I,_,H.children!==void 0?H.expanded:T))}function y(n,_,T=0,H=!0){const I={};I.height=n.height!==void 0?oe(parseInt(n.height,10)):Qe.value?oe(Qe.value):"auto",xe.value>0&&(I.minHeight=oe(xe.value));const W=d("div",{key:n[e.resourceKey]+"-"+_,class:{"q-calendar-scheduler__resource--row":!0},style:I},[l(n,_,T,H),h(n,_,T,H)]);return n.children!==void 0?[W,d("div",{class:{"q-calendar__child":!0,"q-calendar__child--expanded":H===!0,"q-calendar__child--collapsed":H!==!0}},[r(n.children,T+1,H===!1?H:n.expanded)])]:[W]}function l(n,_,T=0,H=!0){const I=t["resource-label"],W={};W.height=n.height!==void 0?oe(parseInt(n.height,10)):Qe.value?oe(Qe.value):"auto",parseInt(e.resourceMinHeight,10)>0&&(W.minHeight=oe(parseInt(e.resourceMinHeight,10)));const we=e.resourceStyle||U,de=n[e.resourceLabel],tt=e.focusable===!0&&e.focusType.includes("resource")&&H===!0,u={resource:n,timestamps:te.value,days:te.value,resourceIndex:_,indentLevel:T,label:de},F=n[e.resourceKey];u.droppable=w.value===F;const B=typeof e.resourceClass=="function"?e.resourceClass({scope:u}):{};return d("div",{key:n[e.resourceKey]+"-"+_,ref:N=>{L.value[n[e.resourceKey]]=N},tabindex:tt===!0?0:-1,class:{"q-calendar-scheduler__resource":T===0,"q-calendar-scheduler__resource--section":T!==0,...B,"q-calendar__sticky":z.value===!0,"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":tt===!0},style:{...W,...we({scope:u})},onDragenter:N=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(N,"resource",u)===!0?w.value=F:w.value="")},onDragover:N=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(N,"resource",u)===!0?w.value=F:w.value="")},onDragleave:N=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(N,"resource",u)===!0?w.value=F:w.value="")},onDrop:N=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(N,"resource",u)===!0?w.value=F:w.value="")},onKeydown:N=>{ie(N,[13,32])&&(N.stopPropagation(),N.preventDefault())},onKeyup:N=>{ie(N,[13,32])&&x.value.onClickResource!==void 0&&a("click-resource",{scope:u,event:N})},...p("-resource",N=>({scope:u,event:N}))},[[d("div",{class:{"q-calendar__parent":n.children!==void 0,"q-calendar__parent--expanded":n.children!==void 0&&n.expanded===!0,"q-calendar__parent--collapsed":n.children!==void 0&&n.expanded!==!0},onClick:N=>{N.stopPropagation(),n.expanded=!n.expanded,a("resource-expanded",{expanded:n.expanded,scope:u})}}),d("div",{class:{"q-calendar-scheduler__resource--text":!0,"q-calendar__ellipsis":!0},style:{paddingLeft:10*T+2+"px"}},[I?I({scope:u}):de]),ut()]])}function h(n,_,T=0,H=!0){const I=t["resource-days"],W=z.value===!0?oe(g.value):Ce.value,we={resource:n,resourceIndex:_,indentLevel:T,expanded:H,cellWidth:W,timestamps:te.value,days:te.value},de={};return de.height=parseInt(e.resourceHeight,10)>0?oe(parseInt(e.resourceHeight,10)):"auto",parseInt(e.resourceMinHeight,10)>0&&(de.minHeight=oe(parseInt(e.resourceMinHeight,10))),d("div",{class:"q-calendar-scheduler__resource--days",style:de},[...b(n,_,T,H),I&&I({scope:we})])}function b(n,_,T=0,H=!0){return te.value.length===1&&parseInt(e.columnCount,10)>0?Array.apply(null,new Array(parseInt(e.columnCount,10))).map((I,W)=>W+parseInt(e.columnIndexStart,10)).map(I=>s(te.value[0],I,n,_,T,H)):te.value.map(I=>s(I,void 0,n,_,T,H))}function s(n,_,T,H,I=0,W=!0){const we=t.day,de=e.dayStyle||Le,tt=e.noActiveDate!==!0&&Pe.value.date===n.date,u=n.date+":"+T[e.resourceKey]+(_!==void 0?":"+_:""),F=w.value===u,B={timestamp:n,columnIndex:_,resource:T,resourceIndex:H,indentLevel:I,activeDate:tt,droppable:F},N=z.value===!0?oe(g.value):Ce.value,X={width:N,maxWidth:N,...de({scope:B})};X.height=parseInt(e.resourceHeight,10)>0?oe(parseInt(e.resourceHeight,10)):"auto",parseInt(e.resourceMinHeight,10)>0&&(X.minHeight=oe(parseInt(e.resourceMinHeight,10)));const Y=typeof e.dayClass=="function"?e.dayClass({scope:B}):{},He=e.focusable===!0&&e.focusType.includes("day")&&W===!0;return d("div",{key:n.date+(_!==void 0?":"+_:""),tabindex:He===!0?0:-1,class:{"q-calendar-scheduler__day":I===0,"q-calendar-scheduler__day--section":I!==0,...Y,...qe(n),"q-calendar__hoverable":e.hoverable===!0,"q-calendar__focusable":He===!0},style:X,onDragenter:ve=>{e.dragEnterFunc!==void 0&&typeof e.dragEnterFunc=="function"&&(e.dragEnterFunc(ve,"day",B)===!0?w.value=u:w.value="")},onDragover:ve=>{e.dragOverFunc!==void 0&&typeof e.dragOverFunc=="function"&&(e.dragOverFunc(ve,"day",B)===!0?w.value=u:w.value="")},onDragleave:ve=>{e.dragLeaveFunc!==void 0&&typeof e.dragLeaveFunc=="function"&&(e.dragLeaveFunc(ve,"day",B)===!0?w.value=u:w.value="")},onDrop:ve=>{e.dropFunc!==void 0&&typeof e.dropFunc=="function"&&(e.dropFunc(ve,"day",B)===!0?w.value=u:w.value="")},onKeydown:ve=>{ie(ve,[13,32])&&(ve.stopPropagation(),ve.preventDefault())},onKeyup:ve=>{ie(ve,[13,32])&&(Q.value=B.timestamp.date,x.value.onClickResource!==void 0&&a("click-resource",{scope:B,event:ve}))},...p("-day-resource",ve=>({scope:B,event:ve}))},[we&&we({scope:B}),ut()])}function E(){return d("div",{},"No resources have been defined")}function $(){const{start:n,end:_,maxDays:T}=Be.value;(G.value!==n.date||K.value!==_.date||A.value!==T)&&(G.value=n.date,K.value=_.date,A.value=T);const H=q.width>0,I=e.modelResources&&e.modelResources.length>0,W=Wt(d("div",{key:G.value,class:"q-calendar-scheduler"},[H===!0&&I===!0&&z.value!==!0&&e.noHeader!==!0&&mt(),H===!0&&I===!0&&ue(),I===!1&&E()]),[[Dt,_t]]);if(e.animated===!0){const we="q-calendar--"+(P.value==="prev"?e.transitionPrev:e.transitionNext);return d(Qt,{name:we,appear:!0},()=>W)}return W}return o({prev:Te,next:Ve,move:V,moveToToday:nt,updateCurrent:Ie}),()=>ne()}});Ht({name:"QCalendar",props:{mode:{type:String,validator:e=>["day","month","agenda","resource","scheduler","task"].includes(e),default:"day"},...Mt,...ja,...Lt,...ua,...Bt,...qa,...Xa,...Ya,...ra,...wn},setup(e,{attrs:t,slots:a,expose:o}){const i=c(null),f=M(()=>{switch(e.mode){case"agenda":return Mn;case"resource":return xn;case"scheduler":return In;case"month":return Bn;case"day":return Ca;case"task":return Dn;case"day":default:return Ca}});function m(){i.value.moveToToday()}function v(C=-1){i.value.move(C)}function R(C=1){i.value.next(C)}function O(C=1){i.value.prev(C)}function L(){i.value.updateCurrent()}function k(C,w=!0){return i.value.timeStartPos(C,w)}function S(C,w=!0){return i.value.timeStartPosX(C,w)}function P(C){return i.value.timeDurationWidth(C)}function G(C){return i.value.timeDurationHeight(C)}function K(C){return i.value.heightToMinutes(C)}function A(C){return i.value.widthToMinutes(minutes)}function Q(C){return i.value.scrollToTime(C)}function q(C){return i.value.scrollToTimeX(C)}return o({prev:O,next:R,move:v,moveToToday:m,updateCurrent:L,timeStartPos:k,timeStartPosX:S,timeDurationWidth:P,timeDurationHeight:G,heightToMinutes:K,widthToMinutes:A,scrollToTime:Q,scrollToTimeX:q}),()=>d(f.value,{ref:i,...e,...t},a)}});const Pn=()=>!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function Kt(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const o=e.valueOf();if(Object(o)!==o){const i=new e.constructor(o);return t.set(e,i),i}}return t.set(e,a),e instanceof Set?e.forEach(o=>{a.add(Kt(o,t))}):e instanceof Map&&e.forEach((o,i)=>{a.set(i,Kt(o,t))}),Object.assign(a,...Object.keys(e).map(o=>({[o]:Kt(e[o],t)})))}var Vn=ca({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:o}=Ft(),{$q:i}=o,f=c(null),m=c(""),v=c("");let R=!1;const O=M(()=>un({initialValue:m.value,validate:e.validate,set:L,cancel:k,updatePosition:S},"value",()=>v.value,w=>{v.value=w}));function L(){e.validate(v.value)!==!1&&(P()===!0&&(a("save",v.value,m.value),a("update:modelValue",v.value)),G())}function k(){P()===!0&&a("cancel",v.value,m.value),G()}function S(){Ut(()=>{f.value.updatePosition()})}function P(){return dn(v.value,m.value)===!1}function G(){R=!0,f.value.hide()}function K(){R=!1,m.value=Kt(e.modelValue),v.value=Kt(e.modelValue),a("beforeShow")}function A(){a("show")}function Q(){R===!1&&P()===!0&&(e.autoSave===!0&&e.validate(v.value)===!0?(a("save",v.value,m.value),a("update:modelValue",v.value)):a("cancel",v.value,m.value)),a("beforeHide")}function q(){a("hide")}function C(){const w=t.default!==void 0?[].concat(t.default(O.value)):[];return e.title&&w.unshift(d("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&w.push(d("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[d(Ze,{flat:!0,color:e.color,label:e.labelCancel||i.lang.label.cancel,onClick:k}),d(Ze,{flat:!0,color:e.color,label:e.labelSet||i.lang.label.set,onClick:L})])),w}return Object.assign(o,{set:L,cancel:k,show(w){f.value!==null&&f.value.show(w)},hide(w){f.value!==null&&f.value.hide(w)},updatePosition:S}),()=>{if(e.disable!==!0)return d(Ka,{ref:f,class:"q-popup-edit",cover:e.cover,onBeforeShow:K,onShow:A,onBeforeHide:Q,onHide:q,onEscapeKey:k},C)}}});const Nn={name:"GoalyEnd",props:{disabledScore:Boolean,title:String,id:Number,startTime:String,details:String,score:String,happeningNow:Boolean},emits:["saveScore","endNow"],computed:{aScore:{get(){return this.score},set(e){console.log("aScore getting set",e,this.id),this.$emit("saveScore",e,this.id)}},overdueIconStyle(){return{color:this.daysOver===0?"inherit":"red","max-width":"25px","min-width":"25px"}},userIconStyle(){return{color:this.disabledScore===!0?"red":"blue",cursor:"pointer"}},labelBtnStyle(){return this.disabledScore===!1&&this.happeningNow===!0?"Edit":"EndNow"},endNowBtnStyle(){return{display:this.happeningNow===!0&&this.disabledScore===!0?"block":"none","margin-left":"32em"}}},watch:{title(e){console.log("titleValue:",e)}},methods:{onClicked(){console.log("huh a click doing nothing"),this.$emit("update:model-value",!this.disabledScore)},wannaEnd(){console.log("eeeuh wish to end for",this.id,this.disabledScore,this.happeningNow),this.$emit("endNow",this.id)}}},Kn={class:"title q-calendar__ellipsis"};function $n(e,t,a,o,i,f){return Ee(),Ke("div",Kn,[Ot(Tt(a.title)+" ",1),J(Da,null,{default:De(()=>[Ot(Tt(a.startTime+" - "+a.details+" :"+a.score),1)]),_:1}),J(Ze,{"no-caps":"",class:"button",label:f.labelBtnStyle,style:Rt(f.endNowBtnStyle),onClick:f.wannaEnd},null,8,["label","style","onClick"]),J(Vn,{modelValue:f.aScore,"onUpdate:modelValue":t[0]||(t[0]=m=>f.aScore=m),disable:a.disabledScore,"auto-save":""},{default:De(m=>[J(Pa,{modelValue:m.value,"onUpdate:modelValue":v=>m.value=v,dense:"",autofocus:"",onKeyup:on(m.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue","disable"])])}var Gn=Ea(Nn,[["render",$n],["__scopeId","data-v-32f2e1ee"]]);const Qn=d("div",{class:"q-space"});var Un=ca({name:"QSpace",setup(){return()=>Qn}});const zn={name:"adHocEvent",props:{mainGoals:Array},data(){return{aTitle:"",daP:null,own:"misc"}},emits:["saveEvent"],computed:{pGoals:{get(){return this.mainGoals}},evName:{get(){return this.aTitle},set(e){this.aTitle=e}}},methods:{onClicked(){this.$emit("saveEvent",this.aTitle,this.daP,this.own)}}},Xn=e=>(Va("data-v-4940f6c8"),e=e(),Na(),e),Yn={class:"q-calendar__ellipsis"},jn=Xn(()=>$e("div",{class:"text-h6"},"adHocEvent",-1)),Zn={class:"q-ml-md q-gutter-md"},Jn={key:0},pn={class:"radio-select"},el={style:{"text-align":"center"}};function tl(e,t,a,o,i,f){return Ee(),Ke("div",Yn,[jn,$e("div",Zn,[J(Pa,{modelValue:f.evName,"onUpdate:modelValue":t[0]||(t[0]=m=>f.evName=m),filled:"",label:"A Goal","lazy-rules":"","item-aligned":"",rules:[m=>m&&m.length>0||"Please type a goal"]},null,8,["modelValue","rules"])]),f.pGoals?(Ee(),Ke("div",Jn,[J($a,{class:"q-ml-md",modelValue:i.daP,"onUpdate:modelValue":t[1]||(t[1]=m=>i.daP=m),options:f.pGoals,"option-value":"id","option-label":"title",label:"Parent Goal"},null,8,["modelValue","options"])])):St("",!0),$e("div",pn,[J(Fa,{modelValue:i.own,"onUpdate:modelValue":t[2]||(t[2]=m=>i.own=m),val:"misc",label:"Misc"},null,8,["modelValue"]),J(Un),J(Fa,{modelValue:i.own,"onUpdate:modelValue":t[3]||(t[3]=m=>i.own=m),val:"self",label:"Self"},null,8,["modelValue"])]),$e("div",el,[J(Ze,{flat:"",label:"Add",color:"primary",onClick:f.onClicked},null,8,["onClick"])])])}var al=Ea(zn,[["render",tl],["__scopeId","data-v-4940f6c8"]]);function Ba(e){return e.button===0}const nl=Ht({name:"dayCalendar",components:{NavigationBar:kn,QCalendarDay:Ca,addGoalForm:cn,GoalyEnd:Gn,adHocEvent:al},data(){return c(null),c(null),c(null),c(null),c(null),c(null),c(),Cn(),{currentDate:c(lt()),scoreOptions:c([1,2,3,4,5]),chosenScore:c(null),events:[],calendar:c(null),store:Sn(),anchorTimestamp:c(null),otherTimestamp:c(null),mouseDown:c(!1),mobile:c(!0),timeStartPos:c(0),showGoalForm:c(!1),pickEventDialog:c(!1),addEventDialog:c(!1),adHocEventDialog:c(!0),conflictReso:c(!1),resoType:c(""),toAddE:c(null),disabledScoreEvts:c({}),hasStarted:c({}),disableSaveSchedule:c(!0),reloadSaved:c(!1),loadDefault:c(!0),doSchedule:c(!1)}},beforeMount(){this.mobile=Pn(),this.events=this.returnNewEvts(!0)},beforeUnmount(){clearInterval(this.intervalId)},mounted(){this.adjustCurrentTime(),this.intervalId=setInterval(()=>{this.adjustCurrentTime()},6e4)},computed:{chosenScoreLabel(){return this.chosenScore==null?"Score Schedule":`Score > ${this.chosenScore}`},showForm(){return this.showGoalForm},doDisableSaveSchedule(){return this.disableSaveSchedule},eventsMap(){const e={};return this.events.forEach(t=>{if(e[t.date]||(e[t.date]=[]),e[t.date].push(t),t.days){console.log(`eventsMap multiple days? event for ${t.date}`,t.days);let a=rt(t.date),o=t.days;do a=We(a,{day:1}),e[a.date]||(e[a.date]=[]),e[a.date].push(t);while(--o>0)}}),e},parentGoalsMap(){const e=new Map;let t=this.store.getMainGoals;return t?(t.forEach(a=>{e.set(a.id,a)}),e):(console.log("parentGoalsMap is empty or null",t),e)},canbeScheduled(){let e=this.deepCopy(this.storedEvents),t=e.filter(a=>!this.events.find(o=>o.id==a.id));return t.length==0?e:t},storedEvents(){return this.store.getSubGoals},storedMainG(){return this.store.getMainGoals},style(){return{top:this.timeStartPos+"px"}},startEndTimes(){const e=[];return this.anchorDayTimeIdentifier!==!1&&this.otherDayTimeIdentifier!==!1&&(this.anchorDayTimeIdentifier<=this.otherDayTimeIdentifier?e.push(Ct(this.anchorTimestamp),Ct(this.otherTimestamp)):e.push(Ct(this.otherTimestamp),Ct(this.anchorTimestamp))),e},anchorDayTimeIdentifier(){return this.anchorTimestamp!==null?ht(this.anchorTimestamp):!1},otherDayTimeIdentifier(){return this.otherTimestamp!==null?ht(this.otherTimestamp):!1}},methods:{returnNewEvts(e=!1){if(this.events===this.allEvents&&console.log("returnNewEvts SAME"),e){let t=this.deepCopy(this.storedEvents);return this.allEvents=[...t],t}return this.allEvents},addPropsEventsTo(e,t){let a=this.parentGoalsMap;return t?(t.forEach(o=>{o.date=e!=null?e:o.date;let i=a.get(o.parentGoal);i?(o.bgcolor=i.bgcolor,o.details="from:"+i.title):(console.log("no parent goal for:",o),o.bgcolor="grey",o.details="unknown")}),console.log("addPropsEventsTo",e),t):(this.doNotify("addPropsEventsTo BUT no goals to schedule..."),[])},getTimeNumber(e){return e!==null?ht(e):!1},adjustCurrentTime(){const e=Nt(new Date);if(this.currentDate!==e.date){this.timeStartPos=-10,this.currentTime="";return}if(this.currentDate=e.date,this.currentTime=e.time,this.timeStartPos=this.$refs.calendar.timeStartPos(this.currentTime,!1),this.startTimesSet&&this.startTimesSet.has(e.time)){let t=this.retrieveSameStart(e.time);console.log("sameStart..FOUND",t);for(let a of t)this.hasStarted[a]=!0}if(this.endTimesSet&&this.endTimesSet.has(e.time))this.enableEditScore(e.time),this.doNotify(`WOOO at end of a scheduled event ${e.time}`,"positive");else if(!this.hasUncompletedEvents()){if(!this.disableSaveSchedule)return;this.doNotify("WOOOHOO finished all events","positive"),this.disableSaveSchedule=!1}},hasUncompletedEvents(){for(let e in this.disabledScoreEvts)if(this.disabledScoreEvts[e])return!0;return!1},hasDate(e){return this.currentDate?e.find(t=>t.date===this.currentDate):!1},badgeClasses(e,t){const a=t==="header";return{[`text-white bg-${e.bgcolor.toLocaleLowerCase()}`]:!0,"full-width":!a&&(!e.side||e.side==="full"),"left-side":!a&&e.side==="left","right-side":!a&&e.side==="right","rounded-border":!0}},badgeStyles(e,t,a=void 0,o=void 0){const i={};return a&&o&&(i.top=a(e.time)+"px",i.height=o(e.duration)+"px"),i["align-items"]="flex-start",i},getAnEvent(e){for(let t=0;t<this.events.length;t++)if(this.events[t].id===e)return this.events[t];return null},addAnEvent(e){console.log("oooh addAnEvent..ORIG",e,this.currentDate),this.addPropsEventsTo(this.currentDate,[e]),this.events.push(e);let t=We(me(e.date),{minute:Et(e.time)}),a=We(t,{minute:e.duration});this.dailyScheduled.set(e.id,{start:t,end:a,on:e.date,originalAt:e.time,for:e.duration,score:e.score}),this.endTimesSet.add(a.time),this.startTimesSet.add(t.time)},updateCurrentSchedule(){const e=new Map;let t=new Set;const a=Nt(new Date);let o=new Set,i=new Set;return this.events.forEach(f=>{let m=We(me(f.date),{minute:Et(f.time)}),v=We(m,{minute:f.duration});e.set(f.id,{start:m,end:v,on:f.date,originalAt:f.time,for:f.duration,score:f.score}),t.add(v.time),i.has(m.time)?o.add({at:m.time,id:f.id}):i.add(m.time),this.canEnableEditScore(f.id,v,a),this.enableEndNowBtn(f.id,m,v)}),this.dailyScheduled=e,this.endTimesSet=t,this.startTimesSet=i,console.log("done updateCurrentSchedule",i,o),o},canEnableEditScore(e,t,a=null){const o=a||Nt(new Date);Wa(o,t)>0?this.disabledScoreEvts[e]=!0:(this.disabledScoreEvts[e]=!1,this.hasStarted[e]=!1)},enableEndNowBtn(e,t,a){const o=Nt(new Date);sa(o,t,a,!0)&&(this.hasStarted[e]=!0)},getEvents(e){const t=this.eventsMap[e]||[];if(t.length===1)t[0].side="full";else if(t.length===2){console.log("daEvents...LENGTH is 2?",t);const a=We(me(t[0].date),{minute:Et(t[0].time)}),o=We(a,{minute:t[0].duration}),i=We(me(t[1].date),{minute:Et(t[1].time)}),f=We(i,{minute:t[1].duration});sa(i,a,o,!0)||sa(f,a,o,!0)?(t[0].side="left",t[1].side="right"):(t[0].side="full",t[1].side="full")}return t},overlapOtherEvent(e,t,a){const o=[];let i=We(t,{minute:0}),f=We(i,{minute:a});console.log("overlapOtherEvent...targetTimes",i.time,f.time);let m=this.getTimeNumber(i),v=this.getTimeNumber(f);return m===!1||v===!1?(console.log("ERROR... overlapOtherEvent targetTimestamp error",t),o):(this.dailyScheduled.forEach((R,O,L)=>{if(O!=e){let k=this.getTimeNumber(R.start),S=this.getTimeNumber(R.end);if(k!==!1&&S!==!1){let P=m>=k&&m<S||v>=k&&v<=S,G=k>=m&&v>=S;(P||G)&&(console.log(`${O} overlapOtherEvent added`,P,G),o.push(O))}else console.log("ERROR... overlapOtherEvent eventTimestamp error",R)}}),o)},recurChangeTime(e,t,a,o=!1){let i=this.dailyScheduled.get(e);if(i){console.log(`dragDirection...target>>${a.time}`);let f=Et(a.time)-Et(t.time);console.log(`dragDirection...${o}: ${f>0?"DOWN":"UP"}`);let m=null;f>0||o?m=We(a,{minute:parseInt(t.duration)+10}):m=We(a,{minute:-(parseInt(t.duration)+10)});let v=this.overlapOtherEvent(e,m,i.for);if(v.length>0){console.log("WARNING...more overlaps",v,m.time);let P=0,G=v.length,K=this.getAnEvent(e);do console.log("CASCADE recurChangeTime:",v[P],m.time,K.title),this.recurChangeTime(v[P],K,m,o);while(++P<G)}let[R,O]=this.changeEvtSchedule(e,m,!0);console.log("overlappedEvtNew..",R,O,e,m);let L=f>0?We(a,{minute:0}):We(a,{minute:0}),[k,S]=this.changeEvtSchedule(t.id,L,!0);console.log("recurChangeTime complete",k,S,t.id,L)}else console.log("ERROR overlapped event not found!",e)},changeEvtSchedule(e,t,a=!1){let o=this.changeEventTime(e,t,a),i=this.updateScheduleMaps(e,t);return[o,i]},retrieveSameStart(e){let t=[];for(let[a,o]of this.dailyScheduled)o.start.time==e&&t.push(a);return t},retrieveSameEnd(e){let t=[];for(let[a,o]of this.dailyScheduled)o.end.time==e&&(console.log("retrieveSameEnd...FOUND",a,o),t.push(a));return t},enableEditScore(e){let t=this.retrieveSameEnd(e);for(let a of t)this.disabledScoreEvts[a]=!1},updateScheduleMaps(e,t){if(this.dailyScheduled.has(e)){let a=this.dailyScheduled.get(e),o=a.for,i=a.originalAt,f=a.start,m=a.end,v=We(t,{minute:o}),R=a.score;return this.dailyScheduled.set(e,{on:t.date,originalAt:i,for:o,start:t,end:v,score:R}),this.endTimesSet.delete(m.time)?this.endTimesSet.add(v.time):console.log("updateScheduleMaps-endTimesSet NOT FOUND?!?"),this.startTimesSet.delete(f.time)?this.startTimesSet.add(t.time):console.log("updateScheduleMaps-startTimesSet NOT FOUND?!?"),this.canEnableEditScore(e,v),this.enableEndNowBtn(e,t,v),!0}else return console.log("updateScheduleMaps--euh not found?ERROR?",e,t),!1},changeEventTime(e,t,a=!1){console.log("changeEventTime",e,t.time);for(let o=0;o<this.events.length;o++){let i=this.events[o];if(i.id===e)return i.canMove?(i.time=t.time,a||this.$q.dialog({title:"Alert",cancel:"No",message:`Make ${t.time} the default time for ${i.title} ?`}).onOk(()=>{this.store.saveSubProp(e,t.time,null)}).onCancel(()=>{console.log("Nope cool, coolios")})):this.$q.dialog({title:"Alert",cancel:!0,message:`Move evt: ${i.title} around to ${t.time}?`}).onOk(()=>{i.time=t.time}).onCancel(()=>{this.doNotify(`${i.title} Cancelled moving ...`)}),!0}return!1},doRemove(e){let t=this.events.length;for(var a=0;a<t;a++)if(this.events[a].id===e.id){this.events.splice(a,1),console.log("removed event spliced!",e.title),this.dailyScheduled.has(e.id)?this.dailyScheduled.delete(e.id):console.log("ERROR doRemove has no such item?@? ",e);return}},reset(){this.draggedItem=null,this.targetDrop=null,this.toAddE=null,this.chosenScore=null,this.possibleRange=null},doNotify(e,t=void 0,a="top"){this.$q.notify({color:t!==void 0?t:"negative",position:a,message:e,icon:t==null?"report_problem":"thumb_up"})},updateButtons(e=null,t=null,a=null){this.reloadSaved=e!=null?e:this.reloadSaved,this.loadDefault=t!=null?t:this.loadDefault,this.doSchedule=a!=null?a:this.doSchedule},fetchEventsForDate(e){let t=this.store.getEventsForDate(e);if(!t){console.log(`ERROR no evts found for ${e}...`,t);return}let a=this.deepCopy(this.storedEvents),o=[];a.forEach(i=>{let f=t[i.id];f&&(i.date=e,i.time=f.time,i.duration=f.duration,o.push(i))}),o=this.addPropsEventsTo(null,o),this.events=o,this.updateCurrentSchedule()},isViewingPast(){let e=lt();if(this.currentDate&&this.currentDate==e)return this.disableUpdates=!1,!1;let t=be(me(e));return be(me(this.currentDate))>=t?(this.disableUpdates=!1,!1):(this.disableUpdates=!0,!0)},onRefresh(e){setTimeout(()=>{this.loadSavedEvents(this.currentDate),console.log("Refreshing...",this.currentDate),e()},1e3)},doSaveSchedule(){console.log("doSaveSchedule for",this.currentDate);const e={};this.dailyScheduled.forEach((t,a,o)=>{e[a]={duration:t.for,time:t.start.time}}),this.store.saveDailySchedule(this.currentDate,e),this.disableSaveSchedule=!0,this.doNotify(`doSaveSchedule for ${this.currentDate}`,"positive","top")},onAddNewEvent(e,t,a){console.log("Adding Event eh...",e,t,a,this.possibleRange),this.possibleRange||(this.possibleRange=this.startEndTimes);let o=rt(this.possibleRange[0]),i=We(rt(this.possibleRange[1]),{minute:15}),f=Math.floor(Wa(o,i)/1e3/60),m=null;if(a=="self"){let v=this.store.addMainGoal(e,"","orange",2);v?(console.log("wooh parent created",v),m=this.store.addSubGoal(v,e,"1on5",o.time,f,!1)):console.log("ERROR? no pID",v)}else if(t)m=this.store.addSubGoal(t.id,e,"1on5",o.time,f,!1);else{let v=this.store.getGoalByTitle("Misc");if(v)console.log("Woo found Misc pgoal",v),m=this.store.addSubGoal(v.id,e,"1on5",o.time,f,!1);else{console.log("ERROR? no Misc pgoal",this.storedMainG);let R=this.store.addMainGoal("Misc","","purple",2);m=this.store.addSubGoal(R,e,"1on5",o.time,f,!1)}}m?(this.addAnEvent({id:m,time:o.time,score:"1on5",duration:f,canMove:!1}),this.doSaveSchedule()):console.log("BOO ERROR no subID:(",m),this.addEventDialog=!1,this.reset()},onChooseEvent(){this.addEventDialog=!1,this.pickEventDialog=!0},onPickEvent(){console.log("I be picking",this.toAddE,this.targetDrop,this.currentDate,this.isViewingPast()),this.pickEventDialog=!1,this.draggedItem=this.toAddE;let e=this.getAnEvent(this.toAddE.id);e||(console.log("onAddEvent...NEW",e,this.toAddE),e=this.toAddE,this.addAnEvent(this.toAddE));let t=this.overlapOtherEvent(e.id,this.targetDrop.timestamp,e.duration);console.log("AddEvent anyOverlap",t);let a=t.length;if(a>0){let o=0;do this.recurChangeTime(t[o],e,this.targetDrop.timestamp,!0);while(++o<a)}else if(this.dailyScheduled.has(e.id)){let[o,i]=this.changeEvtSchedule(e.id,this.targetDrop.timestamp,!1);console.log("AddEvent that was there complete",o,i,e.id)}else console.log("ERROR ERROR NEW event with current events as:",this.events);this.disableSaveSchedule=!1,this.updateButtons(null,!0,!0),this.reset()},onPickConflictReso(e,t){for(let a of t)a.id==e.id?console.log("Skipping choice!",a):(console.log("Removing conflict event!",a),this.doRemove(a))},onEndNow(e){const t=Nt(new Date);if(console.log("oooh doEndNow!!!",e,t.time),this.dailyScheduled.has(e)){let a=this.dailyScheduled.get(e),o=a.start,i=a.end;if(sa(t,o,i,!0)){let f=this.getTimeNumber(i)-this.getTimeNumber(o),m=this.getTimeNumber(t)-this.getTimeNumber(o);console.log("end data be:",i,o,a),console.log("Great, REDUCING duration to:",f,m);for(let v=0;v<this.events.length;v++){let R=this.events[v];R.id===e&&(R.duration=m)}this.dailyScheduled.set(e,{...a,for:m,end:t}),this.endTimesSet.delete(i.time),this.endTimesSet.add(t.time)}else console.log("umm aint in the middle of this event! Nothing to do...",t.time,o.time,i.time)}else{console.log("ERROR doEndNow not found!!!",e);return}this.disabledScoreEvts[e]=!1},onSaveScore(e,t){let a=this.dailyScheduled.get(t);if(a){a.score=e,this.store.saveSubProp(t,null,e);let i=(f=>this.events.find(m=>m.id==f))(t);i?i.score=e:console.log("onSaveScore ERROR not found",i,t)}else console.log(`ERROR onSaveScore could not find event ${t}?!?`)},onDragStart(e,t){if(console.log("onDragStart",e,t,this.currentDate),this.isViewingPast()){this.doNotify("Editing past is no no!"),e.preventDefault();return}this.draggedItem=t},onDragEnter(e,t,a){return t==="goal-item"?(console.log("onDragEnter..goal-item",e,a),e.preventDefault()):(this.targetDrop=a,e.preventDefault()),!0},onDragOver(e,t,a){return e.preventDefault(),!0},onDragLeave(e,t,a){return!1},onDragEnd(e){console.log("onDragEnd",this.endTimesSet,this.startTimesSet)},onDrop(e,t,a){console.log("onDrop",e,t,a);let o=this.getAnEvent(this.draggedItem.id);if(!o){console.log("onDrop ERROR",o,this.draggedItem);return}let i=null;if(t==="interval")console.log("onDrop...normal move with scope",a.timestamp),i=a.timestamp;else if(t==="goal-item"&&this.targetDrop)console.log("Dropping goal-item!!",e,t,this.targetDrop.timestamp),i=this.targetDrop.timestamp;else{console.log("Cannot drop here YO!!",e,t,a,this.targetDrop);return}if(!i){console.log("ERROR...no timestamp YO!!",e,t,a,this.targetDrop);return}let f=this.overlapOtherEvent(o.id,i,o.duration),m=f.length;if(m>0){console.log("WOAH WOAH onDrop...overlapp!",f);let v=0;do this.recurChangeTime(f[v],o,i);while(++v<m)}else{let[v,R]=this.changeEvtSchedule(o.id,i,!1);console.log("onDrop no overlap complete",v,R,o.id)}this.disableSaveSchedule=!1,this.reset(),this.updateButtons(null,!0,null)},onDblClickEvent(e,t){if(this.isViewingPast()){this.doNotify("Removing from the past is a no no!"),e.preventDefault();return}this.$q.dialog({title:"Alert",cancel:!0,message:`Sure to remove evt: ${t.title} from today?`}).onOk(()=>{this.doRemove(t),this.updateCurrentSchedule(),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}).onCancel(()=>{console.log("Cancelled remove")})},onClickDate(e){console.log("onClickDate",e)},onClickTime(e){if(console.log("onClickTime..event",e),this.isViewingPast()){this.doNotify("Adding to the past is a no no!");return}this.addEventDialog=!0,this.targetDrop=e.scope},onClickInterval(e){console.log("onClickInterval",e)},onClickHeadIntervals(e){console.log("onClickHeadIntervals",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)},onMouseEnter(e){console.log("onMouseAt",e)},onMouseLeave(e){console.log("onMouseLeave",JSON.stringify(e))},onMouseDownTime({scope:e,event:t}){if(console.log("onMouseDownTime",{scope:e,event:t}),Ba(t)){if(console.log("onMouseDownTime and its a leftClick event"),this.mobile===!0&&this.anchorTimestamp!==null&&this.otherTimestamp!==null&&Ct(this.anchorTimestamp)===Ct(this.otherTimestamp)){this.otherTimestamp=e.timestamp,this.mouseDown=!1;return}this.mouseDown=!0,this.anchorTimestamp=e.timestamp,this.otherTimestamp=e.timestamp}},onMouseUpTime({scope:e,event:t}){if(console.log("onMouseUpTime",{scope:e,event:t}),this.mobile!==!0&&Ba(t)&&(this.otherTimestamp=e.timestamp,this.mouseDown=!1),!this.mousedown){let a=this.startEndTimes;if(a[1]==a[0])return;this.possibleRange=a,console.log("onMouseUpTime range change",this.possibleRange)}},onMouseMoveTime({scope:e,event:t}){this.mobile!==!0&&this.mouseDown===!0&&(this.otherTimestamp=e.timestamp)},scrollToEvent(e){this.$refs.calendar.scrollToTime(e.time,350)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.doReset=!0,this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onChange(e){let t=this.store.hasEventsForDate(this.currentDate),a=lt();if(console.log("onChange",e,this.currentDate,a,t,this.isViewingPast()),e.start==this.currentDate&&this.currentDate==a){t?this.loadCurrentSaved(e.start):this.updateCurrentSchedule(),this.doReset=!1;return}else{console.log("onChange..different day",e.start,this.currentDate,a,t),this.askUser(t);return}},loadCurrentSaved(e){this.events=this.addPropsEventsTo(e,this.doReset?this.returnNewEvts(!0):this.events);let t=this.updateCurrentSchedule();t.size>0&&this.onReloadSaved(t),this.updateButtons(!1,!0,!1)},askUser(e){let t=e?"Some Defaults found load":"Skippin as nothin...",a=()=>{this.events=this.addPropsEventsTo(this.currentDate,this.returnNewEvts(!0));let o=this.updateCurrentSchedule();o.size>0&&(e?this.onReloadSaved(o):this.fixConflicts(o)),this.disableSaveSchedule=!0};this.$q.dialog({title:"Alert",cancel:!0,message:t}).onOk(()=>{e?a():console.log("nada...")}).onCancel(()=>{console.log("Cancelled Default loading!")})},fixConflicts(e){const t=i=>{let f=0,m=null;for(let v of i){let R=this.getAnEvent(v);if(R){let O=this.parentGoalsMap.get(R.parentGoal);O?O.priority>f&&(f=O.priority,m=R):console.log("findhigherPrio..ERROR no PARENT found?",R)}else console.log("findhigherPrio..ERROR not found?",v)}return console.log("findhigherPrio..Highest priority be",m,f),m};let a=function(i){const f=i.split(/on/);return f.length!=2?(console.log(`parseScore error?${i}`,f),-1):f[1]-f[0]};const o=i=>({label:i.title+" at "+i.score,value:i.id});for(let i of e){let f=null,m=this.retrieveSameStart(i.at);console.log("fixConflicts...results",m,i);let v=[],R="";for(let O of m){let L=this.getAnEvent(O);L?(v.push(L),R+=L.title+","):console.log("fixConflicts...ERROR not found?",O)}this.$q.dialog({title:"Alert",cancel:!1,persistent:!0,message:`${R} are conflicting.
 Choose how to solve this...`,options:{type:"radio",model:"opt1",items:[{label:"Resolve by Highest Priority",value:"opt1",color:"secondary"},{label:"Resolve by lowest Score",value:"opt2"},{label:"Pick event",value:"opt3"}]}}).onOk(O=>{if(O=="opt3"){this.$q.dialog({title:"Alert",cancel:!1,persistent:!0,message:"Choose the event to schedule",options:{type:"radio",model:"",items:v.map(o)}}).onOk(k=>{console.log("Chosen Manually",k);let S=this.getAnEvent(k);S?f=S:console.log("ERROR...Manually choice not find",k)}).onCancel(()=>{console.log("Cancelled loading...")}).onDismiss(()=>{console.log("oooh dismissed inner...",f),this.onPickConflictReso(f,v)});let L=this.updateCurrentSchedule();console.log("fixConflicts inner...after conflicts?",L),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}else if(O=="opt2"){console.log(">>>> OK, Option Score",O);let L=0,k=null;for(let S of v){let P=a(S.score);P>-1&&P>=L?(L=P,k=S):console.log("ERROR...parseScore?",P,S)}k&&(console.log("Option Score Chosen",k),f=k)}else f=t(m),console.log(">>>> OK, Higher prio",O,f);console.log("Pick be",f)}).onCancel(()=>{console.log("Cancelled loading...")}).onDismiss(()=>{if(console.log("Dismissing...",f),f){this.onPickConflictReso(f,v);let O=this.updateCurrentSchedule();console.log("fixConflicts outer...after conflicts?",O),this.updateButtons(null,!0,null),this.disableSaveSchedule=!1}})}return!0},onReloadSaved(e=null){console.log("doReloadSaved:",this.currentDate),this.$q.dialog({title:"Alert",cancel:!0,message:"Some saved schedule found, load it up?"}).onOk(()=>(this.fetchEventsForDate(this.currentDate),this.updateButtons(!1,!0,!1),this.reset(),!0)).onCancel(()=>(console.log("Cancelled loading..."),e&&(console.log("dont wanna reload eh..fix conflicts then",e),this.fixConflicts(e)),this.updateButtons(!0,!1,!0),!1))},onLoadDefault(){this.events=null,console.log("doLoadDefault:",this.currentDate),this.events=this.addPropsEventsTo(this.currentDate,this.returnNewEvts(!0)),this.updateCurrentSchedule();let e=this.store.hasEventsForDate(this.currentDate);this.updateButtons(e,!1,!0),this.disableSaveSchedule=!0,this.chosenScore=null},onReloadWithScore(){if(this.chosenScore==null){this.doNotify("Ayo select a score!");return}let e=this.store.fetchGoalsWithMinScore(this.chosenScore);console.log("bringScorey:",this.currentDate,this.chosenScore,e),e=this.addPropsEventsTo(this.currentDate,e),this.events=e,this.updateCurrentSchedule(),this.updateButtons(!1,!0,!0),this.disableSaveSchedule=!1},deepCopy(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(a=>this.deepCopy(a));const t={};for(let a in e)e.hasOwnProperty(a)&&(t[a]=this.deepCopy(e[a]));return t}}}),Ta=e=>(Va("data-v-31e5819f"),e=e(),Na(),e),ll={key:0,class:"q-gutter-md"},rl={key:1,class:"subcontent"},ul={class:"float-right"},il={key:0},dl={key:1},ol={key:2},sl={class:"row justify-center"},cl={style:{display:"flex","max-width":"800px",width:"100%",height:"400px"}},fl={style:{display:"flex","justify-content":"center","flex-wrap":"wrap",padding:"2px"}},vl={class:"title q-calendar__ellipsis"},hl=["onDblclick","onDragstart"],ml=Ta(()=>$e("div",{class:"text-h6"},"Ad hoc or Existing event",-1)),gl={class:"q-ml-md event-select"},yl=Ta(()=>$e("div",{class:"text-h3"},"Pick event",-1)),_l={class:"q-ml-md event-select"},bl={class:"row justify-center"},wl=Ta(()=>$e("br",null,null,-1)),Dl={class:"scroll overflow-auto",style:{height:"360px",width:"100%"}};function kl(e,t,a,o,i,f){const m=Pt("add-goal-form"),v=Pt("navigation-bar"),R=Pt("goaly-end"),O=Pt("q-calendar-day"),L=Pt("ad-hoc-event");return Ee(),Ke(kt,null,[e.showForm?(Ee(),Ke("div",ll,[J(Ze,{class:"q-pl-xl justify-center",color:"","text-color":"green",elevated:"",label:"HideForm",onClick:t[0]||(t[0]=k=>e.showGoalForm=!e.showGoalForm),"no-caps":""}),J(m)])):St("",!0),e.showForm?St("",!0):(Ee(),Ke("div",rl,[J(fn,{onRefresh:e.onRefresh},{default:De(()=>[J(v,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),$e("div",ul,[e.reloadSaved?(Ee(),Ke("div",il,[J(Ze,{class:"q-mt-xl",color:"","text-color":"green",elevated:"",label:"Load Saved",onClick:e.onReloadSaved,"no-caps":""},null,8,["onClick"])])):St("",!0),e.loadDefault?(Ee(),Ke("div",dl,[J(Ze,{class:"q-mt-xl",color:"","text-color":"blue",elevated:"",label:"Defaults",onClick:e.onLoadDefault,"no-caps":""},null,8,["onClick"])])):St("",!0),e.doSchedule?(Ee(),Ke("div",ol,[J(Fn,{split:"",color:"",class:"q-mt-xl","text-color":"teal",elevated:"",label:e.chosenScoreLabel,onClick:e.onReloadWithScore,"no-caps":""},{default:De(()=>[J(vn,null,{default:De(()=>[(Ee(!0),Ke(kt,null,da(e.scoreOptions,k=>Wt((Ee(),Vt(gn,{key:k.id,clickable:"",onClick:S=>e.chosenScore=k},{default:De(()=>[J(hn,null,{default:De(()=>[J(mn,null,{default:De(()=>[Ot(Tt(k),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Hn]])),128))]),_:1})]),_:1},8,["label","onClick"])])):St("",!0)])]),_:1},8,["onRefresh"]),$e("div",sl,[$e("div",cl,[J(O,{ref:"calendar",view:"day",modelValue:e.currentDate,"onUpdate:modelValue":t[5]||(t[5]=k=>e.currentDate=k),"drag-enter-func":e.onDragEnter,"drag-over-func":e.onDragOver,"drag-leave-func":e.onDragLeave,"drop-func":e.onDrop,animated:"",bordered:"",hoverable:"","no-active-date":"","transition-next":"slide-left","transition-prev":"slide-right","time-clicks-clamped":"","interval-minutes":15,"interval-count":96,"interval-height":28,"selected-start-end-dates":e.startEndTimes,onChange:e.onChange,onClickDate:e.onClickDate,onClickTime:e.onClickTime,onClickInterval:e.onClickInterval,onClickHeadIntervals:e.onClickHeadIntervals,onClickHeadDay:e.onClickHeadDay,onMousedownTime:e.onMouseDownTime,onMouseupTime:e.onMouseUpTime,onMousemoveTime:e.onMouseMoveTime},{"head-day-event":De(({scope:{timestamp:k}})=>[$e("div",fl,[(Ee(!0),Ke(kt,null,da(e.eventsMap[k.date],S=>(Ee(),Ke(kt,{key:S.id},[S.time?(Ee(),Vt(Aa,{key:1,class:ya(e.badgeClasses(S,"header")),style:Rt([e.badgeStyles(S,"header"),{margin:"1px",width:"10px","max-width":"10px",height:"10px","max-height":"10px",cursor:"pointer"}]),onClick:P=>e.scrollToEvent(S)},{default:De(()=>[J(Da,null,{default:De(()=>[Ot(Tt(S.time+" - "+S.title),1)]),_:2},1024)]),_:2},1032,["class","style","onClick"])):(Ee(),Vt(Aa,{key:0,class:ya(e.badgeClasses(S,"header")),style:Rt([e.badgeStyles(S,"header"),{width:"100%",cursor:"pointer",height:"12px","font-size":"10px",margin:"1px"}])},{default:De(()=>[$e("div",vl,[Ot(Tt(S.title)+" ",1),J(Da,null,{default:De(()=>[Ot(Tt(S.details),1)]),_:2},1024)])]),_:2},1032,["class","style"]))],64))),128))])]),"day-container":De(({scope:{days:k}})=>[e.hasDate(k)?(Ee(),Ke(kt,{key:0},[$e("div",{class:"day-view-current-time-indicator",style:Rt(e.style)},null,4),$e("div",{class:"day-view-current-time-line",style:Rt(e.style)},null,4)],64)):St("",!0)]),"day-body":De(({scope:{timestamp:k,timeStartPos:S,timeDurationHeight:P}})=>[(Ee(!0),Ke(kt,null,da(e.getEvents(k.date),G=>(Ee(),Ke(kt,{key:G.id},[G.time!==void 0?(Ee(),Ke("div",{key:0,class:ya(["my-event",e.badgeClasses(G,"body")]),style:Rt(e.badgeStyles(G,"body",S,P)),draggable:!0,onDblclick:_a(K=>e.onDblClickEvent(K,G),["prevent"]),onDragstart:_a(K=>e.onDragStart(K,G),["stop"]),onDragend:t[1]||(t[1]=_a((...K)=>e.onDragEnd&&e.onDragEnd(...K),["stop"])),onDrop:t[2]||(t[2]=K=>e.onDrop(K,"goal-item",e.scope)),onDragenter:t[3]||(t[3]=K=>e.onDragEnter(K,"goal-item",e.scope)),onDragover:t[4]||(t[4]=K=>e.onDragOver(K,"goal-item",e.scope))},[J(R,{disabledScore:e.disabledScoreEvts[G.id],title:G.title,id:G.id,startTime:G.time,score:G.score,details:G.details,happeningNow:e.hasStarted[G.id]?e.hasStarted[G.id]:!1,onEndNow:e.onEndNow,onSaveScore:e.onSaveScore},null,8,["disabledScore","title","id","startTime","score","details","happeningNow","onEndNow","onSaveScore"])],46,hl)):St("",!0)],64))),128))]),_:1},8,["modelValue","drag-enter-func","drag-over-func","drag-leave-func","drop-func","selected-start-end-dates","onChange","onClickDate","onClickTime","onClickInterval","onClickHeadIntervals","onClickHeadDay","onMousedownTime","onMouseupTime","onMousemoveTime"])]),J(Ha,{modelValue:e.addEventDialog,"onUpdate:modelValue":t[8]||(t[8]=k=>e.addEventDialog=k),"transition-show":"rotate","transition-hide":"rotate"},{default:De(()=>[e.adHocEventDialog?(Ee(),Vt(ba,{key:0},{default:De(()=>[J(Ra,null,{default:De(()=>[ml]),_:1}),J(Oa,{align:"center"},{default:De(()=>[J(Ze,{flat:"",label:"Add hoc",color:"primary",onClick:t[6]||(t[6]=k=>e.adHocEventDialog=!e.adHocEventDialog)}),J(Ze,{flat:"",label:"Existing",color:"primary",onClick:e.onChooseEvent},null,8,["onClick"])]),_:1})]),_:1})):(Ee(),Vt(ba,{key:1},{default:De(()=>[$e("div",gl,[J(L,{mainGoals:e.storedMainG,onSaveEvent:e.onAddNewEvent},null,8,["mainGoals","onSaveEvent"]),J(Ze,{flat:"",label:"Cancel",color:"primary",onClick:t[7]||(t[7]=k=>e.adHocEventDialog=!e.adHocEventDialog)})])]),_:1}))]),_:1},8,["modelValue"]),J(Ha,{modelValue:e.pickEventDialog,"onUpdate:modelValue":t[10]||(t[10]=k=>e.pickEventDialog=k),"transition-show":"rotate","transition-hide":"rotate"},{default:De(()=>[J(ba,null,{default:De(()=>[J(Ra,null,{default:De(()=>[yl]),_:1}),J(sn),$e("div",_l,[J($a,{modelValue:e.toAddE,"onUpdate:modelValue":t[9]||(t[9]=k=>e.toAddE=k),options:e.canbeScheduled,"option-value":"id","option-label":"title",label:"Sub Goal","item-aligned":""},null,8,["modelValue","options"])]),J(Oa,{align:"right"},{default:De(()=>[J(Ze,{flat:"",label:"Add",color:"primary",onClick:e.onPickEvent},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),$e("div",bl,[J(Ze,{class:"q-mt-xl",color:"Green","text-color":"blue",elevated:"",label:"SaveSchedule",disable:e.doDisableSaveSchedule,onClick:e.doSaveSchedule,"no-caps":""},null,8,["disable","onClick"]),J(Ze,{class:"q-mt-xl",color:"","text-color":"green",elevated:"",label:"ShowForm",onClick:t[11]||(t[11]=k=>e.showGoalForm=!e.showGoalForm),"no-caps":""})]),wl,$e("div",Dl,[(Ee(!0),Ke(kt,null,da(e.storedEvents,(k,S)=>(Ee(),Ke("div",{key:S,class:"col-12",style:{"font-size":"10px","line-height":"10px","max-height":"14px","min-height":"14px",padding:"2px 2px","white-space":"nowrap"}},Tt(k),1))),128))])]))],64)}var Fl=Ea(nl,[["render",kl],["__scopeId","data-v-31e5819f"]]);export{Fl as default};
