import{F as v,G as o,R as r,J as n,I as d,by as f,O as i,L as m,M as u,a3 as y,ba as h,b9 as p,a4 as x,H as V,Q as R,K as g,a2 as C,bA as q,ap as w,P as b,a5 as P}from"./index.f3695b84.js";import{Q as T}from"./QSelect.00f753a6.js";import{Q as k}from"./QKnob.995f626c.js";import{w as c}from"./utiFunc.12687b08.js";import"./touch.9135741d.js";import"./goalStorage.3d68be00.js";import"./QItem.6f48bee9.js";const Q={name:"adHocEvent",props:{mainGoals:Array,toBalance:Number,at:String,timeRange:Object},data(){return{aTitle:"",daP:null,own:"misc",duration:5,useBalance:!1,atTime:c(this.at),doManual:!1}},emits:["saveEvent","doCancel"],mounted(){this.useTimeRange?this.currentDura=this.timeRange.duration:this.manualDura=!0;let a=this.pGoals.find(e=>e.title=="Misc");a&&(console.log("adHocEvent::mounted::MISC exists",JSON.stringify(a)),this.daP=a)},computed:{pGoals:{get(){return this.mainGoals}},currentDura:{get(){return this.duration},set(a){this.duration=a}},manualDura:{get(){return this.doManual},set(a){this.doManual=a}},evName:{get(){return this.aTitle},set(a){this.aTitle=a}},labely:{get(){return this.own=="misc"?this.daP==null?"Defaut Misc. Parent":"Of Parent Goal":"By Own Self"}},useTimeRange:{get(){return!this.timeRange.isSame}}},methods:{aTimeyRange(){if(!this.timeRange)return{};let a=this.timeRange.start.split(" "),e=this.timeRange.end.split(" ");return this.timeRange.isSame,{start:c(a[1]),end:c(e[1])}},endRange(){return this.aTimeyRange().end},startRange(){return this.aTimeyRange().start},goalyColor(a){var e;return this.daP==null?"":a=="c"?"bg-"+this.daP.bgcolor+" "+((e=this.daP)==null?void 0:e.icon):this.daP.bgcolor},classy(){return this.daP==null?"q-gutter-md q-px-md":"q-px-md"},onClicked(){this.$emit("saveEvent",this.aTitle,this.daP,this.own,this.currentDura,this.useBalance,this.currentDura!=this.timeRange.duration),this.own="misc",this.daP=null,this.duration=5,this.useBalance=!1}}},B={class:"q-pa-sm"},D={key:0,class:"q-mx-md do-center"},S={key:1,class:"q-mx-md do-center"},N={class:"q-mx-md event-select"},M={class:"radio-select"},_={key:0},E={key:1,class:"q-ma-md"},G={class:"row"},U={class:"q-ma-md",style:{"text-align":"center"}};function A(a,e,H,I,s,l){return o(),r("div",B,[n(P,null,{default:d(()=>[n(f,null,{default:d(()=>[e[10]||(e[10]=i("div",{class:"text-h4 title"},"New Ad hoc Event",-1)),l.useTimeRange?(o(),r("div",D,[e[8]||(e[8]=m(" @ ")),i("em",null,u(l.startRange())+" >> "+u(l.endRange()),1)])):(o(),r("div",S,[e[9]||(e[9]=m(" @ ")),i("em",null,u(s.atTime),1)]))]),_:1}),n(y),i("div",N,[n(h,{modelValue:l.evName,"onUpdate:modelValue":e[0]||(e[0]=t=>l.evName=t),filled:"",label:"Title","lazy-rules":"","item-aligned":"",rules:[t=>t&&t.length>1||"Please type a goal"]},null,8,["modelValue","rules"]),i("div",M,[n(p,{class:"q-mx-xs",modelValue:s.own,"onUpdate:modelValue":e[1]||(e[1]=t=>s.own=t),val:"misc",label:"Misc"},null,8,["modelValue"]),n(p,{class:"q-mx-md",modelValue:s.own,"onUpdate:modelValue":e[2]||(e[2]=t=>s.own=t),val:"self",label:"By Self"},null,8,["modelValue"])]),l.pGoals?(o(),r("div",_,[n(T,{class:x(l.classy()),modelValue:s.daP,"onUpdate:modelValue":e[3]||(e[3]=t=>s.daP=t),options:l.pGoals,"option-value":"id","option-label":"title",disable:s.own!="misc",label:l.labely,popupContentClass:"q-px-sm","options-selected-class":l.goalyColor("c"),"label-color":l.goalyColor("l")},{before:d(()=>[s.daP?(o(),V(R,{key:0,name:s.daP.icon,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):g("",!0)]),_:1},8,["class","modelValue","options","disable","label","options-selected-class","label-color"])])):g("",!0),l.useTimeRange?(o(),r("div",E,[e[11]||(e[11]=m(" TimeRange: @ ")),i("em",null,u(l.startRange())+" >> "+u(l.endRange()),1),e[12]||(e[12]=i("br",null,null,-1)),n(C,{modelValue:l.manualDura,"onUpdate:modelValue":e[4]||(e[4]=t=>l.manualDura=t),label:"Set Duration?","left-label":""},null,8,["modelValue"])])):g("",!0),i("div",G,[e[13]||(e[13]=m(" Duration (min) ")),n(k,{min:5,max:120,thickness:.5,disable:!l.manualDura,step:5,modelValue:s.duration,"onUpdate:modelValue":e[5]||(e[5]=t=>s.duration=t),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md",style:{margin:"0 auto"}},null,8,["disable","modelValue"])])]),n(q,{class:"q-px-xl q-ma-sm"},{default:d(()=>[n(w,{dense:"",modelValue:s.useBalance,"onUpdate:modelValue":e[6]||(e[6]=t=>s.useBalance=t),label:"Use Balance",color:"brown"},null,8,["modelValue"])]),_:1}),i("div",U,[n(b,{flat:"",align:"center",label:"Cancel",color:"primary",onClick:e[7]||(e[7]=t=>a.$emit("doCancel"))}),n(b,{elevated:"",color:"primary",align:"between",onClick:l.onClicked},{default:d(()=>e[14]||(e[14]=[i("div",{class:"q-mx-xs",style:{"text-align":"center"}},"Add",-1)])),_:1},8,["onClick"])]),e[15]||(e[15]=i("br",null,null,-1))]),_:1})])}var W=v(Q,[["render",A],["__scopeId","data-v-0e665b22"]]);export{W as default};
