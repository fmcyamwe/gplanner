import{j as He,aR as Ge,aS as xt,aT as qt,aU as At,U as Et,aV as Wt,W as Ot,aW as Xt,c as w,aK as Yt,g as De,h as A,Q as Pe,aX as Zt,au as Gt,Z as le,ae as Jt,af as el,ag as tl,r as P,ah as ll,ai as ul,aj as nl,ak as ol,al,w as de,aY as il,aZ as ht,a_ as rl,aF as Re,a$ as sl,u as cl,b0 as dl,k as fl,T as vl,e as Je,aA as ml,b1 as hl,v as Mt,n as ce,b2 as gl,aM as Sl,ax as yl,ay as bl,b3 as Cl,b4 as wl,b5 as gt,av as Ae,o as pl,b6 as Vl,a9 as Me,b7 as kl,b8 as ue,Y as xl,am as ql,b9 as Al,D as El,aC as Ol,ad as Ee,aD as Ml,aa as Ie,aE as We,ab as Xe}from"./index.8c8e6158.js";import{Q as zl,a as Fl,b as _l}from"./QItem.fbefacd4.js";import{u as Bl,v as St,e as Tl,f as Il,g as Pl,h as yt,i as Rl,r as bt,s as Ll,d as Hl}from"./utiFunc.ac4b7097.js";let Le=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,Le=e.scrollLeft>=0,e.remove()}var Dl=He({name:"QField",inheritAttrs:!1,props:Ge,emits:xt,setup(){return qt(At())}});const Kl={xs:8,sm:10,md:14,lg:20,xl:24};var $l=He({name:"QChip",props:{...Et,...Wt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:o}){const{proxy:{$q:g}}=De(),l=Ot(e,g),u=Xt(e,Kl),m=w(()=>e.selected===!0||e.icon!==void 0),v=w(()=>e.selected===!0?e.iconSelected||g.iconSet.chip.selected:e.icon),f=w(()=>e.iconRemove||g.iconSet.chip.remove),h=w(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=w(()=>{const q=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(q?` text-${q} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(l.value===!0?" q-chip--dark q-dark":"")}),y=w(()=>{const q=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},D={...q,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||g.lang.label.remove};return{chip:q,remove:D}});function k(q){q.keyCode===13&&b(q)}function b(q){e.disable||(o("update:selected",!e.selected),o("click",q))}function z(q){(q.keyCode===void 0||q.keyCode===13)&&(le(q),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function F(){const q=[];h.value===!0&&q.push(A("div",{class:"q-focus-helper"})),m.value===!0&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--left",name:v.value}));const D=e.label!==void 0?[A("div",{class:"ellipsis"},[e.label])]:void 0;return q.push(A("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Zt(n.default,D))),e.iconRight&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&q.push(A(Pe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:f.value,...y.value.remove,onClick:z,onKeyup:z})),q}return()=>{if(e.modelValue===!1)return;const q={class:d.value,style:u.value};return h.value===!0&&Object.assign(q,y.value.chip,{onClick:b,onKeyup:k}),Yt("div",q,F(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Gt,e.ripple]])}}}),jl=He({name:"QMenu",inheritAttrs:!1,props:{...Bl,...Jt,...Et,...el,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:St},self:{type:String,validator:St},offset:{type:Array,validator:Tl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...tl,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:g}){let l=null,u,m,v;const f=De(),{proxy:h}=f,{$q:d}=h,y=P(null),k=P(!1),b=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),z=Ot(e,d),{registerTick:F,removeTick:q}=ll(),{registerTimeout:D}=ul(),{transitionProps:H,transitionStyle:U}=nl(e),{localScrollTarget:_,changeScrollEvent:B,unconfigureScrollTarget:W}=Il(e,V),{anchorEl:Q,canShow:ne}=Pl({showing:k}),{hide:oe}=ol({showing:k,canShow:ne,handleShow:c,handleHide:r,hideOnRouteChange:b,processOnMount:!0}),{showPortal:Y,hidePortal:j,renderPortal:ae}=al(f,y,R,"menu"),ee={anchorEl:Q,innerRef:y,onClickOutside(a){if(e.persistent!==!0&&k.value===!0)return oe(a),(a.type==="touchstart"||a.target.classList.contains("q-dialog__backdrop"))&&le(a),!0}},ie=w(()=>yt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),te=w(()=>e.cover===!0?ie.value:yt(e.self||"top start",d.lang.rtl)),Z=w(()=>(e.square===!0?" q-menu--square":"")+(z.value===!0?" q-menu--dark q-dark":"")),ge=w(()=>e.autoClose===!0?{onClick:O}:{}),re=w(()=>k.value===!0&&e.persistent!==!0);de(re,a=>{a===!0?(il(x),Rl(ee)):(ht(x),bt(ee))});function G(){ml(()=>{let a=y.value;a&&a.contains(document.activeElement)!==!0&&(a=a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function c(a){if(l=e.noRefocus===!1?document.activeElement:null,rl(I),Y(),V(),u=void 0,a!==void 0&&(e.touchPosition||e.contextMenu)){const L=Re(a);if(L.left!==void 0){const{top:se,left:fe}=Q.value.getBoundingClientRect();u={left:L.left-fe,top:L.top-se}}}m===void 0&&(m=de(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,C)),e.noFocus!==!0&&document.activeElement.blur(),F(()=>{C(),e.noFocus!==!0&&G()}),D(()=>{d.platform.is.ios===!0&&(v=e.autoClose,y.value.click()),C(),Y(!0),o("show",a)},e.transitionDuration)}function r(a){q(),j(),S(!0),l!==null&&(a===void 0||a.qClickOutside!==!0)&&(((a&&a.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),D(()=>{j(!0),o("hide",a)},e.transitionDuration)}function S(a){u=void 0,m!==void 0&&(m(),m=void 0),(a===!0||k.value===!0)&&(sl(I),W(),bt(ee),ht(x)),a!==!0&&(l=null)}function V(){(Q.value!==null||e.scrollTarget!==void 0)&&(_.value=cl(Q.value,e.scrollTarget),B(_.value,C))}function O(a){v!==!0?(dl(h,a),o("click",a)):v=!1}function I(a){re.value===!0&&e.noFocus!==!0&&hl(y.value,a.target)!==!0&&G()}function x(a){o("escapeKey"),oe(a)}function C(){const a=y.value;a===null||Q.value===null||Ll({el:a,offset:e.offset,anchorEl:Q.value,anchorOrigin:ie.value,selfOrigin:te.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function R(){return A(vl,H.value,()=>k.value===!0?A("div",{role:"menu",...g,ref:y,tabindex:-1,class:["q-menu q-position-engine scroll"+Z.value,g.class],style:[g.style,U.value],...ge.value},fl(n.default)):null)}return Je(S),Object.assign(h,{focus:G,updatePosition:C}),ae}});const X=1e3,Nl=["start","center","end","start-force","center-force","end-force"],zt=Array.prototype.filter,Ql=window.getComputedStyle(document.body).overflowAnchor===void 0?Mt:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];zt.call(o,l=>l.dataset&&l.dataset.qVsAnchor!==void 0).forEach(l=>{delete l.dataset.qVsAnchor});const g=o[n];g&&g.dataset&&(g.dataset.qVsAnchor="")}))};function ke(e,n){return e+n}function Ye(e,n,o,g,l,u,m,v){const f=e===window?document.scrollingElement||document.documentElement:e,h=l===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-m-v,scrollMaxSize:0,offsetStart:-m,offsetEnd:-v};if(l===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=f.scrollLeft,d.scrollViewSize+=f.clientWidth),d.scrollMaxSize=f.scrollWidth,u===!0&&(d.scrollStart=(Le===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=f.scrollTop,d.scrollViewSize+=f.clientHeight),d.scrollMaxSize=f.scrollHeight),o!==null)for(let y=o.previousElementSibling;y!==null;y=y.previousElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=y[h]);if(g!==null)for(let y=g.nextElementSibling;y!==null;y=y.nextElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=y[h]);if(n!==e){const y=f.getBoundingClientRect(),k=n.getBoundingClientRect();l===!0?(d.offsetStart+=k.left-y.left,d.offsetEnd-=k.width):(d.offsetStart+=k.top-y.top,d.offsetEnd-=k.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function Ct(e,n,o,g){n==="end"&&(n=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(g===!0&&(n=(Le===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):o===!0?(g===!0&&(n=(Le===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Oe(e,n,o,g){if(o>=g)return 0;const l=n.length,u=Math.floor(o/X),m=Math.floor((g-1)/X)+1;let v=e.slice(u,m).reduce(ke,0);return o%X!==0&&(v-=n.slice(u*X,o).reduce(ke,0)),g%X!==0&&g!==l&&(v-=n.slice(g,m*X).reduce(ke,0)),v}const Ul={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Wl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ul};function Xl({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:o,virtualScrollItemSizeComputed:g}){const l=De(),{props:u,emit:m,proxy:v}=l,{$q:f}=v;let h,d,y,k=[],b;const z=P(0),F=P(0),q=P({}),D=P(null),H=P(null),U=P(null),_=P({from:0,to:0}),B=w(()=>u.tableColspan!==void 0?u.tableColspan:100);g===void 0&&(g=w(()=>u.virtualScrollItemSize));const W=w(()=>g.value+";"+u.virtualScrollHorizontal),Q=w(()=>W.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);de(Q,()=>{Z()}),de(W,ne);function ne(){te(d,!0)}function oe(r){te(r===void 0?d:r)}function Y(r,S){const V=n();if(V==null||V.nodeType===8)return;const O=Ye(V,o(),D.value,H.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);y!==O.scrollViewSize&&Z(O.scrollViewSize),ae(V,O,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,Nl.indexOf(S)>-1?S:d>-1&&r>d?"end":"start")}function j(){const r=n();if(r==null||r.nodeType===8)return;const S=Ye(r,o(),D.value,H.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),V=e.value-1,O=S.scrollMaxSize-S.offsetStart-S.offsetEnd-F.value;if(h===S.scrollStart)return;if(S.scrollMaxSize<=0){ae(r,S,0,0);return}y!==S.scrollViewSize&&Z(S.scrollViewSize),ee(_.value.from);const I=Math.floor(S.scrollMaxSize-Math.max(S.scrollViewSize,S.offsetEnd)-Math.min(b[V],S.scrollViewSize/2));if(I>0&&Math.ceil(S.scrollStart)>=I){ae(r,S,V,S.scrollMaxSize-S.offsetEnd-k.reduce(ke,0));return}let x=0,C=S.scrollStart-S.offsetStart,R=C;if(C<=O&&C+S.scrollViewSize>=z.value)C-=z.value,x=_.value.from,R=C;else for(let a=0;C>=k[a]&&x<V;a++)C-=k[a],x+=X;for(;C>0&&x<V;)C-=b[x],C>-S.scrollViewSize?(x++,R=C):R=b[x]+C;ae(r,S,x,R)}function ae(r,S,V,O,I){const x=typeof I=="string"&&I.indexOf("-force")>-1,C=x===!0?I.replace("-force",""):I,R=C!==void 0?C:"start";let a=Math.max(0,V-q.value[R]),L=a+q.value.total;L>e.value&&(L=e.value,a=Math.max(0,L-q.value.total)),h=S.scrollStart;const se=a!==_.value.from||L!==_.value.to;if(se===!1&&C===void 0){re(V);return}const{activeElement:fe}=document,J=U.value;se===!0&&J!==null&&J!==fe&&J.contains(fe)===!0&&(J.addEventListener("focusout",ie),setTimeout(()=>{J!==null&&J.removeEventListener("focusout",ie)})),Ql(J,V-a);const ze=C!==void 0?b.slice(a,V).reduce(ke,0):0;if(se===!0){const ve=L>=_.value.from&&a<=_.value.to?_.value.to:L;_.value={from:a,to:ve},z.value=Oe(k,b,0,a),F.value=Oe(k,b,L,e.value),requestAnimationFrame(()=>{_.value.to!==L&&h===S.scrollStart&&(_.value={from:_.value.from,to:L},F.value=Oe(k,b,L,e.value))})}requestAnimationFrame(()=>{if(h!==S.scrollStart)return;se===!0&&ee(a);const ve=b.slice(a,V).reduce(ke,0),Se=ve+S.offsetStart+z.value,Fe=Se+b[V];let xe=Se+O;if(C!==void 0){const Ke=ve-ze,$=S.scrollStart+Ke;xe=x!==!0&&$<Se&&Fe<$+S.scrollViewSize?$:C==="end"?Fe-S.scrollViewSize:Se-(C==="start"?0:Math.round((S.scrollViewSize-b[V])/2))}h=xe,Ct(r,xe,u.virtualScrollHorizontal,f.lang.rtl),re(V)})}function ee(r){const S=U.value;if(S){const V=zt.call(S.children,a=>a.classList&&a.classList.contains("q-virtual-scroll--skip")===!1),O=V.length,I=u.virtualScrollHorizontal===!0?a=>a.getBoundingClientRect().width:a=>a.offsetHeight;let x=r,C,R;for(let a=0;a<O;){for(C=I(V[a]),a++;a<O&&V[a].classList.contains("q-virtual-scroll--with-prev")===!0;)C+=I(V[a]),a++;R=C-b[x],R!==0&&(b[x]+=R,k[Math.floor(x/X)]+=R),x++}}}function ie(){U.value!==null&&U.value!==void 0&&U.value.focus()}function te(r,S){const V=1*g.value;(S===!0||Array.isArray(b)===!1)&&(b=[]);const O=b.length;b.length=e.value;for(let x=e.value-1;x>=O;x--)b[x]=V;const I=Math.floor((e.value-1)/X);k=[];for(let x=0;x<=I;x++){let C=0;const R=Math.min((x+1)*X,e.value);for(let a=x*X;a<R;a++)C+=b[a];k.push(C)}d=-1,h=void 0,z.value=Oe(k,b,0,_.value.from),F.value=Oe(k,b,_.value.to,e.value),r>=0?(ee(_.value.from),ce(()=>{Y(r)})):G()}function Z(r){if(r===void 0&&typeof window!="undefined"){const C=n();C!=null&&C.nodeType!==8&&(r=Ye(C,o(),D.value,H.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}y=r;const S=parseFloat(u.virtualScrollSliceRatioBefore)||0,V=parseFloat(u.virtualScrollSliceRatioAfter)||0,O=1+S+V,I=r===void 0||r<=0?1:Math.ceil(r/g.value),x=Math.max(1,I,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/O));q.value={total:Math.ceil(x*O),start:Math.ceil(x*S),center:Math.ceil(x*(.5+S)),end:Math.ceil(x*(1+S)),view:I}}function ge(r,S){const V=u.virtualScrollHorizontal===!0?"width":"height",O={["--q-virtual-scroll-item-"+V]:g.value+"px"};return[r==="tbody"?A(r,{class:"q-virtual-scroll__padding",key:"before",ref:D},[A("tr",[A("td",{style:{[V]:`${z.value}px`,...O},colspan:B.value})])]):A(r,{class:"q-virtual-scroll__padding",key:"before",ref:D,style:{[V]:`${z.value}px`,...O}}),A(r,{class:"q-virtual-scroll__content",key:"content",ref:U,tabindex:-1},S.flat()),r==="tbody"?A(r,{class:"q-virtual-scroll__padding",key:"after",ref:H},[A("tr",[A("td",{style:{[V]:`${F.value}px`,...O},colspan:B.value})])]):A(r,{class:"q-virtual-scroll__padding",key:"after",ref:H,style:{[V]:`${F.value}px`,...O}})]}function re(r){d!==r&&(u.onVirtualScroll!==void 0&&m("virtualScroll",{index:r,from:_.value.from,to:_.value.to-1,direction:r<d?"decrease":"increase",ref:v}),d=r)}Z();const G=gl(j,f.platform.is.ios===!0?120:35);Sl(()=>{Z()});let c=!1;return yl(()=>{c=!0}),bl(()=>{if(c!==!0)return;const r=n();h!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Ct(r,h,u.virtualScrollHorizontal,f.lang.rtl):Y(d)}),Je(()=>{G.cancel()}),Object.assign(v,{scrollTo:Y,reset:ne,refresh:oe}),{virtualScrollSliceRange:_,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:Z,onVirtualScrollEvt:G,localResetVirtualScroll:te,padVirtualScroll:ge,scrollTo:Y,reset:ne,refresh:oe}}function uu(e,n,o){return o<=n?n:Math.min(o,Math.max(n,e))}function wt(e,n,o){if(o<=n)return n;const g=o-n+1;let l=n+(e-n)%g;return l<n&&(l=g+l),l===0?0:l}const pt=e=>["add","add-unique","toggle"].includes(e),Yl=".*+?^${}()|[]\\",Zl=Object.keys(Ge);var nu=He({name:"QSelect",inheritAttrs:!1,props:{...Wl,...Cl,...Ge,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:pt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...xt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:n,emit:o}){const{proxy:g}=De(),{$q:l}=g,u=P(!1),m=P(!1),v=P(-1),f=P(""),h=P(!1),d=P(!1);let y=null,k,b,z,F=null,q,D,H,U;const _=P(null),B=P(null),W=P(null),Q=P(null),ne=P(null),oe=wl(e),Y=kl(ct),j=w(()=>Array.isArray(e.options)?e.options.length:0),ae=w(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ee,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:te,padVirtualScroll:Z,onVirtualScrollEvt:ge,scrollTo:re,setVirtualScrollSize:G}=Xl({virtualScrollLength:j,getVirtualScrollTarget:Tt,getVirtualScrollEl:rt,virtualScrollItemSizeComputed:ae}),c=At(),r=w(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const i=e.mapOptions===!0&&k!==void 0?k:[],p=s.map(M=>Bt(M,i));return e.modelValue===null&&t===!0?p.filter(M=>M!==null):p}return s}),S=w(()=>{const t={};return Zl.forEach(s=>{const i=e[s];i!==void 0&&(t[s]=i)}),t}),V=w(()=>e.optionsDark===null?c.isDark.value:e.optionsDark),O=w(()=>gt(r.value)),I=w(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),x=w(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),C=w(()=>j.value===0),R=w(()=>r.value.map(t=>N.value(t)).join(", ")),a=w(()=>e.displayValue!==void 0?e.displayValue:R.value),L=w(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),se=w(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(L.value))),fe=w(()=>c.focused.value===!0?e.tabindex:-1),J=w(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${c.targetUid.value}_lb`};return v.value>=0&&(t["aria-activedescendant"]=`${c.targetUid.value}_${v.value}`),t}),ze=w(()=>({id:`${c.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ve=w(()=>r.value.map((t,s)=>({index:s,opt:t,html:L.value(t),selected:!0,removeAtIndex:_t,toggleOption:me,tabindex:fe.value}))),Se=w(()=>{if(j.value===0)return[];const{from:t,to:s}=ee.value;return e.options.slice(t,s).map((i,p)=>{const M=ye.value(i)===!0,E=t+p,T={clickable:!0,active:!1,activeClass:Ke.value,manualFocus:!0,focused:!1,disable:M,tabindex:-1,dense:e.optionsDense,dark:V.value,role:"option",id:`${c.targetUid.value}_${E}`,onClick:()=>{me(i)}};return M!==!0&&(Ne(i)===!0&&(T.active=!0),v.value===E&&(T.focused=!0),T["aria-selected"]=T.active===!0?"true":"false",l.platform.is.desktop===!0&&(T.onMousemove=()=>{u.value===!0&&be(E)})),{index:E,opt:i,html:L.value(i),label:N.value(i),selected:T.active,focused:T.focused,toggleOption:me,setOptionIndex:be,itemProps:T}})}),Fe=w(()=>e.dropdownIcon!==void 0?e.dropdownIcon:l.iconSet.arrow.dropdown),xe=w(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ke=w(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),$=w(()=>je(e.optionValue,"value")),N=w(()=>je(e.optionLabel,"label")),ye=w(()=>je(e.optionDisable,"disable")),_e=w(()=>r.value.map(t=>$.value(t))),Ft=w(()=>{const t={onInput:ct,onChange:Y,onKeydown:it,onKeyup:ot,onKeypress:at,onFocus:ut,onClick(s){b===!0&&ue(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Y,t});de(r,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&c.innerLoading.value!==!0&&(m.value!==!0&&u.value!==!0||O.value!==!0)&&(z!==!0&&Ve(),(m.value===!0||u.value===!0)&&Ce(""))},{immediate:!0}),de(()=>e.fillInput,Ve),de(u,Qe),de(j,Ut);function tt(t){return e.emitValue===!0?$.value(t):t}function $e(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();o("remove",{index:t,value:s.splice(t,1)[0]}),o("update:modelValue",s)}else o("update:modelValue",null)}function _t(t){$e(t),c.focus()}function lt(t,s){const i=tt(t);if(e.multiple!==!0){e.fillInput===!0&&qe(N.value(t),!0,!0),o("update:modelValue",i);return}if(r.value.length===0){o("add",{index:0,value:i}),o("update:modelValue",e.multiple===!0?[i]:i);return}if(s===!0&&Ne(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const p=e.modelValue.slice();o("add",{index:p.length,value:i}),p.push(i),o("update:modelValue",p)}function me(t,s){if(c.editable.value!==!0||t===void 0||ye.value(t)===!0)return;const i=$.value(t);if(e.multiple!==!0){s!==!0&&(qe(e.fillInput===!0?N.value(t):"",!0,!0),he()),B.value!==null&&B.value.focus(),(r.value.length===0||Ae($.value(r.value[0]),i)!==!0)&&o("update:modelValue",e.emitValue===!0?i:t);return}if((b!==!0||h.value===!0)&&c.focus(),ut(),r.value.length===0){const E=e.emitValue===!0?i:t;o("add",{index:0,value:E}),o("update:modelValue",e.multiple===!0?[E]:E);return}const p=e.modelValue.slice(),M=_e.value.findIndex(E=>Ae(E,i));if(M>-1)o("remove",{index:M,value:p.splice(M,1)[0]});else{if(e.maxValues!==void 0&&p.length>=e.maxValues)return;const E=e.emitValue===!0?i:t;o("add",{index:p.length,value:E}),p.push(E)}o("update:modelValue",p)}function be(t){if(l.platform.is.desktop!==!0)return;const s=t>-1&&t<j.value?t:-1;v.value!==s&&(v.value=s)}function Be(t=1,s){if(u.value===!0){let i=v.value;do i=wt(i+t,-1,j.value-1);while(i!==-1&&i!==v.value&&ye.value(e.options[i])===!0);v.value!==i&&(be(i),re(i),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Te(i>=0?N.value(e.options[i]):q))}}function Bt(t,s){const i=p=>Ae($.value(p),t);return e.options.find(i)||s.find(i)||t}function je(t,s){const i=t!==void 0?t:s;return typeof i=="function"?i:p=>p!==null&&typeof p=="object"&&i in p?p[i]:p}function Ne(t){const s=$.value(t);return _e.value.find(i=>Ae(i,s))!==void 0}function ut(t){e.useInput===!0&&B.value!==null&&(t===void 0||B.value===t.target&&t.target.value===R.value)&&B.value.select()}function nt(t){xl(t,27)===!0&&u.value===!0&&(ue(t),he(),Ve()),o("keyup",t)}function ot(t){const{value:s}=t.target;if(t.keyCode!==void 0){nt(t);return}if(t.target.value="",y!==null&&(clearTimeout(y),y=null),Ve(),typeof s=="string"&&s.length>0){const i=s.toLocaleLowerCase(),p=E=>{const T=e.options.find(K=>E.value(K).toLocaleLowerCase()===i);return T===void 0?!1:(r.value.indexOf(T)===-1?me(T):he(),!0)},M=E=>{p($)!==!0&&(p(N)===!0||E===!0||Ce(s,!0,()=>M(!0)))};M()}else c.clearValue(t)}function at(t){o("keypress",t)}function it(t){if(o("keydown",t),ql(t)===!0)return;const s=f.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),i=t.shiftKey!==!0&&e.multiple!==!0&&(v.value>-1||s===!0);if(t.keyCode===27){Me(t);return}if(t.keyCode===9&&i===!1){we();return}if(t.target===void 0||t.target.id!==c.targetUid.value)return;if(t.keyCode===40&&c.innerLoading.value!==!0&&u.value===!1){le(t),pe();return}if(t.keyCode===8&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?$e(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(le(t),v.value=-1,Be(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ie.value!==void 0&&(le(t),v.value=Math.max(-1,Math.min(j.value,v.value+(t.keyCode===33?-1:1)*ie.value.view)),Be(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(le(t),Be(t.keyCode===38?-1:1,e.multiple));const p=j.value;if((H===void 0||U<Date.now())&&(H=""),p>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||H.length>0)){u.value!==!0&&pe(t);const M=t.key.toLocaleLowerCase(),E=H.length===1&&H[0]===M;U=Date.now()+1500,E===!1&&(le(t),H+=M);const T=new RegExp("^"+H.split("").map(Ue=>Yl.indexOf(Ue)>-1?"\\"+Ue:Ue).join(".*"),"i");let K=v.value;if(E===!0||K<0||T.test(N.value(e.options[K]))!==!0)do K=wt(K+1,-1,p-1);while(K!==v.value&&(ye.value(e.options[K])===!0||T.test(N.value(e.options[K]))!==!0));v.value!==K&&ce(()=>{be(K),re(K),K>=0&&e.useInput===!0&&e.fillInput===!0&&Te(N.value(e.options[K]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||H!=="")&&(t.keyCode!==9||i===!1))){if(t.keyCode!==9&&le(t),v.value>-1&&v.value<p){me(e.options[v.value]);return}if(s===!0){const M=(E,T)=>{if(T){if(pt(T)!==!0)return}else T=e.newValueMode;if(E==null)return;qe("",e.multiple!==!0,!0),(T==="toggle"?me:lt)(E,T==="add-unique"),e.multiple!==!0&&(B.value!==null&&B.value.focus(),he())};if(e.onNewValue!==void 0?o("newValue",f.value,M):M(f.value),e.multiple!==!0)return}u.value===!0?we():c.innerLoading.value!==!0&&pe()}}function rt(){return b===!0?ne.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function Tt(){return rt()}function It(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?ve.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?ve.value.map((t,s)=>A($l,{key:"option-"+s,removable:c.editable.value===!0&&ye.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:fe.value,onRemove(){t.removeAtIndex(s)}},()=>A("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:N.value(t.opt)}))):[A("span",{[se.value===!0?"innerHTML":"textContent"]:a.value})]}function st(){if(C.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:f.value}):void 0;const t=n.option!==void 0?n.option:i=>A(_l,{key:i.index,...i.itemProps},()=>A(zl,()=>A(Fl,()=>A("span",{[i.html===!0?"innerHTML":"textContent"]:i.label}))));let s=Z("div",Se.value.map(t));return n["before-options"]!==void 0&&(s=n["before-options"]().concat(s)),El(n["after-options"],s)}function Pt(t,s){const i=s===!0?{...J.value,...c.splitAttrs.attributes.value}:void 0,p={ref:s===!0?B:void 0,key:"i_t",class:I.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...i,id:s===!0?c.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ft.value};return t!==!0&&b===!0&&(Array.isArray(p.class)===!0?p.class=[...p.class,"no-pointer-events"]:p.class+=" no-pointer-events"),A("input",p)}function ct(t){y!==null&&(clearTimeout(y),y=null),!(t&&t.target&&t.target.qComposing===!0)&&(Te(t.target.value||""),z=!0,q=f.value,c.focused.value!==!0&&(b!==!0||h.value===!0)&&c.focus(),e.onFilter!==void 0&&(y=setTimeout(()=>{y=null,Ce(f.value)},e.inputDebounce)))}function Te(t){f.value!==t&&(f.value=t,o("inputValue",t))}function qe(t,s,i){z=i!==!0,e.useInput===!0&&(Te(t),(s===!0||i!==!0)&&(q=t),s!==!0&&Ce(t))}function Ce(t,s,i){if(e.onFilter===void 0||s!==!0&&c.focused.value!==!0)return;c.innerLoading.value===!0?o("filterAbort"):(c.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&z!==!0&&t===N.value(r.value[0])&&(t="");const p=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);F!==null&&clearTimeout(F),F=p,o("filter",t,(M,E)=>{(s===!0||c.focused.value===!0)&&F===p&&(clearTimeout(F),typeof M=="function"&&M(),d.value=!1,ce(()=>{c.innerLoading.value=!1,c.editable.value===!0&&(s===!0?u.value===!0&&he():u.value===!0?Qe(!0):u.value=!0),typeof E=="function"&&ce(()=>{E(g)}),typeof i=="function"&&ce(()=>{i(g)})}))},()=>{c.focused.value===!0&&F===p&&(clearTimeout(F),c.innerLoading.value=!1,d.value=!1),u.value===!0&&(u.value=!1)})}function Rt(){return A(jl,{ref:W,class:x.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&C.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:V.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:xe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ze.value,onScrollPassive:ge,onBeforeShow:ft,onBeforeHide:Lt,onShow:Ht},st)}function Lt(t){vt(t),we()}function Ht(){G()}function Dt(t){ue(t),B.value!==null&&B.value.focus(),h.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Kt(t){ue(t),ce(()=>{h.value=!1})}function $t(){const t=[A(Dl,{class:`col-auto ${c.fieldClass.value}`,...S.value,for:c.targetUid.value,dark:V.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:f.value.length>0,...c.splitAttrs.listeners.value,onFocus:Dt,onBlur:Kt},{...n,rawControl:()=>c.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(A("div",{ref:ne,class:x.value+" scroll",style:e.popupContentStyle,...ze.value,onClick:Me,onScrollPassive:ge},st())),A(Al,{ref:Q,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:D,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:ft,onBeforeHide:jt,onHide:Nt,onShow:Qt},()=>A("div",{class:"q-select__dialog"+(V.value===!0?" q-select__dialog--dark q-dark":"")+(h.value===!0?" q-select__dialog--focused":"")},t))}function jt(t){vt(t),Q.value!==null&&Q.value.__updateRefocusTarget(c.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),c.focused.value=!1}function Nt(t){he(),c.focused.value===!1&&o("blur",t),Ve()}function Qt(){const t=document.activeElement;(t===null||t.id!==c.targetUid.value)&&B.value!==null&&B.value!==t&&B.value.focus(),G()}function we(){m.value!==!0&&(v.value=-1,u.value===!0&&(u.value=!1),c.focused.value===!1&&(F!==null&&(clearTimeout(F),F=null),c.innerLoading.value===!0&&(o("filterAbort"),c.innerLoading.value=!1,d.value=!1)))}function pe(t){c.editable.value===!0&&(b===!0?(c.onControlFocusin(t),m.value=!0,ce(()=>{c.focus()})):c.focus(),e.onFilter!==void 0?Ce(f.value):(C.value!==!0||n["no-option"]!==void 0)&&(u.value=!0))}function he(){m.value=!1,we()}function Ve(){e.useInput===!0&&qe(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&N.value(r.value[0])||"",!0,!0)}function Qe(t){let s=-1;if(t===!0){if(r.value.length>0){const i=$.value(r.value[0]);s=e.options.findIndex(p=>Ae($.value(p),i))}te(s)}be(s)}function Ut(t,s){u.value===!0&&c.innerLoading.value===!1&&(te(-1,!0),ce(()=>{u.value===!0&&c.innerLoading.value===!1&&(t>s?te():Qe(!0))}))}function dt(){m.value===!1&&W.value!==null&&W.value.updatePosition()}function ft(t){t!==void 0&&ue(t),o("popupShow",t),c.hasPopupOpen=!0,c.onControlFocusin(t)}function vt(t){t!==void 0&&ue(t),o("popupHide",t),c.hasPopupOpen=!1,c.onControlFocusout(t)}function mt(){b=l.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||C.value===!1:!0),D=l.platform.is.ios===!0&&b===!0&&e.useInput===!0?"fade":e.transitionShow}return pl(mt),Vl(dt),mt(),Je(()=>{y!==null&&clearTimeout(y)}),Object.assign(g,{showPopup:pe,hidePopup:he,removeAtIndex:$e,add:lt,toggleOption:me,getOptionIndex:()=>v.value,setOptionIndex:be,moveOptionSelection:Be,filter:Ce,updateMenuPosition:dt,updateInputValue:qe,isOptionSelected:Ne,getEmittingOptionValue:tt,isOptionDisabled:(...t)=>ye.value.apply(null,t)===!0,getOptionValue:(...t)=>$.value.apply(null,t),getOptionLabel:(...t)=>N.value.apply(null,t)}),Object.assign(c,{innerValue:r,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:_,targetRef:B,hasValue:O,showPopup:pe,floatingLabel:w(()=>e.hideSelected!==!0&&O.value===!0||typeof f.value=="number"||f.value.length>0||gt(e.displayValue)),getControlChild:()=>{if(c.editable.value!==!1&&(m.value===!0||C.value!==!0||n["no-option"]!==void 0))return b===!0?$t():Rt();c.hasPopupOpen===!0&&(c.hasPopupOpen=!1)},controlEvents:{onFocusin(t){c.onControlFocusin(t)},onFocusout(t){c.onControlFocusout(t,()=>{Ve(),we()})},onClick(t){if(Me(t),b!==!0&&u.value===!0){we(),B.value!==null&&B.value.focus();return}pe(t)}},getControl:t=>{const s=It(),i=t===!0||m.value!==!0||b!==!0;if(e.useInput===!0)s.push(Pt(t,i));else if(c.editable.value===!0){const M=i===!0?J.value:void 0;s.push(A("input",{ref:i===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:i===!0?c.targetUid.value:void 0,value:a.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...M,onKeydown:it,onKeyup:nt,onKeypress:at})),i===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&s.push(A("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ot}))}if(oe.value!==void 0&&e.disable!==!0&&_e.value.length>0){const M=_e.value.map(E=>A("option",{value:E,selected:!0}));s.push(A("select",{class:"hidden",name:oe.value,multiple:e.multiple},M))}const p=e.useInput===!0||i!==!0?void 0:c.splitAttrs.attributes.value;return A("div",{class:"q-field__native row items-center",...p,...c.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[A(Pe,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:Fe.value})]:null}),qt(c)}});const et={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Gl=Object.keys(et);et.all=!0;function Vt(e){const n={};for(const o of Gl)e[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?et:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function kt(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function Ze(e,n,o){const g=Re(e);let l,u=g.left-n.event.x,m=g.top-n.event.y,v=Math.abs(u),f=Math.abs(m);const h=n.direction;h.horizontal===!0&&h.vertical!==!0?l=u<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?l=m<0?"up":"down":h.up===!0&&m<0?(l="up",v>f&&(h.left===!0&&u<0?l="left":h.right===!0&&u>0&&(l="right"))):h.down===!0&&m>0?(l="down",v>f&&(h.left===!0&&u<0?l="left":h.right===!0&&u>0&&(l="right"))):h.left===!0&&u<0?(l="left",v<f&&(h.up===!0&&m<0?l="up":h.down===!0&&m>0&&(l="down"))):h.right===!0&&u>0&&(l="right",v<f&&(h.up===!0&&m<0?l="up":h.down===!0&&m>0&&(l="down")));let d=!1;if(l===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};l=n.event.lastDir,d=!0,l==="left"||l==="right"?(g.left-=u,v=0,u=0):(g.top-=m,f=0,m=0)}return{synthetic:d,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:g,direction:l,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:v,y:f},offset:{x:u,y:m},delta:{x:g.left-n.event.lastX,y:g.top-n.event.lastY}}}}let Jl=0;var ou=Ol({name:"touch-pan",beforeMount(e,{value:n,modifiers:o}){if(o.mouse!==!0&&Ee.has.touch!==!0)return;function g(u,m){o.mouse===!0&&m===!0?le(u):(o.stop===!0&&ue(u),o.prevent===!0&&Me(u))}const l={uid:"qvtp_"+Jl++,handler:n,modifiers:o,direction:Vt(o),noop:Mt,mouseStart(u){kt(u,l)&&Ml(u)&&(Ie(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(u,!0))},touchStart(u){if(kt(u,l)){const m=u.target;Ie(l,"temp",[[m,"touchmove","move","notPassiveCapture"],[m,"touchcancel","end","passiveCapture"],[m,"touchend","end","passiveCapture"]]),l.start(u)}},start(u,m){if(Ee.is.firefox===!0&&We(e,!0),l.lastEvt=u,m===!0||o.stop===!0){if(l.direction.all!==!0&&(m!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const h=u.type.indexOf("mouse")>-1?new MouseEvent(u.type,u):new TouchEvent(u.type,u);u.defaultPrevented===!0&&Me(h),u.cancelBubble===!0&&ue(h),Object.assign(h,{qKeyEvent:u.qKeyEvent,qClickOutside:u.qClickOutside,qAnchorHandled:u.qAnchorHandled,qClonedBy:u.qClonedBy===void 0?[l.uid]:u.qClonedBy.concat(l.uid)}),l.initialEvent={target:u.target,event:h}}ue(u)}const{left:v,top:f}=Re(u);l.event={x:v,y:f,time:Date.now(),mouse:m===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:v,lastY:f}},move(u){if(l.event===void 0)return;const m=Re(u),v=m.left-l.event.x,f=m.top-l.event.y;if(v===0&&f===0)return;l.lastEvt=u;const h=l.event.mouse===!0,d=()=>{g(u,h);let b;o.preserveCursor!==!0&&o.preservecursor!==!0&&(b=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Hl(),l.styleCleanup=z=>{if(l.styleCleanup=void 0,b!==void 0&&(document.documentElement.style.cursor=b),document.body.classList.remove("non-selectable"),h===!0){const F=()=>{document.body.classList.remove("no-pointer-events--children")};z!==void 0?setTimeout(()=>{F(),z()},50):F()}else z!==void 0&&z()}};if(l.event.detected===!0){l.event.isFirst!==!0&&g(u,l.event.mouse);const{payload:b,synthetic:z}=Ze(u,l,!1);b!==void 0&&(l.handler(b)===!1?l.end(u):(l.styleCleanup===void 0&&l.event.isFirst===!0&&d(),l.event.lastX=b.position.left,l.event.lastY=b.position.top,l.event.lastDir=z===!0?void 0:b.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||h===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){d(),l.event.detected=!0,l.move(u);return}const y=Math.abs(v),k=Math.abs(f);y!==k&&(l.direction.horizontal===!0&&y>k||l.direction.vertical===!0&&y<k||l.direction.up===!0&&y<k&&f<0||l.direction.down===!0&&y<k&&f>0||l.direction.left===!0&&y>k&&v<0||l.direction.right===!0&&y>k&&v>0?(l.event.detected=!0,l.move(u)):l.end(u,!0))},end(u,m){if(l.event!==void 0){if(Xe(l,"temp"),Ee.is.firefox===!0&&We(e,!1),m===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(Ze(u===void 0?l.lastEvt:u,l).payload);const{payload:v}=Ze(u===void 0?l.lastEvt:u,l,!0),f=()=>{l.handler(v)};l.styleCleanup!==void 0?l.styleCleanup(f):f()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(e.__qtouchpan=l,o.mouse===!0){const u=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Ie(l,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}Ee.has.touch===!0&&Ie(l,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const o=e.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=Vt(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Xe(n,"main"),Xe(n,"temp"),Ee.is.firefox===!0&&We(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});export{nu as Q,ou as T,$l as a,uu as b,jl as c,Vt as g,wt as n,Le as r,kt as s};
