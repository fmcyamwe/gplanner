import{j as N,l as fe,m as O,c as k,p as ye,h as r,Q as se,k as E,at as le,U as ie,W as re,s as _e,g as A,r as H,au as ke,w as P,av as te,aw as be,b as de,e as ue,ax as Ce,ay as we,N as R,D as Te,_ as qe,d as pe,L as ae,E as v,F as I,G as g,M as i,H as m,K as y,O as _,P as M,R as S,J as w,a3 as x,a1 as $,I as F,a0 as Se,a2 as ne,a6 as xe,a7 as $e}from"./index.a1cffa07.js";import{S as De,t as j,T as Pe,b as T,i as V,Q as Qe,e as Ie}from"./QCalendarTask.1ee0b907.js";import{u as Me,a as Fe,Q as Ve}from"./goalStorage.7568199c.js";import{u as Ee,a as Ne,b as Be,c as Le}from"./use-panel.1036b218.js";/* empty css                             */import Ge from"./NavigationBar.757abb6e.js";import"./touch.70a9dd44.js";var oe=N({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const s=fe(le,O);if(s===O)return console.error("QTimelineEntry needs to be child of QTimeline"),O;const o=k(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),n=k(()=>`q-timeline__dot text-${e.color||s.color}`),l=k(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const u=ye(t.default,[]);if(e.body!==void 0&&u.unshift(e.body),e.heading===!0){const d=[r("div"),r("div"),r(e.tag,{class:"q-timeline__heading-title"},u)];return r("div",{class:"q-timeline__heading"},l.value===!0?d.reverse():d)}let c;e.icon!==void 0?c=[r(se,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(c=[r("img",{class:"q-timeline__dot-img",src:e.avatar})]);const a=[r("div",{class:"q-timeline__subtitle"},[r("span",{},E(t.subtitle,[e.subtitle]))]),r("div",{class:n.value},c),r("div",{class:"q-timeline__content"},[r("h6",{class:"q-timeline__title"},E(t.title,[e.title]))].concat(u))];return r("li",{class:o.value},l.value===!0?a.reverse():a)}}}),Ue=N({name:"QTimeline",props:{...ie,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const s=A(),o=re(e,s.proxy.$q);_e(le,e);const n=k(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(o.value===!0?" q-timeline--dark":""));return()=>r("ul",{class:n.value},E(t.default))}}),Oe=N({name:"QCarouselSlide",props:{...Ee,imgSrc:String},setup(e,{slots:t}){const s=k(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>r("div",{class:"q-carousel__slide",style:s.value},E(t.default))}});let D=0;const Re={fullscreen:Boolean,noRouteFullscreenExit:Boolean},je=["update:fullscreen","fullscreen"];function He(){const e=A(),{props:t,emit:s,proxy:o}=e;let n,l,u;const c=H(!1);ke(e)===!0&&P(()=>o.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&f()}),P(()=>t.fullscreen,C=>{c.value!==C&&a()}),P(c,C=>{s("update:fullscreen",C),s("fullscreen",C)});function a(){c.value===!0?f():d()}function d(){c.value!==!0&&(c.value=!0,u=o.$el.parentNode,u.replaceChild(l,o.$el),document.body.appendChild(o.$el),D++,D===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:f},te.add(n))}function f(){c.value===!0&&(n!==void 0&&(te.remove(n),n=void 0),u.replaceChild(o.$el,l),c.value=!1,D=Math.max(0,D-1),D===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return be(()=>{l=document.createElement("span")}),de(()=>{t.fullscreen===!0&&d()}),ue(f),Object.assign(o,{toggleFullscreen:a,setFullscreen:d,exitFullscreen:f}),{inFullscreen:c,toggleFullscreen:a}}const Ae=["top","right","bottom","left"],ze=["regular","flat","outline","push","unelevated"];var Ke=N({name:"QCarousel",props:{...ie,...Ne,...Re,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>ze.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Ae.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...je,...Be],setup(e,{slots:t}){const{proxy:{$q:s}}=A(),o=re(e,s);let n=null,l;const{updatePanelsList:u,getPanelContent:c,panelDirectives:a,goToPanel:d,previousPanel:f,nextPanel:C,getEnabledPanels:ce,panelIndex:Q}=Le(),{inFullscreen:z}=He(),ge=k(()=>z.value!==!0&&e.height!==void 0?{height:e.height}:{}),B=k(()=>e.vertical===!0?"vertical":"horizontal"),me=k(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(z.value===!0?" fullscreen":"")+(o.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${B.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${W.value}`:"")),K=k(()=>{const h=[e.prevIcon||s.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||s.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&s.lang.rtl===!0?h.reverse():h}),J=k(()=>e.navigationIcon||s.iconSet.carousel.navigationIcon),ve=k(()=>e.navigationActiveIcon||J.value),W=k(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),L=k(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));P(()=>e.modelValue,()=>{e.autoplay&&G()}),P(()=>e.autoplay,h=>{h?G():n!==null&&(clearTimeout(n),n=null)});function G(){const h=Ce(e.autoplay)===!0?Math.abs(e.autoplay):5e3;n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,h>=0?C():f()},h)}de(()=>{e.autoplay&&G()}),ue(()=>{n!==null&&clearTimeout(n)});function X(h,p){return r("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${h} q-carousel__navigation--${W.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[r("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},ce().map(p))])}function he(){const h=[];if(e.navigation===!0){const p=t["navigation-icon"]!==void 0?t["navigation-icon"]:b=>r(R,{key:"nav"+b.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${b.active===!0?"":"in"}active`,...b.btnProps,onClick:b.onClick}),U=l-1;h.push(X("buttons",(b,Y)=>{const Z=b.props.name,ee=Q.value===Y;return p({index:Y,maxIndex:U,name:Z,active:ee,btnProps:{icon:ee===!0?ve.value:J.value,size:"sm",...L.value},onClick:()=>{d(Z)}})}))}else if(e.thumbnails===!0){const p=e.controlColor!==void 0?` text-${e.controlColor}`:"";h.push(X("thumbnails",U=>{const b=U.props;return r("img",{key:"tmb#"+b.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${b.name===e.modelValue?"":"in"}active`+p,src:b.imgSrc||b["img-src"],onClick:()=>{d(b.name)}})}))}return e.arrows===!0&&Q.value>=0&&((e.infinite===!0||Q.value>0)&&h.push(r("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${B.value} absolute flex flex-center`},[r(R,{icon:K.value[0],...L.value,onClick:f})])),(e.infinite===!0||Q.value<l-1)&&h.push(r("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${B.value} absolute flex flex-center`},[r(R,{icon:K.value[1],...L.value,onClick:C})]))),Te(t.control,h)}return()=>(l=u(t),r("div",{class:me.value,style:ge.value},[we("div",{class:"q-carousel__slides-container"},c(),"sl-cont",e.swipeable,()=>a.value)].concat(he())))}});const Je=pe({name:"summaryCalendar",components:{NavigationBar:Ge,QCalendarTask:De},data(){return{selectedDate:j(),selectedMonth:"",allMonths:Pe("long","en-US"),startDate:j(),endDate:j(),store:Me(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:Fe(),treeGoals:[],expanded:[],showTree:!1,daOptions:H({}),panel:H("")}},computed:{parsedTasks(){const e=T(this.startDate),t=T(this.endDate),s=[];for(let o=0;o<this.tasks.length;++o){const n=this.tasks[o];for(let l=0;l<n.logged.length;++l){const u=T(n.logged[l].date);if(V(u,e,t)){s.push(n);break}}}return s},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e;const t={},s=(o,n=!1)=>{o.logged.forEach(l=>{l.date.slice(-2),n&&"notes"in l&&(t[o.key]||(t[o.key]=[],this.panel=o.key),t[o.key].push({on:l.date,note:l.notes,score:l.atScore,title:o.title}))})};this.tasks.forEach(o=>{s(o),o.children!==void 0&&o.children.forEach(n=>{s(n,!0)})}),this.daOptions=t,this.constructTree()},methods:{getLogged(e,t,s=null){const o=[];if(t.length==0)return console.log("ERROR...Empty getLogged?!?",e,s),o;for(let n=0;n<t.length;++n)if(t[n].date===e){o.push({logged:t[n].logged});break}return o},classyColor(e){return`row items-center ${e.isChildren?"text-":"text-white bg-"}${e.color} `},getLoggedSummary(e){let t=0;const s=(o,n)=>e===n.date?o+n.logged:o;for(const o in this.tasks)t+=this.tasks[o].logged.reduce(s,0);return t.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree()},sum(e,t,s){const o=(l,u)=>{const c=T(u.date);return V(c,e,t)?l+u.logged:l};return s.logged.reduce(o,0).toFixed(2)},getTasks(e,t,s){const o=[];for(let n=0;n<s.logged.length;++n){const l=T(s.logged[n].date);if(V(l,e,t)){o.push(s);break}}return o},badgeStyles(e){return`issue ellipsis ${e.isChild?"text-white":`text-white bg-${e.color}`}`},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,t){let s=0;const o=(n,l)=>{const u=T(l.date);return V(u,e,t)?n+l.logged:n};for(const n in this.tasks)s+=this.tasks[n].logged.reduce(o,0);return s.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let t=e.days[0].month;console.log("onChange",t,e),this.selectedMonth=this.allMonths[t-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),q=e=>(xe("data-v-7f4d3723"),e=e(),$e(),e),We={class:"subcontent"},Xe={class:"q-pa-md"},Ye={class:"row justify-center"},Ze={style:{display:"flex","max-width":"800px",width:"100%"}},et={class:"header ellipsis q-ma-sm",style:{"font-weight":"600"}},tt={class:"issue ellipsis q-px-xs"},at=q(()=>i("div",{class:"key"},"Key",-1)),nt=q(()=>i("div",{class:"logged"},"Logged",-1)),ot={class:"key"},st={class:"logged"},lt={key:0,class:"logged-time",style:{"font-weight":"800"}},it={key:1,class:"logged-time"},rt={class:"summary ellipsis"},dt={class:"title ellipsis"},ut={class:"total"},ct={class:"logged-time"},gt=q(()=>i("br",null,null,-1)),mt={key:0,class:"column justify-center items-center"},vt=q(()=>i("br",null,null,-1)),ht={key:0,class:"q-pa-md"},ft={key:0,class:"q-pa-md bg-grey-12",style:{"max-width":"400px"}},yt=q(()=>i("div",{class:"row justify-center"}," Goals & Goal Events ",-1)),_t=q(()=>i("br",null,null,-1)),kt={class:"q-mr-sm text-weight-bold",size:"28px"},bt={key:0},Ct={class:"text-weight-bold"},wt={key:1,class:"text-weight-light text-black"};function Tt(e,t,s,o,n,l){const u=ae("navigation-bar"),c=ae("q-calendar-task");return v(),I(Qe,{padding:""},{default:g(()=>[i("div",We,[i("div",Xe,[m(u,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),i("div",Ye,[i("div",Ze,[m(c,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedDate=a),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":t[1]||(t[1]=a=>e.parsedTasks=a),"model-footer":e.footerTasks,"onUpdate:modelFooter":t[2]||(t[2]=a=>e.footerTasks=a),view:"month","task-width":240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":g(({})=>[i("div",et,[i("div",tt,y(e.getViewedMonth),1),at,nt])]),task:g(({scope:a})=>[(v(!0),_(S,null,M(e.getTasks(a.start,a.end,a.task),d=>(v(),_("div",{key:d.key,class:"header ellipsis"},[i("div",{class:ne(e.badgeStyles(d))},y(a.task.title)+" ",3),i("div",ot,y(a.task.key),1),i("div",st,y(e.sum(a.start,a.end,a.task)),1)]))),128))]),day:g(({scope:a})=>[(v(!0),_(S,null,M(e.getLogged(a.timestamp.date,a.task.logged),d=>(v(),_(S,{key:d},[a.task.children!==void 0?(v(),_("div",lt,y(d.logged),1)):(v(),_("div",it,y(d.logged),1))],64))),128))]),"footer-task":g(({scope:a})=>[i("div",rt,[i("div",dt,y(a.footer.title),1),i("div",ut,y(e.totals(a.start,a.end)),1)])]),"footer-day":g(({scope:a})=>[i("div",ct,y(e.getLoggedSummary(a.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),gt,e.tasks.length<=0?(v(),_("div",mt,[vt,m(x,null,{default:g(()=>[w(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),m($),m(x,null,{default:g(()=>[w(" 5. Check out the summary of all goals here! ")]),_:1})])):F("",!0)]),m(Se,{modelValue:e.showTree,"onUpdate:modelValue":t[3]||(t[3]=a=>e.showTree=a),label:"Tree Legend",color:"teal",class:"q-pa-md"},null,8,["modelValue"]),m(Ve,null,{default:g(()=>[e.showTree?(v(),_("div",ht,[e.treeGoals.length>0?(v(),_("div",ft,[yt,m($),_t,m(Ie,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":t[4]||(t[4]=a=>e.expanded=a),"no-connectors":"",dense:"",accordion:""},{"default-header":g(a=>[i("div",{class:ne(e.classyColor(a.node))},[a.node.isChildren?F("",!0):(v(),I(se,{key:0,name:a.node.icon||a.expanded?"expand_less":"expand_more",size:"28px",class:"q-mr-sm"},null,8,["name"])),i("div",kt,y(a.node.label),1)],2)]),"default-body":g(a=>[a.node.isChildren?(v(),_("div",bt,[i("span",Ct," >> "+y(a.node.details),1)])):(v(),_("span",wt,y(a.node.details),1))]),_:1},8,["nodes","expanded"])])):F("",!0)])):F("",!0)]),_:1}),m(Ke,{modelValue:e.panel,"onUpdate:modelValue":t[5]||(t[5]=a=>e.panel=a),"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"white",navigation:"",padding:"",infinite:"",arrows:"",class:"bg-primary text-white shadow-2 rounded-borders"},{default:g(()=>[(v(!0),_(S,null,M(e.daOptions,(a,d)=>(v(),I(Oe,{name:d,key:d},{default:g(()=>[i("div",null,[m(Ue,{color:"secondary"},{default:g(()=>[m(oe,{heading:"",body:a[0].title},null,8,["body"]),(v(!0),_(S,null,M(a,f=>(v(),I(oe,{key:f.on,title:f.score,subtitle:f.on},{default:g(()=>[w(y(f.note),1)]),_:2},1032,["title","subtitle"]))),128))]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1})}var Qt=qe(Je,[["render",Tt],["__scopeId","data-v-7f4d3723"]]);export{Qt as default};
