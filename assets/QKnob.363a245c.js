import{aV as L,j as K,aW as U,c as t,h as b,aX as Y,g as Q,b3 as p,r as _,w as ee,Z as ae,aF as te,ba as ne,aK as le}from"./index.8c8e6158.js";import{b as N,T as ue,n as A}from"./TouchPan.1ebb2fcb.js";const B={...L,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},q=50,D=2*q,T=D*Math.PI,re=Math.round(T*1e3)/1e3;var ie=K({name:"QCircularProgress",props:{...B,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:y}){const{proxy:{$q:h}}=Q(),C=U(e),M=t(()=>{const i=(h.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(h.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-i}deg)`:`rotate3d(0, 0, 1, ${i-90}deg)`}}),r=t(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),n=t(()=>D/(1-e.thickness/2)),v=t(()=>`${n.value/2} ${n.value/2} ${n.value} ${n.value}`),s=t(()=>N(e.value,e.min,e.max)),m=t(()=>T*(1-(s.value-e.min)/(e.max-e.min))),k=t(()=>e.thickness/2*n.value);function c({thickness:i,offset:g,color:f,cls:w,rounded:V}){return b("circle",{class:"q-circular-progress__"+w+(f!==void 0?` text-${f}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":i,"stroke-dasharray":re,"stroke-dashoffset":g,"stroke-linecap":V,cx:n.value,cy:n.value,r:q})}return()=>{const i=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&i.push(b("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:q-k.value/2,cx:n.value,cy:n.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&i.push(c({cls:"track",thickness:k.value,offset:0,color:e.trackColor})),i.push(c({cls:"circle",thickness:k.value,offset:m.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[b("svg",{class:"q-circular-progress__svg",style:M.value,viewBox:v.value,"aria-hidden":"true"},i)];return e.showValue===!0&&g.push(b("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},y.default!==void 0?y.default():[b("div",s.value)])),b("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:C.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:s.value},Y(y.internal,g))}}});const I=[34,37,40,33,39,38],oe=Object.keys(B);var de=K({name:"QKnob",props:{...p,...B,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:y,emit:h}){const{proxy:C}=Q(),{$q:M}=C,r=_(e.modelValue),n=_(!1),v=t(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),s=t(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax);let m;function k(){r.value=e.modelValue===null?v.value:N(e.modelValue,v.value,s.value),S(!0)}ee(()=>`${e.modelValue}|${v.value}|${s.value}`,k),k();const c=t(()=>e.disable===!1&&e.readonly===!1),i=t(()=>"q-knob non-selectable"+(c.value===!0?" q-knob--editable":e.disable===!0?" disabled":"")),g=t(()=>(String(e.step).trim().split(".")[1]||"").length),f=t(()=>e.step===0?1:e.step),w=t(()=>e.instantFeedback===!0||n.value===!0),V=M.platform.is.mobile===!0?t(()=>c.value===!0?{onClick:z}:{}):t(()=>c.value===!0?{onMousedown:R,onClick:z,onKeydown:X,onKeyup:Z}:{}),j=t(()=>c.value===!0?{tabindex:e.tabindex}:{[`aria-${e.disable===!0?"disabled":"readonly"}`]:"true"}),E=t(()=>{const a={};return oe.forEach(u=>{a[u]=e[u]}),a});function O(a){a.isFinal?(x(a.evt,!0),n.value=!1):(a.isFirst&&(F(),n.value=!0),x(a.evt))}const W=t(()=>[[ue,O,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function F(){const{top:a,left:u,width:d,height:$}=C.$el.getBoundingClientRect();m={top:a+$/2,left:u+d/2}}function R(a){F(),x(a)}function z(a){F(),x(a,!0)}function X(a){if(!I.includes(a.keyCode))return;ae(a);const u=([34,33].includes(a.keyCode)?10:1)*f.value,d=[34,37,40].includes(a.keyCode)?-u:u;r.value=N(parseFloat((r.value+d).toFixed(g.value)),v.value,s.value),S()}function x(a,u){const d=te(a),$=Math.abs(d.top-m.top),J=Math.sqrt($**2+Math.abs(d.left-m.left)**2);let l=Math.asin($/J)*(180/Math.PI);d.top<m.top?l=m.left<d.left?90-l:270+l:l=m.left<d.left?l+90:270-l,M.lang.rtl===!0?l=A(-l-e.angle,0,360):e.angle&&(l=A(l-e.angle,0,360)),e.reverse===!0&&(l=360-l);let o=e.min+l/360*(e.max-e.min);if(f.value!==0){const P=o%f.value;o=o-P+(Math.abs(P)>=f.value/2?(P<0?-1:1)*f.value:0),o=parseFloat(o.toFixed(g.value))}o=N(o,v.value,s.value),h("dragValue",o),r.value!==o&&(r.value=o),S(u)}function Z(a){I.includes(a.keyCode)&&S(!0)}function S(a){e.modelValue!==r.value&&h("update:modelValue",r.value),a===!0&&h("change",r.value)}const G=ne(e);function H(){return b("input",G.value)}return()=>{const a={class:i.value,role:"slider","aria-valuemin":v.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,...j.value,...E.value,value:r.value,instantFeedback:w.value,...V.value},u={default:y.default};return c.value===!0&&e.name!==void 0&&(u.internal=H),le(ie,a,u,"knob",c.value,()=>W.value)}}});export{de as Q};
