import{ak as me,j as te,e as ve,h as R,T as ge,al as pe,a3 as z,m as be,am as ye,a0 as J,an as V,$ as K,ao as F,ap as H,a1 as Y,ac as Se,ad as Ge,ae as Ce,r as L,c as x,w as W,n as Ee,k,aq as Ae,D as Me,g as $e,ar as De}from"./index.ed91736f.js";import{u as Oe}from"./use-quasar.7a505cb4.js";function qe(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),me.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var Ie=te({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:l,emit:a}){let G=!1,e,r,c=null,y=null,p,m;function C(){e&&e(),e=null,G=!1,c!==null&&(clearTimeout(c),c=null),y!==null&&(clearTimeout(y),y=null),r!==void 0&&r.removeEventListener("transitionend",p),p=null}function $(v,q,E){q!==void 0&&(v.style.height=`${q}px`),v.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,G=!0,e=E}function D(v,q){v.style.overflowY=null,v.style.height=null,v.style.transition=null,C(),q!==m&&a(q)}function A(v,q){let E=0;r=v,G===!0?(C(),E=v.offsetHeight===v.scrollHeight?0:void 0):(m="hide",v.style.overflowY="hidden"),$(v,E,q),c=setTimeout(()=>{c=null,v.style.height=`${v.scrollHeight}px`,p=_=>{y=null,(Object(_)!==_||_.target===v)&&D(v,"show")},v.addEventListener("transitionend",p),y=setTimeout(p,t.duration*1.1)},100)}function O(v,q){let E;r=v,G===!0?C():(m="show",v.style.overflowY="hidden",E=v.scrollHeight),$(v,E,q),c=setTimeout(()=>{c=null,v.style.height=0,p=_=>{y=null,(Object(_)!==_||_.target===v)&&D(v,"hide")},v.addEventListener("transitionend",p),y=setTimeout(p,t.duration*1.1)},100)}return ve(()=>{G===!0&&C()}),()=>R(ge,{css:!1,appear:t.appear,onEnter:A,onLeave:O},l.default)}});const X={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},we=Object.keys(X);X.all=!0;function Z(t){const l={};for(const a of we)t[a]===!0&&(l[a]=!0);return Object.keys(l).length===0?X:(l.horizontal===!0?l.left=l.right=!0:l.left===!0&&l.right===!0&&(l.horizontal=!0),l.vertical===!0?l.up=l.down=!0:l.up===!0&&l.down===!0&&(l.vertical=!0),l.horizontal===!0&&l.vertical===!0&&(l.all=!0),l)}function ee(t,l){return l.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof l.handler=="function"&&t.target.nodeName.toUpperCase()!=="INPUT"&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(l.uid)===-1)}function P(t,l,a){const G=H(t);let e,r=G.left-l.event.x,c=G.top-l.event.y,y=Math.abs(r),p=Math.abs(c);const m=l.direction;m.horizontal===!0&&m.vertical!==!0?e=r<0?"left":"right":m.horizontal!==!0&&m.vertical===!0?e=c<0?"up":"down":m.up===!0&&c<0?(e="up",y>p&&(m.left===!0&&r<0?e="left":m.right===!0&&r>0&&(e="right"))):m.down===!0&&c>0?(e="down",y>p&&(m.left===!0&&r<0?e="left":m.right===!0&&r>0&&(e="right"))):m.left===!0&&r<0?(e="left",y<p&&(m.up===!0&&c<0?e="up":m.down===!0&&c>0&&(e="down"))):m.right===!0&&r>0&&(e="right",y<p&&(m.up===!0&&c<0?e="up":m.down===!0&&c>0&&(e="down")));let C=!1;if(e===void 0&&a===!1){if(l.event.isFirst===!0||l.event.lastDir===void 0)return{};e=l.event.lastDir,C=!0,e==="left"||e==="right"?(G.left-=r,y=0,r=0):(G.top-=c,p=0,c=0)}return{synthetic:C,payload:{evt:t,touch:l.event.mouse!==!0,mouse:l.event.mouse===!0,position:G,direction:e,isFirst:l.event.isFirst,isFinal:a===!0,duration:Date.now()-l.event.time,distance:{x:y,y:p},offset:{x:r,y:c},delta:{x:G.left-l.event.lastX,y:G.top-l.event.lastY}}}}let _e=0;var Te=pe({name:"touch-pan",beforeMount(t,{value:l,modifiers:a}){if(a.mouse!==!0&&z.has.touch!==!0)return;function G(r,c){a.mouse===!0&&c===!0?Se(r):(a.stop===!0&&F(r),a.prevent===!0&&K(r))}const e={uid:"qvtp_"+_e++,handler:l,modifiers:a,direction:Z(a),noop:be,mouseStart(r){ee(r,e)&&ye(r)&&(J(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(r,!0))},touchStart(r){if(ee(r,e)){const c=r.target;J(e,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),e.start(r)}},start(r,c){if(z.is.firefox===!0&&V(t,!0),e.lastEvt=r,c===!0||a.stop===!0){if(e.direction.all!==!0&&(c!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const m=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&K(m),r.cancelBubble===!0&&F(m),Object.assign(m,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[e.uid]:r.qClonedBy.concat(e.uid)}),e.initialEvent={target:r.target,event:m}}F(r)}const{left:y,top:p}=H(r);e.event={x:y,y:p,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:y,lastY:p}},move(r){if(e.event===void 0)return;const c=H(r),y=c.left-e.event.x,p=c.top-e.event.y;if(y===0&&p===0)return;e.lastEvt=r;const m=e.event.mouse===!0,C=()=>{G(r,m);let A;a.preserveCursor!==!0&&a.preservecursor!==!0&&(A=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),m===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),qe(),e.styleCleanup=O=>{if(e.styleCleanup=void 0,A!==void 0&&(document.documentElement.style.cursor=A),document.body.classList.remove("non-selectable"),m===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};O!==void 0?setTimeout(()=>{v(),O()},50):v()}else O!==void 0&&O()}};if(e.event.detected===!0){e.event.isFirst!==!0&&G(r,e.event.mouse);const{payload:A,synthetic:O}=P(r,e,!1);A!==void 0&&(e.handler(A)===!1?e.end(r):(e.styleCleanup===void 0&&e.event.isFirst===!0&&C(),e.event.lastX=A.position.left,e.event.lastY=A.position.top,e.event.lastDir=O===!0?void 0:A.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||m===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){C(),e.event.detected=!0,e.move(r);return}const $=Math.abs(y),D=Math.abs(p);$!==D&&(e.direction.horizontal===!0&&$>D||e.direction.vertical===!0&&$<D||e.direction.up===!0&&$<D&&p<0||e.direction.down===!0&&$<D&&p>0||e.direction.left===!0&&$>D&&y<0||e.direction.right===!0&&$>D&&y>0?(e.event.detected=!0,e.move(r)):e.end(r,!0))},end(r,c){if(e.event!==void 0){if(Y(e,"temp"),z.is.firefox===!0&&V(t,!1),c===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(P(r===void 0?e.lastEvt:r,e).payload);const{payload:y}=P(r===void 0?e.lastEvt:r,e,!0),p=()=>{e.handler(y)};e.styleCleanup!==void 0?e.styleCleanup(p):p()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,a.mouse===!0){const r=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";J(e,"main",[[t,"mousedown","mouseStart",`passive${r}`]])}z.has.touch===!0&&J(e,"main",[[t,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,l){const a=t.__qtouchpan;a!==void 0&&(l.oldValue!==l.value&&(typeof value!="function"&&a.end(),a.handler=l.value),a.direction=Z(l.modifiers))},beforeUnmount(t){const l=t.__qtouchpan;l!==void 0&&(l.event!==void 0&&l.end(),Y(l,"main"),Y(l,"temp"),z.is.firefox===!0&&V(t,!1),l.styleCleanup!==void 0&&l.styleCleanup(),delete t.__qtouchpan)}}),ze=te({name:"QSplitter",props:{...Ge,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"?!1:t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:l,emit:a}){const{proxy:{$q:G}}=$e(),e=Ce(t,G),r=L(null),c={before:L(null),after:L(null)},y=x(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(e.value===!0?" q-splitter--dark":"")),p=x(()=>t.horizontal===!0?"height":"width"),m=x(()=>t.reverse!==!0?"before":"after"),C=x(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function $(M){return(t.unit==="%"?M:Math.round(M))+t.unit}const D=x(()=>({[m.value]:{[p.value]:$(t.modelValue)}}));let A,O,v,q,E;function _(M){if(M.isFirst===!0){const I=r.value.getBoundingClientRect()[p.value];A=t.horizontal===!0?"up":"left",O=t.unit==="%"?100:I,v=Math.min(O,C.value[1],Math.max(C.value[0],t.modelValue)),q=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:G.lang.rtl===!0?-1:1)*(t.unit==="%"?I===0?0:100/I:1),r.value.classList.add("q-splitter--active");return}if(M.isFinal===!0){E!==t.modelValue&&a("update:modelValue",E),r.value.classList.remove("q-splitter--active");return}const N=v+q*(M.direction===A?-1:1)*M.distance[t.horizontal===!0?"y":"x"];E=Math.min(O,C.value[1],Math.max(C.value[0],N)),c[m.value].value.style[p.value]=$(E),t.emitImmediately===!0&&t.modelValue!==E&&a("update:modelValue",E)}const j=x(()=>[[Te,_,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function B(M,N){M<N[0]?a("update:modelValue",N[0]):M>N[1]&&a("update:modelValue",N[1])}return W(()=>t.modelValue,M=>{B(M,C.value)}),W(()=>t.limits,()=>{Ee(()=>{B(t.modelValue,C.value)})}),()=>{const M=[R("div",{ref:c.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:D.value.before},k(l.before)),R("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[Ae("div",{class:"q-splitter__separator-area absolute-full"},k(l.separator),"sep",t.disable!==!0,()=>j.value)]),R("div",{ref:c.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:D.value.after},k(l.after))];return R("div",{class:y.value,ref:r},Me(l.default,M))}}});const Re=De("allGoals",()=>{const t=L([{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}]),l=[{text:"",sortable:!1},{text:"#",sortable:!1},{text:"TITLE",value:"title",sortable:!1},{text:"Goal",value:"subGoal",sortable:!1},{text:"PRIORITY",value:"priority",sortable:!1},{text:"DURATION",value:"duration",sortable:!1}],a=Oe(),G=x(()=>l),e=x(()=>{let i=JSON.parse(a.localStorage.getItem("mainGoals"));return p(i)}),r=x(()=>{let i=JSON.parse(a.localStorage.getItem("subGoals"));return p(i)}),c=x(()=>JSON.parse(a.localStorage.getItem("AllDates"))),y=x(()=>JSON.parse(a.localStorage.getItem("Balancey")));function p(i){return i?[...i]:[]}function m(i){a.localStorage.set("Balancey",JSON.stringify(i))}function C(i,n,o=null){E(),a.localStorage.set("mainGoals",JSON.stringify(i)),a.localStorage.set("subGoals",JSON.stringify(n)),o&&a.localStorage.set("AllDates",JSON.stringify(o))}function $(i,n,o,u){let h=this.getMainGoals;if(!h){console.log("umm no mainGoals...adding"),a.localStorage.set("mainGoals",JSON.stringify([{id:0,title:i.trim(),details:n,priority:u,bgcolor:o,icon:"fas fa-utensils"}]));return}let b=h.length+1;for(;h.some(s=>s.id===b);)b=Math.floor(Math.random()*1e3);return h.unshift({id:b,title:i.trim(),details:n,priority:u,bgcolor:o,icon:"fas fa-utensils"}),a.localStorage.set("mainGoals",JSON.stringify(h)),b}function D(i,n,o,u,h){let b=this.getMainGoals;for(var s=0;s<b.length;s++)if(b[s].id===i){b[s].title=n.trim(),b[s].details=o,b[s].bgcolor=u,b[s].priority=h;break}a.localStorage.set("mainGoals",JSON.stringify(b))}function A(i,n,o,u,h,b,s,d,f){let g=this.getSubGoals;if(!g){a.localStorage.set("subGoals",JSON.stringify([{id:0,parentGoal:i,title:n.trim(),score:o,time:u,duration:h,canMove:b,inDefaults:s,isAlternative:d,jeSuis:f||[]}]));return}let S=g.length+1;for(;g.some(T=>T.id===S);)S=Math.floor(Math.random()*1e3);return g.unshift({id:S,parentGoal:i,title:n.trim(),score:o,time:u,duration:h,canMove:b,inDefaults:s,isAlternative:d,jeSuis:f||[]}),a.localStorage.set("subGoals",JSON.stringify(g)),S}function O(i,n,o,u,h,b,s,d,f){let g=this.getSubGoals;for(var S=0;S<g.length;S++)if(g[S].id===i){g[S].title=n.trim(),g[S].score=o,g[S].time=u,g[S].duration=h,g[S].canMove=b,g[S].inDefaults=s,g[S].isAlternative=d,g[S].jeSuis=f||[];break}a.localStorage.set("subGoals",JSON.stringify(g))}function v(){a.localStorage.remove("mainGoals"),console.log("removed all mainGoal")}function q(){a.localStorage.remove("subGoals"),console.log("removed all subGoals")}function E(){a.localStorage.remove("subGoals"),a.localStorage.remove("mainGoals"),a.localStorage.remove("AllDates"),a.localStorage.remove("Balancey"),console.log("removed ALL")}function _(i,n=null,o=null){let u=this.getSubGoals;for(var h=0;h<u.length;h++)if(u[h].id===i){u[h].time=n||u[h].time,u[h].score=o||u[h].score;break}a.localStorage.set("subGoals",JSON.stringify(u))}function j(i){let n=this.getSubGoals;for(var o=0;o<n.length;o++)n[o].id===i&&(n.splice(o,1),console.log("removeSubgoal spliced!"));return a.localStorage.set("subGoals",JSON.stringify(n)),n}function B(i,n){let o=this.getMainGoals;for(var u=0;u<o.length;u++)o[u].id===i&&(o.splice(u,1),console.log("removeMaingoal spliced!"));return a.localStorage.set("mainGoals",JSON.stringify(o)),o}function M(i){var u;let n=this.getMainGoals;for(var o=0;o<n.length;o++)if(((u=n[o])==null?void 0:u.title.trim())===i)return n[o];return null}function N(i,n=null){let o=this.getAllDates;o?n?o[`${i}`]=n:i in o?delete o[`${i}`]:console.log(`ERROR? deleting schedule of ${i} not found!`):(console.log(`Adding new schedule for ${i}`),o={},o[`${i}`]=n),a.localStorage.set("AllDates",JSON.stringify(o))}function I(i){let n=this.getAllDates;if(n)return n[`${i}`]}function re(i){let n=this.getAllDates;return n?!!n[`${i}`]:!1}function le(){const i=[];let n=function(u){return u==null?void 0:u.inDefaults},o=this.getSubGoals;return o?(o.forEach(u=>{n(u)&&i.push(u)}),i):(console.log("No subgoals to fetch defaults :("),i)}function ie(i=null){let n=this.getMainGoals,o=new Set;if(i)for(var u=0;u<n.length;u++)n[u].priority==i&&o.add(n[u].priority);else n.forEach(h=>{o.add(h.priority)});return o}function oe(){const i=[];let n=this.getSubGoals;return n&&n.forEach(o=>{o!=null&&o.isAlternative&&i.push(o)}),i}function ae(i){const n=[];let o=function(h){const b=h.split(/on/);return b.length!=2?(console.log(`parseScore error?${h}`,b),-1):b[1]-b[0]},u=this.getSubGoals;return u&&u.forEach(h=>{if(h.score=="")console.log(`no score event added: ${h.title}`,h.score),n.push(h);else{let b=o(h.score);b>-1&&b>=i&&n.push(h)}}),n}function ne(i){const o=(i/60).toFixed(2);return parseFloat(o)}function se(){let i=this.getMainGoals,n=this.getSubGoals,o=(s,d)=>{if(s.id>d.id)return 1;if(s.id==d.id)return 0;if(s.id<d.id)return-1},u=s=>{if(!s)return"";let d=s.split(":");return parseInt(d[0])>=12?s+"PM":s+"AM"},h=s=>{let d=[];return n&&n.forEach(f=>{f.parentGoal==s&&d.push(f)}),d},b=[];return i.forEach(s=>{var S,T,Q,U;let d={id:s.id,label:`${s.id}) ${s==null?void 0:s.title.trim()}`,details:`${s.details} ==> Prio:${s==null?void 0:s.priority}`,color:`${s==null?void 0:s.bgcolor}`,prio:s==null?void 0:s.priority,children:[]},f=h(s.id);for(let w=0;w<f.length;w++){let ce=f[w].inDefaults?"Dft":"#",de=f[w].canMove?"Mv":"#",fe=f[w].isAlternative?"Alt":"#",he=[`${u((S=f[w])==null?void 0:S.time)} for ${(T=f[w])==null?void 0:T.duration} mins`,`:: ${ce}~${de}~${fe}`].join(`
`);d.children.push({id:f[w].id,label:`${f[w].id})- ${(Q=f[w])==null?void 0:Q.title.trim()} (${(U=f[w])==null?void 0:U.score})`,details:he,color:`${s==null?void 0:s.bgcolor}`,isChildren:!0,moods:f[w].jeSuis||[]})}let g=d.children;g.sort(o),d.children=g,b.push(d)}),b.sort(o),b}function ue(){let i=this.getAllDates;if(!i)return[];let n=this.getMainGoals,o=this.getSubGoals,u={};for(let d in i){let f=i[d];for(let g in f)u[g]||(u[g]=[]),u[g].push({date:d,logged:ne(f[g].duration)})}let h=d=>{let f=[];return o&&o.forEach(g=>{g.parentGoal==d&&f.push(g)}),f},b=(d,f=null)=>{let g={children:[],title:f?`${d.title.trim()}(${d.score})`:`${d.title.trim()} !${d.priority}!`,key:f?`${f}-${d.id}`:d.id,logged:[],expanded:!0,color:d==null?void 0:d.bgcolor,isChild:!!f};if(f){let S=u[d.id]||[];g.logged=[...S]}return g},s=[];return n.forEach(d=>{let f=b(d),g=h(d.id);for(let S=0;S<g.length;S++){let T=b(g[S],d.id);T.logged.length!=0&&(f.logged.push(...T.logged),T.children.length<1?delete T.children:console.log("huh children has descendents?!? ERROR?",T),f.children.push(T))}s.push(f)}),s}return{headers:l,headerRefs:t,getHeaders:G,getMainGoals:e,getSubGoals:r,getAllDates:c,getBalance:y,setBalance:m,addMainGoal:$,addSubGoal:A,editSubGoal:O,editMainGoal:D,importGoals:C,getGoalByTitle:M,saveSubProp:_,saveDailySchedule:N,resetSub:q,resetMain:v,resetAll:E,removeSubgoal:j,removeMaingoal:B,getEventsForDate:I,hasEventsForDate:re,fetchAllTaskSummary:ue,fetchGoalsWithMinScore:ae,fetchAllPrio:ie,fetchDefaults:le,fetchAlternativeEvts:oe,fetchGoalsTree:se}});export{ze as Q,Te as T,Ie as a,qe as c,Z as g,ee as s,Re as u};
