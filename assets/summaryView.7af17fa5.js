import{j as B,l as fe,m as H,c as k,p as ye,h as d,Q as z,k as V,at as le,U as ie,W as re,s as _e,g as K,r as I,au as ke,w as M,av as oe,aw as be,b as de,e as ue,ax as we,ay as Ce,N as U,D as qe,_ as Te,d as pe,L as ne,E as m,F as q,G as u,M as i,H as h,K as f,O as _,P as E,R as $,J as C,a3 as D,a1 as P,I as T,a0 as Se,a2 as R,a6 as xe,a7 as $e}from"./index.ce87ae0d.js";import{a as De,u as Pe,Q as Qe,d as Ie,e as Me}from"./goalStorage.e6c3c0d6.js";import{S as Fe,t as A,T as Ee,b as p,d as N,i as Ne,Q as Ve}from"./isMobile.a3ad7785.js";import{u as Be,a as Le,b as Ge,c as Oe}from"./use-panel.cc442362.js";/* empty css                             */import je from"./NavigationBar.c517621c.js";import"./touch.70a9dd44.js";var se=B({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:a}){const s=fe(le,H);if(s===H)return console.error("QTimelineEntry needs to be child of QTimeline"),H;const o=k(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),n=k(()=>`q-timeline__dot text-${e.color||s.color}`),l=k(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const r=ye(a.default,[]);if(e.body!==void 0&&r.unshift(e.body),e.heading===!0){const c=[d("div"),d("div"),d(e.tag,{class:"q-timeline__heading-title"},r)];return d("div",{class:"q-timeline__heading"},l.value===!0?c.reverse():c)}let g;e.icon!==void 0?g=[d(z,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(g=[d("img",{class:"q-timeline__dot-img",src:e.avatar})]);const t=[d("div",{class:"q-timeline__subtitle"},[d("span",{},V(a.subtitle,[e.subtitle]))]),d("div",{class:n.value},g),d("div",{class:"q-timeline__content"},[d("h6",{class:"q-timeline__title"},V(a.title,[e.title]))].concat(r))];return d("li",{class:o.value},l.value===!0?t.reverse():t)}}}),He=B({name:"QTimeline",props:{...ie,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:a}){const s=K(),o=re(e,s.proxy.$q);_e(le,e);const n=k(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(o.value===!0?" q-timeline--dark":""));return()=>d("ul",{class:n.value},V(a.default))}}),Ue=B({name:"QCarouselSlide",props:{...Be,imgSrc:String},setup(e,{slots:a}){const s=k(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:s.value},V(a.default))}});let Q=0;const Re={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Ae=["update:fullscreen","fullscreen"];function ze(){const e=K(),{props:a,emit:s,proxy:o}=e;let n,l,r;const g=I(!1);ke(e)===!0&&M(()=>o.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&y()}),M(()=>a.fullscreen,w=>{g.value!==w&&t()}),M(g,w=>{s("update:fullscreen",w),s("fullscreen",w)});function t(){g.value===!0?y():c()}function c(){g.value!==!0&&(g.value=!0,r=o.$el.parentNode,r.replaceChild(l,o.$el),document.body.appendChild(o.$el),Q++,Q===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:y},oe.add(n))}function y(){g.value===!0&&(n!==void 0&&(oe.remove(n),n=void 0),r.replaceChild(o.$el,l),g.value=!1,Q=Math.max(0,Q-1),Q===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return be(()=>{l=document.createElement("span")}),de(()=>{a.fullscreen===!0&&c()}),ue(y),Object.assign(o,{toggleFullscreen:t,setFullscreen:c,exitFullscreen:y}),{inFullscreen:g,toggleFullscreen:t}}const Ke=["top","right","bottom","left"],Je=["regular","flat","outline","push","unelevated"];var We=B({name:"QCarousel",props:{...ie,...Le,...Re,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Je.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Ke.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Ae,...Ge],setup(e,{slots:a}){const{proxy:{$q:s}}=K(),o=re(e,s);let n=null,l;const{updatePanelsList:r,getPanelContent:g,panelDirectives:t,goToPanel:c,previousPanel:y,nextPanel:w,getEnabledPanels:ce,panelIndex:F}=Oe(),{inFullscreen:J}=ze(),me=k(()=>J.value!==!0&&e.height!==void 0?{height:e.height}:{}),L=k(()=>e.vertical===!0?"vertical":"horizontal"),ge=k(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(J.value===!0?" fullscreen":"")+(o.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${L.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${Y.value}`:"")),W=k(()=>{const v=[e.prevIcon||s.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||s.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&s.lang.rtl===!0?v.reverse():v}),X=k(()=>e.navigationIcon||s.iconSet.carousel.navigationIcon),he=k(()=>e.navigationActiveIcon||X.value),Y=k(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),G=k(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));M(()=>e.modelValue,()=>{e.autoplay&&O()}),M(()=>e.autoplay,v=>{v?O():n!==null&&(clearTimeout(n),n=null)});function O(){const v=we(e.autoplay)===!0?Math.abs(e.autoplay):5e3;n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,v>=0?w():y()},v)}de(()=>{e.autoplay&&O()}),ue(()=>{n!==null&&clearTimeout(n)});function Z(v,x){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${v} q-carousel__navigation--${Y.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},ce().map(x))])}function ve(){const v=[];if(e.navigation===!0){const x=a["navigation-icon"]!==void 0?a["navigation-icon"]:b=>d(U,{key:"nav"+b.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${b.active===!0?"":"in"}active`,...b.btnProps,onClick:b.onClick}),j=l-1;v.push(Z("buttons",(b,ee)=>{const te=b.props.name,ae=F.value===ee;return x({index:ee,maxIndex:j,name:te,active:ae,btnProps:{icon:ae===!0?he.value:X.value,size:"sm",...G.value},onClick:()=>{c(te)}})}))}else if(e.thumbnails===!0){const x=e.controlColor!==void 0?` text-${e.controlColor}`:"";v.push(Z("thumbnails",j=>{const b=j.props;return d("img",{key:"tmb#"+b.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${b.name===e.modelValue?"":"in"}active`+x,src:b.imgSrc||b["img-src"],onClick:()=>{c(b.name)}})}))}return e.arrows===!0&&F.value>=0&&((e.infinite===!0||F.value>0)&&v.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${L.value} absolute flex flex-center`},[d(U,{icon:W.value[0],...G.value,onClick:y})])),(e.infinite===!0||F.value<l-1)&&v.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${L.value} absolute flex flex-center`},[d(U,{icon:W.value[1],...G.value,onClick:w})]))),qe(a.control,v)}return()=>(l=r(a),d("div",{class:ge.value,style:me.value},[Ce("div",{class:"q-carousel__slides-container"},g(),"sl-cont",e.swipeable,()=>t.value)].concat(ve())))}});const Xe=pe({name:"summaryCalendar",components:{NavigationBar:je,QCalendarTask:Fe},data(){return{calendar:I(null),mobile:I(!0),selectedDate:A(),selectedMonth:"",allMonths:Ee("long","en-US"),startDate:A(),endDate:A(),store:De(),tasks:[],footerTasks:[{title:"TOTALS"}],$q:Pe(),treeGoals:[],expanded:[],showTree:!1,daOptions:I({}),panel:I("")}},computed:{parsedTasks(){const e=p(this.startDate),a=p(this.endDate),s=[];for(let o=0;o<this.tasks.length;++o){const n=this.tasks[o];for(let l=0;l<n.logged.length;++l){const r=p(n.logged[l].date);if(N(r,e,a)){s.push(n);break}}}return s},getViewedMonth(){return`Goaly in ${this.selectedMonth}`}},beforeMount(){this.mobile=Ne();let e=this.store.fetchAllTaskSummary();if(e.length==0){this.$q.notify({color:"negative",position:"center",message:"No summary...please save a schedule to see more!",icon:"warning"});return}this.tasks=e;const a={},s=(o,n=!1,l="")=>{o.logged.forEach(r=>{r.date.slice(-2),n&&(a[o.key]||(a[o.key]=[],this.panel=o.key),a[o.key].push({on:r.date,note:r.notes,score:r.atScore,title:o.title,color:l}))})};this.tasks.forEach(o=>{s(o),o.children!==void 0&&o.children.forEach(n=>{s(n,!0,o==null?void 0:o.color)})}),this.daOptions=a,this.constructTree()},methods:{getLogged(e,a,s=null){const o=[];if(a.length==0)return console.log("ERROR...Empty getLogged?!?",e,s),o;for(let n=0;n<a.length;++n)if(a[n].date===e){o.push({logged:a[n].logged});break}return o},classyColor(e){return`row items-center ${e.isChildren?"text-":"text-white bg-"}${e.color} `},timelineColor(e){return e!=""?`bg-${e} text-white shadow-2 rounded-borders q-px-md`:"bg-black text-white shadow-2 rounded-borders q-px-md"},getLoggedSummary(e){let a=0;const s=(o,n)=>e===n.date?o+n.logged:o;for(const o in this.tasks)a+=this.tasks[o].logged.reduce(s,0);return a.toFixed(2)},constructTree(){this.treeGoals=this.store.fetchGoalsTree()},sum(e,a,s){const o=(l,r)=>{const g=p(r.date);return N(g,e,a)?l+r.logged:l};return s.logged.reduce(o,0).toFixed(2)},getTasks(e,a,s){const o=[];for(let n=0;n<s.logged.length;++n){const l=p(s.logged[n].date);if(N(l,e,a)){o.push(s);break}}return o},badgeStyles(e){return`issue ellipsis ${e.isChild?"text-white":`text-white bg-${e.color}`}`},weekdayClass(e){return{"task__weekday--style":!0}},dayClass(e){return{"task__day--style":!0}},footerDayClass(e){return{"task__footer--day__style":!0}},totals(e,a){let s=0;const o=(n,l)=>{const r=p(l.date);return N(r,e,a)?n+l.logged:n};for(const n in this.tasks)s+=this.tasks[n].logged.reduce(o,0);return s.toFixed(2)},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},onMoved(e){console.log("onMoved",e)},onChange(e){let a=e.days[0].month;console.log("onChange",a,this.selectedDate,e),this.selectedMonth=this.allMonths[a-1],this.startDate=e.start,this.endDate=e.end},onClickDate(e){console.log("onClickDate",e)},onClickDay(e){console.log("onClickDay",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)}}}),S=e=>(xe("data-v-8de9ac1e"),e=e(),$e(),e),Ye={class:"subcontent"},Ze={class:"q-pa-md"},et={class:"row justify-center"},tt={style:{display:"flex","max-width":"800px",width:"100%"}},at={class:"header ellipsis",style:{"font-weight":"600"}},ot={class:"issue ellipsis q-px-xs"},nt=S(()=>i("div",{class:"key"},"Key",-1)),st=S(()=>i("div",{class:"logged"},"Logged",-1)),lt={class:"key"},it={class:"logged"},rt={key:0,class:"logged-time",style:{"font-weight":"800"}},dt={key:1,class:"logged-time"},ut={class:"summary ellipsis"},ct={class:"title ellipsis"},mt={class:"total"},gt={class:"logged-time"},ht=S(()=>i("br",null,null,-1)),vt={key:0,class:"column justify-center items-center"},ft=S(()=>i("br",null,null,-1)),yt={key:0,class:"q-pa-md"},_t={key:0,class:"q-pa-md bg-grey-12",style:{"max-width":"400px"}},kt=S(()=>i("div",{class:"row justify-center"}," Goals & Goal Events ",-1)),bt=S(()=>i("br",null,null,-1)),wt={class:"q-mr-sm text-weight-bold",size:"28px"},Ct={key:0},qt={class:"text-weight-bold"},Tt={key:1,class:"text-weight-light text-black"},pt={class:"q-pa-sm q-pb-md"},St={class:"q-px-sm myHeading"};function xt(e,a,s,o,n,l){const r=ne("navigation-bar"),g=ne("q-calendar-task");return m(),q(Qe,{padding:""},{default:u(()=>[i("div",Ye,[i("div",Ze,[h(r,{onToday:e.onToday,onPrev:e.onPrev,onNext:e.onNext},null,8,["onToday","onPrev","onNext"]),i("div",et,[i("div",tt,[h(g,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":a[0]||(a[0]=t=>e.selectedDate=t),"model-tasks":e.parsedTasks,"onUpdate:modelTasks":a[1]||(a[1]=t=>e.parsedTasks=t),"model-footer":e.footerTasks,"onUpdate:modelFooter":a[2]||(a[2]=t=>e.footerTasks=t),view:"month","task-width":e.mobile?140:240,"cell-width":75,"task-key":"key","min-weekday-length":2,"weekday-class":e.weekdayClass,"day-class":e.dayClass,"footer-day-class":e.footerDayClass,"focus-type":["weekday","date","task"],dark:"",focusable:"",hoverable:"",animated:"",bordered:"",onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickHeadDay:e.onClickHeadDay},{"head-tasks":u(({})=>[i("div",at,[i("div",ot,f(e.getViewedMonth),1),nt,st])]),task:u(({scope:t})=>[(m(!0),_($,null,E(e.getTasks(t.start,t.end,t.task),c=>(m(),_("div",{key:c.key,class:"header ellipsis"},[i("div",{class:R(e.badgeStyles(c))},f(t.task.title)+" ",3),i("div",lt,f(t.task.key),1),i("div",it,f(e.sum(t.start,t.end,t.task)),1)]))),128))]),day:u(({scope:t})=>[(m(!0),_($,null,E(e.getLogged(t.timestamp.date,t.task.logged),c=>(m(),_($,{key:c},[t.task.children!==void 0?(m(),_("div",rt,f(c.logged),1)):(m(),_("div",dt,f(c.logged),1))],64))),128))]),"footer-task":u(({scope:t})=>[i("div",ut,[i("div",ct,f(t.footer.title),1),i("div",mt,f(e.totals(t.start,t.end)),1)])]),"footer-day":u(({scope:t})=>[i("div",gt,f(e.getLoggedSummary(t.timestamp.date)),1)]),_:1},8,["modelValue","model-tasks","model-footer","task-width","weekday-class","day-class","footer-day-class","onChange","onMoved","onClickDate","onClickDay","onClickHeadDay"])])]),ht,e.tasks.length<=0?(m(),_("div",vt,[ft,h(D,null,{default:u(()=>[C(" 1. Add some Goals first. A schedulable goal is one with a parent Goal--can have multiple related goals with the same parent. ")]),_:1}),h(P),h(D,null,{default:u(()=>[C(" 2. Go to Schedule to see a daily schedule. Drag scheduled events to new timeslots or click in calendar to add an event. ")]),_:1}),h(P),h(D,null,{default:u(()=>[C(" 3. Reload a saved daily schedule or defaults or choose minimal score events to schedule. Fix any scheduling conflicts. ")]),_:1}),h(P),h(D,null,{default:u(()=>[C(" 4. Save the daily schedule (dont forget to update their score as needed!) ")]),_:1}),h(P),h(D,null,{default:u(()=>[C(" 5. Check out the summary of all goals here! ")]),_:1})])):T("",!0)]),h(Se,{modelValue:e.showTree,"onUpdate:modelValue":a[3]||(a[3]=t=>e.showTree=t),label:e.showTree?"Hide Legend":"Show Legend",color:"teal",class:"q-pa-md"},null,8,["modelValue","label"]),h(Me,null,{default:u(()=>[e.showTree?(m(),_("div",yt,[e.treeGoals.length>0?(m(),_("div",_t,[kt,h(P),bt,h(Ve,{nodes:e.treeGoals,"node-key":"label",expanded:e.expanded,"onUpdate:expanded":a[4]||(a[4]=t=>e.expanded=t),"no-connectors":"",dense:"",accordion:""},{"default-header":u(t=>[i("div",{class:R(e.classyColor(t.node))},[t.node.isChildren?T("",!0):(m(),q(z,{key:0,name:t.expanded?"expand_less":"expand_more",size:"28px",class:"q-mr-sm"},null,8,["name"])),i("div",wt,f(t.node.label),1),h(z,{name:t.node.icon},null,8,["name"])],2)]),"default-body":u(t=>[t.node.isChildren?(m(),_("div",Ct,[i("span",qt," >> "+f(t.node.details),1),t.node.moods.length>0?(m(),q(Ie,{key:0},{default:u(()=>[C(f("Moods::> "+t.node.moods.join(",")),1)]),_:2},1024)):T("",!0)])):(m(),_("span",Tt,f(t.node.details),1))]),_:1},8,["nodes","expanded"])])):T("",!0)])):T("",!0)]),_:1}),Object.keys(e.daOptions).length>0?(m(),q(We,{key:0,modelValue:e.panel,"onUpdate:modelValue":a[5]||(a[5]=t=>e.panel=t),"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"white",infinite:"",arrows:"",navigation:"",class:"bg-primary text-white shadow-2 rounded-borders",style:{width:"100%"}},{default:u(()=>[(m(!0),_($,null,E(e.daOptions,(t,c)=>(m(),q(Ue,{name:c,key:c},{default:u(()=>[i("div",pt,[h(He,{class:R(e.timelineColor(t[0].color))},{default:u(()=>[h(se,{heading:""},{default:u(()=>[i("span",St,f(t[0].title),1)]),_:2},1024),(m(!0),_($,null,E(t,y=>(m(),q(se,{key:y.on,title:y.score,subtitle:y.on},{default:u(()=>[C(f(y.note),1)]),_:2},1032,["title","subtitle"]))),128))]),_:2},1032,["class"])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):T("",!0)])]),_:1})}var Et=Te(Xe,[["render",xt],["__scopeId","data-v-8de9ac1e"]]);export{Et as default};
