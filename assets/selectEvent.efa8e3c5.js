import{_ as x,E as c,O as p,H as a,G as o,bt as C,a1 as B,M as i,a2 as v,J as h,F as f,Q as y,I as u,bu as A,aq as _,N as b,a3 as V,a6 as k,a7 as Q}from"./index.90b4fdeb.js";import{b as S,Q as g}from"./QItem.643b1653.js";import{Q as q}from"./QSelect.fb2dbc3b.js";import{Q as E}from"./QKnob.79ce073a.js";import{Q as I}from"./QSpace.25d94c95.js";import"./touch.70a9dd44.js";import"./goalStorage.e06597d2.js";const F={name:"selectEvent",props:{canBeScheduled:Array,toBalance:Number},data(){return{doForce:!1,toAddE:null,dura:null,useBalance:!1,allEvts:this.canBeScheduled}},emits:["onPickEvent","doCancel"],computed:{allScheduled:{get(){return this.allEvts},set(e){this.allEvts=e}},toAdd:{get(){return this.toAddE},set(e){this.toAddE=e,this.dura=(e==null?void 0:e.duration)||0}}},methods:{onAddClicked(){this.$emit("onPickEvent",this.toAdd,this.doForce,this.useBalance,this.dura),this.doForce=!1,this.useBalance=!1,this.toAdd=null},filterFn(e,t,n){t(()=>{const r=e.toLowerCase();this.allScheduled=this.canBeScheduled.filter(d=>(d==null?void 0:d.title.toLowerCase().indexOf(r))>-1)})},setModel(e){this.toAdd=e},goalyColor(e){var t,n,r;return this.toAdd==null?"":e=="c"?"bg-"+((t=this.toAdd)==null?void 0:t.color)+" "+((n=this.toAdd)==null?void 0:n.ic):(r=this.toAdd)==null?void 0:r.color},labely(){var e;return this.toAdd==null||this.toAdd==null||this.toAdd==""?" Sub Goal":` Of: ${((e=this.toAdd)==null?void 0:e.pg)||""}`},classy(){return this.toAdd==null||this.toAdd==null||this.toAdd==""?"q-gutter-md q-px-md":"q-px-md"},canBalance(){var t,n;let e=this.toBalance+parseInt((t=this.toAdd)==null?void 0:t.duration)||((n=this.toAdd)==null?void 0:n.isAlternative);return this.toAdd==null?!1:e}}},m=e=>(k("data-v-3534f5a1"),e=e(),Q(),e),w={class:"q-pa-md"},N=m(()=>i("div",{class:"text-h3"},"Select event",-1)),U={class:"q-mx-md event-select"},z={key:0,class:"q-px-md"},M=m(()=>i("br",null,null,-1)),O=m(()=>i("div",{class:"q-mx-md",style:{"text-align":"center"}}," Add ",-1));function G(e,t,n,r,d,l){return c(),p("div",w,[a(V,null,{default:o(()=>[a(C,null,{default:o(()=>[N]),_:1}),a(B),i("div",U,[a(q,{modelValue:l.toAdd,"onUpdate:modelValue":t[0]||(t[0]=s=>l.toAdd=s),options:l.allScheduled,class:v(l.classy()),"option-value":"id","option-label":"title",popupContentClass:"q-px-sm",label:l.labely(),"options-selected-class":l.goalyColor("c"),"label-color":l.goalyColor("l"),onFilter:l.filterFn,onInputValue:l.setModel,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",behavior:"menu"},{"no-option":o(()=>[a(S,null,{default:o(()=>[a(g,{class:"text-grey"},{default:o(()=>[h(" No results ")]),_:1})]),_:1})]),before:o(()=>[l.toAdd?(c(),f(y,{key:0,name:l.toAdd.ic,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):u("",!0)]),_:1},8,["modelValue","options","class","label","options-selected-class","label-color","onFilter","onInputValue"])]),l.toAdd?(c(),p("div",z,[h(" Duration (min) "),a(E,{min:5,max:120,thickness:.22,step:5,modelValue:d.dura,"onUpdate:modelValue":t[1]||(t[1]=s=>d.dura=s),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md"},null,8,["thickness","modelValue"])])):u("",!0),M,a(A,{align:"center",class:"q-px-xl"},{default:o(()=>[a(_,{dense:"",modelValue:d.doForce,"onUpdate:modelValue":t[2]||(t[2]=s=>d.doForce=s),label:"Force In",color:"teal"},null,8,["modelValue"]),a(I),l.canBalance()?(c(),f(_,{key:0,dense:"",modelValue:d.useBalance,"onUpdate:modelValue":t[3]||(t[3]=s=>d.useBalance=s),label:"Use Balance",color:"brown"},null,8,["modelValue"])):u("",!0)]),_:1}),a(A,{align:"center"},{default:o(()=>[a(b,{flat:"",label:"Cancel",color:"primary",onClick:t[4]||(t[4]=s=>e.$emit("doCancel"))}),a(b,{elevated:"",color:"primary",align:"between",onClick:l.onAddClicked},{default:o(()=>[O]),_:1},8,["onClick"])]),_:1})]),_:1})])}var j=x(F,[["render",G],["__scopeId","data-v-3534f5a1"]]);export{j as default};
