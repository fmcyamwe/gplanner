import{z as v,A as o,K as r,D as n,C as d,bA as y,I as i,F as m,G as u,a3 as f,ba as x,b9 as p,a4 as h,B as V,Q as R,E as g,a2 as C,bC as q,ap as T,J as b,a5 as w}from"./index.1bde7470.js";import{Q as P}from"./QSelect.7bad7c28.js";import{Q as k}from"./QKnob.4139dd3f.js";import{w as c}from"./utiFunc.f569f737.js";import"./touch.9135741d.js";import"./goalStorage.eaf7c117.js";import"./QItem.9c617eab.js";const Q={name:"adHocEvent",props:{mainGoals:Array,toBalance:Number,at:String,timeRange:Object},data(){return{aTitle:"",daP:null,own:"misc",duration:5,useBalance:!1,atTime:c(this.at),doManual:!1}},emits:["saveEvent","doCancel"],mounted(){this.useTimeRange?this.currentDura=this.timeRange.duration:this.manualDura=!0},computed:{pGoals:{get(){return this.mainGoals}},currentDura:{get(){return this.duration},set(s){this.duration=s}},manualDura:{get(){return this.doManual},set(s){this.doManual=s}},evName:{get(){return this.aTitle},set(s){this.aTitle=s}},labely:{get(){return this.own=="misc"?this.daP==null?"Defaut Misc. Parent":"Of Parent Goal":"Select Parent Goal"}},useTimeRange:{get(){return!this.timeRange.isSame}}},methods:{aTimeyRange(){if(!this.timeRange)return{};let s=this.timeRange.start.split(" "),e=this.timeRange.end.split(" ");return this.timeRange.isSame,{start:c(s[1]),end:c(e[1])}},endRange(){return this.aTimeyRange().end},startRange(){return this.aTimeyRange().start},goalyColor(s){var e;return this.daP==null?"":s=="c"?"bg-"+this.daP.bgcolor+" "+((e=this.daP)==null?void 0:e.icon):this.daP.bgcolor},classy(){return this.daP==null?"q-gutter-md q-px-md":"q-px-md"},onClicked(){this.$emit("saveEvent",this.aTitle,this.daP,this.own,this.currentDura,this.useBalance,this.currentDura!=this.timeRange.duration),this.own="misc",this.daP=null,this.duration=5,this.useBalance=!1}}},B={class:"q-pa-sm"},D={key:0,class:"q-mx-md do-center"},S={key:1,class:"q-mx-md do-center"},N={class:"q-mx-md event-select"},_={class:"radio-select"},E={key:0},G={key:1,class:"q-ma-md"},U={class:"row"},A={class:"q-ma-md",style:{"text-align":"center"}};function z(s,e,M,I,t,l){return o(),r("div",B,[n(w,null,{default:d(()=>[n(y,null,{default:d(()=>[e[10]||(e[10]=i("div",{class:"text-h4 title"},"New Ad hoc Event",-1)),l.useTimeRange?(o(),r("div",D,[e[8]||(e[8]=m(" @ ")),i("em",null,u(l.startRange())+" >> "+u(l.endRange()),1)])):(o(),r("div",S,[e[9]||(e[9]=m(" @ ")),i("em",null,u(t.atTime),1)]))]),_:1}),n(f),i("div",N,[n(x,{modelValue:l.evName,"onUpdate:modelValue":e[0]||(e[0]=a=>l.evName=a),filled:"",label:"Title","lazy-rules":"","item-aligned":"",rules:[a=>a&&a.length>1||"Please type a goal"]},null,8,["modelValue","rules"]),i("div",_,[n(p,{class:"q-mx-xs",modelValue:t.own,"onUpdate:modelValue":e[1]||(e[1]=a=>t.own=a),val:"misc",label:"Misc"},null,8,["modelValue"]),n(p,{class:"q-mx-md",modelValue:t.own,"onUpdate:modelValue":e[2]||(e[2]=a=>t.own=a),val:"self",label:"By Self"},null,8,["modelValue"])]),l.pGoals?(o(),r("div",E,[n(P,{class:h(l.classy()),modelValue:t.daP,"onUpdate:modelValue":e[3]||(e[3]=a=>t.daP=a),options:l.pGoals,"option-value":"id","option-label":"title",disable:t.own!="misc",label:l.labely,popupContentClass:"q-px-sm","options-selected-class":l.goalyColor("c"),"label-color":l.goalyColor("l")},{before:d(()=>[t.daP?(o(),V(R,{key:0,name:t.daP.icon,size:"14px",class:"q-mx-md q-pr-sm"},null,8,["name"])):g("",!0)]),_:1},8,["class","modelValue","options","disable","label","options-selected-class","label-color"])])):g("",!0),l.useTimeRange?(o(),r("div",G,[e[11]||(e[11]=m(" TimeRange: @ ")),i("em",null,u(l.startRange())+" >> "+u(l.endRange()),1),e[12]||(e[12]=i("br",null,null,-1)),n(C,{modelValue:l.manualDura,"onUpdate:modelValue":e[4]||(e[4]=a=>l.manualDura=a),label:"Set Duration?","left-label":""},null,8,["modelValue"])])):g("",!0),i("div",U,[e[13]||(e[13]=m(" Duration (min) ")),n(k,{min:15,max:120,thickness:.5,disable:!l.manualDura,step:5,modelValue:t.duration,"onUpdate:modelValue":e[5]||(e[5]=a=>t.duration=a),"show-value":"",size:"75px",color:"teal","track-color":"grey-3",class:"q-ma-md",style:{margin:"0 auto"}},null,8,["disable","modelValue"])])]),n(q,{class:"q-px-xl q-ma-sm"},{default:d(()=>[n(T,{dense:"",modelValue:t.useBalance,"onUpdate:modelValue":e[6]||(e[6]=a=>t.useBalance=a),label:"Use Balance",color:"brown"},null,8,["modelValue"])]),_:1}),i("div",A,[n(b,{flat:"",align:"center",label:"Cancel",color:"primary",onClick:e[7]||(e[7]=a=>s.$emit("doCancel"))}),n(b,{elevated:"",color:"primary",align:"between",onClick:l.onClicked},{default:d(()=>e[14]||(e[14]=[i("div",{class:"q-mx-xs",style:{"text-align":"center"}},"Add",-1)])),_:1},8,["onClick"])]),e[15]||(e[15]=i("br",null,null,-1))]),_:1})])}var W=v(Q,[["render",z],["__scopeId","data-v-d9bade14"]]);export{W as default};
