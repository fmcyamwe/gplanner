import{_ as te}from"./index.87766908.js";import"./QCalendar.3a412bcc.js";import{a as ie,p as ne,b as oe}from"./QCalendarTask.74585b72.js";import{h as se}from"./utiFunc.8d3d5627.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const re=i=>{const e=new Map;e.set("web",{name:"web"});const t=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(n,a)=>{t.platforms.set(n,a)},s=n=>{t.platforms.has(n)&&(t.currentPlatform=t.platforms.get(n))};return t.addPlatform=o,t.setPlatform=s,t},ae=i=>i.CapacitorPlatforms=re(i),F=ae(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});F.addPlatform;F.setPlatform;var C;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(C||(C={}));class J extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const le=i=>{var e,t;return i!=null&&i.androidBridge?"android":!((t=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ce=i=>{var e,t,o,s,n;const a=i.CapacitorCustomPlatform||null,r=i.Capacitor||{},g=r.Plugins=r.Plugins||{},l=i.CapacitorPlatforms,E=()=>a!==null?a.name:le(i),b=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||E,$=()=>b()!=="web",q=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||$,G=c=>{const d=x.get(c);return!!(d!=null&&d.platforms.has(b())||j(c))},B=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||G,K=c=>{var d;return(d=r.PluginHeaders)===null||d===void 0?void 0:d.find(N=>N.name===c)},j=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||K,z=c=>i.console.error(c),V=(c,d,N)=>Promise.reject(`${N} does not have an implementation of "${d}".`),x=new Map,Q=(c,d={})=>{const N=x.get(c);if(N)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),N.proxy;const w=b(),L=j(c);let y;const Y=async()=>(!y&&w in d?y=typeof d[w]=="function"?y=await d[w]():y=d[w]:a!==null&&!y&&"web"in d&&(y=typeof d.web=="function"?y=await d.web():y=d.web),y),Z=(f,h)=>{var p,v;if(L){const P=L==null?void 0:L.methods.find(m=>h===m.name);if(P)return P.rtype==="promise"?m=>r.nativePromise(c,h.toString(),m):(m,S)=>r.nativeCallback(c,h.toString(),m,S);if(f)return(p=f[h])===null||p===void 0?void 0:p.bind(f)}else{if(f)return(v=f[h])===null||v===void 0?void 0:v.bind(f);throw new J(`"${c}" plugin is not implemented on ${w}`,C.Unimplemented)}},k=f=>{let h;const p=(...v)=>{const P=Y().then(m=>{const S=Z(m,f);if(S){const A=S(...v);return h=A==null?void 0:A.remove,A}else throw new J(`"${c}.${f}()" is not implemented on ${w}`,C.Unimplemented)});return f==="addListener"&&(P.remove=async()=>h()),P};return p.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(p,"name",{value:f,writable:!1,configurable:!1}),p},U=k("addListener"),_=k("removeListener"),ee=(f,h)=>{const p=U({eventName:f},h),v=async()=>{const m=await p;_({eventName:f,callbackId:m},h)},P=new Promise(m=>p.then(()=>m({remove:v})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await v()},P},T=new Proxy({},{get(f,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?ee:U;case"removeListener":return _;default:return k(h)}}});return g[c]=T,x.set(c,{name:c,proxy:T,platforms:new Set([...Object.keys(d),...L?[w]:[]])}),T},X=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.registerPlugin)||Q;return r.convertFileSrc||(r.convertFileSrc=c=>c),r.getPlatform=b,r.handleError=z,r.isNativePlatform=q,r.isPluginAvailable=B,r.pluginMethodNoop=V,r.registerPlugin=X,r.Exception=J,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r.platform=r.getPlatform(),r.isNative=r.isNativePlatform(),r},de=i=>i.Capacitor=ce(i),O=de(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),R=O.registerPlugin;O.Plugins;class W{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),o&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,o){const s=this.listeners[e];if(!s){if(o){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}return}s.forEach(n=>n(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new O.Exception(e,C.Unimplemented)}unavailable(e="not available"){return new O.Exception(e,C.Unavailable)}async removeListener(e,t){const o=this.listeners[e];if(!o)return;const s=o.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];!t||(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const I=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),M=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class fe extends W{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,n]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=M(s).trim(),n=M(n).trim(),t[s]=n}),t}async setCookie(e){try{const t=I(e.key),o=I(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${s}; path=${n}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}R("CapacitorCookies",{web:()=>new fe});const ue=async i=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const s=o.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>t(s),o.readAsDataURL(i)}),ge=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(s=>s.toLocaleLowerCase()).reduce((s,n,a)=>(s[n]=i[e[a]],s),{})},he=(i,e=!0)=>i?Object.entries(i).reduce((o,s)=>{const[n,a]=s;let r,g;return Array.isArray(a)?(g="",a.forEach(l=>{r=e?encodeURIComponent(l):l,g+=`${n}=${r}&`}),g.slice(0,-1)):(r=e?encodeURIComponent(a):a,g=`${n}=${r}`),`${o}&${g}`},"").substr(1):null,me=(i,e={})=>{const t=Object.assign({method:i.method||"GET",headers:i.headers},e),s=ge(i.headers)["content-type"]||"";if(typeof i.data=="string")t.body=i.data;else if(s.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[a,r]of Object.entries(i.data||{}))n.set(a,r);t.body=n.toString()}else if(s.includes("multipart/form-data")||i.data instanceof FormData){const n=new FormData;if(i.data instanceof FormData)i.data.forEach((r,g)=>{n.append(g,r)});else for(const r of Object.keys(i.data))n.append(r,i.data[r]);t.body=n;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(s.includes("application/json")||typeof i.data=="object")&&(t.body=JSON.stringify(i.data));return t};class pe extends W{async request(e){const t=me(e,e.webFetchExtra),o=he(e.params,e.shouldEncodeUrlParams),s=o?`${e.url}?${o}`:e.url,n=await fetch(s,t),a=n.headers.get("content-type")||"";let{responseType:r="text"}=n.ok?e:{};a.includes("application/json")&&(r="json");let g,l;switch(r){case"arraybuffer":case"blob":l=await n.blob(),g=await ue(l);break;case"json":g=await n.json();break;case"document":case"text":default:g=await n.text()}const E={};return n.headers.forEach((b,$)=>{E[$]=b}),{data:g,headers:E,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}R("CapacitorHttp",{web:()=>new pe});var H;(function(i){i[i.Sunday=1]="Sunday",i[i.Monday=2]="Monday",i[i.Tuesday=3]="Tuesday",i[i.Wednesday=4]="Wednesday",i[i.Thursday=5]="Thursday",i[i.Friday=6]="Friday",i[i.Saturday=7]="Saturday"})(H||(H={}));const u=R("LocalNotifications",{web:()=>te(()=>import("./web.b377e1ce.js"),["assets/web.b377e1ce.js","assets/index.87766908.js","assets/index.f80becc5.css","assets/QCalendar.3a412bcc.js","assets/QCalendarTask.74585b72.js","assets/utiFunc.8d3d5627.js"]).then(i=>new i.LocalNotificationsWeb)}),D=O.getPlatform();class ye{constructor(){this.name="CapacitorNotificationsWeb",this.platforms=["web"],this.pending=[],this.deliveredNotifications=[],this.doInit(),this.seen={},this.lastSeen=null}doInit(){D!="web"?console.log("CapacitorNotificationsWeb>>ANDROID Platform",D):console.log("CapacitorNotificationsWeb>>WEB Platform",D),this.checkPermissions(),this.addListeners(),this.createChannel(),this.registerActions(),this.getDeliveredNotifications(),this.getPending()}doPrint(){console.log("CapacitorNotificationsWeb>>","ALLGOOD")}getState(){return{pending:this.pending.length,delivered:this.deliveredNotifications.length}}async checkPermissions(){let e=await u.checkPermissions();console.log("registerNotifications>>CheckP",JSON.stringify(e)),e.display==="prompt"&&(e=await u.requestPermissions(),console.log("registerNotifications::requestP",JSON.stringify(e))),e.display!=="granted"&&console.log("registerNotifications::NOPE",e.display,e.receive)}async addListeners(){await u.addListener("localNotificationReceived",e=>{console.log("localNotificationReceived>>",JSON.stringify(e)),e!==void 0?(this.deliveredNotifications.push(e),this.seen[e.id]=!0,this.lastSeen=e.id):(console.log("localNotificationReceived>>UNDEFINED...what to do?",e,JSON.stringify(this.seen),JSON.stringify(this.lastSeen)),this.lastSeen&&(u.cancel({notifications:[{id:this.lastSeen}]}),this.lastSeen=null))}),await u.addListener("localNotificationActionPerformed",e=>{console.log("localNotificationActionPerformed::ACtion>> ",JSON.stringify(e))})}async getDeliveredNotifications(){const e=await u.getDeliveredNotifications();console.log("getDeliveredNotifications",JSON.stringify(e));for(const t in e.notifications)console.log("getDeliveredNotifications::Notif "+t,JSON.stringify(e.notifications[t])),this.deliveredNotifications.push(e.notifications[t])}async createChannel(){if(D!="web"){await u.createChannel({id:"LocNotifs",name:"Notifs",description:"Blu Notifs",importance:5,visibility:1,vibration:!0});let e=await u.listChannels();console.log("createChannel>>channelz",JSON.stringify(e))}}async registerActions(){const e={ok:{id:"ok",title:"OK"},add:{id:"add",title:"Add3"},rem:{id:"rem",title:"End"},go:{id:"go",title:"Nav"}},t={id:"start",actions:[e.ok,e.rem]},o={id:"end",actions:[e.add,e.go]},s={id:"nav",actions:[e.ok,e.go]};let n={types:[t,o,s]};await u.registerActionTypes(n)}async getPending(){const e=await u.getPending();console.log("getPending",JSON.stringify(e));for(const t in e.notifications){let o=e.notifications[t],s=o.schedule.at,n=Date.parse(s),a=new Date(s);console.log("getPending:: Notif::AT?!? >> ",JSON.stringify(s),JSON.stringify(n),JSON.stringify(new Date(n)),JSON.stringify(a));let r=n-Date.now();r<=0?console.log("getPending:: SKIPPED oldy>> ",r,JSON.stringify(s),JSON.stringify(n),JSON.stringify(a)):this.pending.push({...o,schedule:{at:a}})}}scheduleLater(e,t){for(const o of e){let s=ie(oe(t),{minute:ne(o.start.time)}),n=Date.parse(`${s.date} ${s.time}`),a=new Date(n),r={title:"Scheduled!",body:o.title,id:o.id,schedule:{at:a,allowWhileIdle:!0,repeats:!0},attachments:null,actionTypeId:"nav",iconColor:se(o.bgcolor),extra:null,channelId:"LocNotifs"};this.pending.push(r)}}async schedule(e){u.schedule(e).then(t=>{console.log("schedule>>good",JSON.stringify(t)),console.log(t),this.deliveredNotifications.push(...e.notifications);let o=this.pending.length;this.pending=this.pending.filter(s=>!e.notifications.find(n=>n.id===s.id)),o!=this.pending.length?console.log("schedule>>PENDING change",o,this.pending.length):console.log("schedule>>PENDING SAME",o,this.pending.length)}).catch(t=>{console.log("schedule>>ERROR",JSON.stringify(t)),console.log(t),this.pending.push(...e.notifications)})}schedulePending(){console.log("schedulePending!!",JSON.stringify(this.pending),this.deliveredNotifications.length);for(const e of this.pending)u.schedule({notifications:[e]}).then(t=>{console.log("schedulePending>>good",JSON.stringify(t)),console.log(t),this.pending=this.pending.filter(o=>o.id!==e.id)}).catch(t=>{console.log("schedulePending>>ERROR",t),console.log(t),this.cancel(e.id)})}async cancel(e){for(let t=0;t<this.pending.length;t++)e==this.pending[t].id&&(console.log("cancel>>notif",e,JSON.stringify(this.pending[t])),u.cancel({notifications:[this.pending[t]]}),this.pending.splice(t,1))}async removeDeliveredNotifications(e){return console.log("CapacitorNotificationsWeb::removeDeliveredNotifications"),u.removeDeliveredNotifications(e)}async removeAllDeliveredNotifications(){return console.log("CapacitorNotificationsWeb::removeAllDeliveredNotifications"),u.removeAllDeliveredNotifications()}}const Ne=new ye;export{Ne as L,W};
