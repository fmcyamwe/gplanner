import{a_ as U,j as Q,a$ as X,c as a,h as b,b0 as Y,g as K,b8 as p,r as _,w as ee,Z as te,aC as ae,be as ne,ay as le}from"./index.5b37cd2a.js";import{b as N,T as ue,n as A}from"./QSelect.7195696d.js";const B={...U,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},q=50,D=2*q,T=D*Math.PI,re=Math.round(T*1e3)/1e3;var ie=Q({name:"QCircularProgress",props:{...B,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:y}){const{proxy:{$q:h}}=K(),C=X(e),M=a(()=>{const i=(h.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(h.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-i}deg)`:`rotate3d(0, 0, 1, ${i-90}deg)`}}),r=a(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),n=a(()=>D/(1-e.thickness/2)),v=a(()=>`${n.value/2} ${n.value/2} ${n.value} ${n.value}`),s=a(()=>N(e.value,e.min,e.max)),m=a(()=>T*(1-(s.value-e.min)/(e.max-e.min))),k=a(()=>e.thickness/2*n.value);function c({thickness:i,offset:g,color:f,cls:w,rounded:V}){return b("circle",{class:"q-circular-progress__"+w+(f!==void 0?` text-${f}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":i,"stroke-dasharray":re,"stroke-dashoffset":g,"stroke-linecap":V,cx:n.value,cy:n.value,r:q})}return()=>{const i=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&i.push(b("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:q-k.value/2,cx:n.value,cy:n.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&i.push(c({cls:"track",thickness:k.value,offset:0,color:e.trackColor})),i.push(c({cls:"circle",thickness:k.value,offset:m.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[b("svg",{class:"q-circular-progress__svg",style:M.value,viewBox:v.value,"aria-hidden":"true"},i)];return e.showValue===!0&&g.push(b("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},y.default!==void 0?y.default():[b("div",s.value)])),b("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:C.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:s.value},Y(y.internal,g))}}});const I=[34,37,40,33,39,38],oe=Object.keys(B);var de=Q({name:"QKnob",props:{...p,...B,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:y,emit:h}){const{proxy:C}=K(),{$q:M}=C,r=_(e.modelValue),n=_(!1),v=a(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),s=a(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax);let m;function k(){r.value=e.modelValue===null?v.value:N(e.modelValue,v.value,s.value),S(!0)}ee(()=>`${e.modelValue}|${v.value}|${s.value}`,k),k();const c=a(()=>e.disable===!1&&e.readonly===!1),i=a(()=>"q-knob non-selectable"+(c.value===!0?" q-knob--editable":e.disable===!0?" disabled":"")),g=a(()=>(String(e.step).trim().split(".")[1]||"").length),f=a(()=>e.step===0?1:e.step),w=a(()=>e.instantFeedback===!0||n.value===!0),V=M.platform.is.mobile===!0?a(()=>c.value===!0?{onClick:z}:{}):a(()=>c.value===!0?{onMousedown:W,onClick:z,onKeydown:Z,onKeyup:G}:{}),j=a(()=>c.value===!0?{tabindex:e.tabindex}:{[`aria-${e.disable===!0?"disabled":"readonly"}`]:"true"}),E=a(()=>{const t={};return oe.forEach(u=>{t[u]=e[u]}),t});function O(t){t.isFinal?(x(t.evt,!0),n.value=!1):(t.isFirst&&(P(),n.value=!0),x(t.evt))}const R=a(()=>[[ue,O,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function P(){const{top:t,left:u,width:d,height:$}=C.$el.getBoundingClientRect();m={top:t+$/2,left:u+d/2}}function W(t){P(),x(t)}function z(t){P(),x(t,!0)}function Z(t){if(!I.includes(t.keyCode))return;te(t);const u=([34,33].includes(t.keyCode)?10:1)*f.value,d=[34,37,40].includes(t.keyCode)?-u:u;r.value=N(parseFloat((r.value+d).toFixed(g.value)),v.value,s.value),S()}function x(t,u){const d=ae(t),$=Math.abs(d.top-m.top),L=Math.sqrt($**2+Math.abs(d.left-m.left)**2);let l=Math.asin($/L)*(180/Math.PI);d.top<m.top?l=m.left<d.left?90-l:270+l:l=m.left<d.left?l+90:270-l,M.lang.rtl===!0?l=A(-l-e.angle,0,360):e.angle&&(l=A(l-e.angle,0,360)),e.reverse===!0&&(l=360-l);let o=e.min+l/360*(e.max-e.min);if(f.value!==0){const F=o%f.value;o=o-F+(Math.abs(F)>=f.value/2?(F<0?-1:1)*f.value:0),o=parseFloat(o.toFixed(g.value))}o=N(o,v.value,s.value),h("dragValue",o),r.value!==o&&(r.value=o),S(u)}function G(t){I.includes(t.keyCode)&&S(!0)}function S(t){e.modelValue!==r.value&&h("update:modelValue",r.value),t===!0&&h("change",r.value)}const H=ne(e);function J(){return b("input",H.value)}return()=>{const t={class:i.value,role:"slider","aria-valuemin":v.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,...j.value,...E.value,value:r.value,instantFeedback:w.value,...V.value},u={default:y.default};return c.value===!0&&e.name!==void 0&&(u.internal=J),le(ie,t,u,"knob",c.value,()=>R.value)}}});export{de as Q};
